/*! For license information please see main.24fbfdaa.js.LICENSE.txt */
!function(){var e={110:function(e,t,n){"use strict";var r=n(441),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var u=s(t),v=s(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!u||!u[m])){var g=f(n,m);try{c(t,m,g)}catch(k){}}}}return t}},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function j(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){J(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Se(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ie)&&(Ae(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,je={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(je,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ht(u):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,It,Et,St=!1,Tt=[],Ct=null,At=null,Nt=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function jt(){St=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(Vt),Rt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function qt(e){function t(t){return Bt(t,e)}if(0<Tt.length){Bt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=w.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=be(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Sn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(Sn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Se(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function Yn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(l){var Xn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Kn(t,Gn,e,be(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Sr=Er("animationend"),Tr=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,jr("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=be(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=An;break;case Sr:case Tr:case Cr:s=mn;break;case Ar:s=Nn;break;case"scroll":s=fn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Re(p,f))&&l.push(Kr(p,v,d)))),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=f;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)f=Gr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Gr(l),f=Gr(f)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==h&&Qr(o,h,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Wn(u))if(Jn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Wn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?jn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,qn=!0)),0<(m=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&jn(e,t)?(e=en(),Zt=Xt=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Si(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ai=Ii(!1),Ni=Ti;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ai),Ei(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Si(Ci,t),Si(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Si(Ci,e),Si(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Si(Ci,e)):Ei(Ai),Si(Ai,n)}var Ui=null,Vi=!1,ji=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,qi),i}finally{kt=t,ji=!1}}return null}var zi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){zi[Wi++]=Hi,zi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=a+e}else $i=1<<a|n<<i|r,Ji=e}function ea(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Hi=zi[--Wi],zi[Wi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function _a(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Sa=null;function Ta(e){null===Sa?Sa=[e]:Sa.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.lane,d=u.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[u]:f.push(u))}else d={eventTime:d,lane:f,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=h):l=l.next=d,o|=f;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(f=u).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function ja(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Ba={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ba,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ba.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(ja(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ba.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case R:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),ia&&Xi(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Ja=Ya(!1),Xa={},Za=Ii(Xa),eo=Ii(Xa),to=Ii(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Si(to,t),Si(eo,e),Si(Za,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Za),Si(Za,t)}function io(){Ei(Za),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Si(eo,e),Si(Za,n))}function oo(e){eo.current===e&&(Ei(Za),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,wo=0,bo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cu,e=n(r,i)}while(ko)}if(ho.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function So(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,vo.lanes|=h,Ms|=h}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Aa(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=So();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return To().memoizedState}function Bo(e,t,n,r){var i=So();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function zo(e,t){return Bo(8390656,8,e,t)}function Wo(e,t){return qo(2048,8,e,t)}function Ko(e,t){return qo(4,2,e,t)}function Ho(e,t){return qo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Go.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return So().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=So();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=So();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},So().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return So().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),So().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=So();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=So(),t=As.identifierPrefix;if(ia){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:jo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(To(),yo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:$o,useContext:Ea,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:jo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),fu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Ja(t,null,n,r):$a(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Tu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ds,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ds,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Si(Ds,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Si(Ds,Rs),Rs|=r;return bu(e,t,i,n),t.child}function Su(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Na=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),s=t.memoizedState,u!==r||f!==s||Ai.current||Na?("function"===typeof l&&(ja(t,n,l,r),s=t.memoizedState),(u=Na||qa(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Pi(t,s=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Wa(t,o,r,s),Na=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||Ai.current||Na?("function"===typeof d&&(ja(t,n,d,r),p=t.memoizedState),(c=Na||qa(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Su(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Ru,Du,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Si(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Vu(e,t,u,r=hu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return Vu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Vu(e,t,u,r=hu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),nc(r,e,i,-1))}return vc(),Vu(e,t,u,r=hu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=$i,Gi[Qi++]=Ji,Gi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),(t=Uu(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vu(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function Bu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Bu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Bu(t,!0,n,null,a);break;case"together":Bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Ri(t.type)&&Di(),Hu(t),null;case 3:return r=t.stateNode,io(),Ei(Ai),Ei(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[di]=r,Ru(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>qs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Je()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=uo.current,Si(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ai),Ei(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Xu=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,hs=!1;function fs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||Zu(n,t);case 6:var r=ls,i=hs;ls=null,fs(e,t,n),hs=i,null!==(ls=r)&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(hs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=hs,ls=n.stateNode.containerInfo,hs=!0,fs(e,t,n),ls=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}fs(e,t,n);break;case 1:if(!$u&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}fs(e,t,n);break;case 21:fs(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,fs(e,t,n),$u=r):fs(e,t,n);break;default:fs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,hs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ms(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(y){Ic(e,e.return,y)}try{ns(5,e,e.return)}catch(y){Ic(e,e.return,y)}}break;case 1:vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ms(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Ic(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&J(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var h=c[u],f=c[u+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(s){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ic(e,e.return,y)}}break;case 6:if(vs(t,e),ms(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ic(e,e.return,y)}}break;case 3:if(vs(t,e),ms(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Ic(e,e.return,y)}break;case 4:default:vs(t,e),ms(e);break;case 13:vs(t,e),ms(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Bs=Je())),4&r&&ps(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||h,vs(t,e),$u=l):vs(t,e),ms(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Xu=e,h=e.child;null!==h;){for(f=Xu=h;null!==Xu;){switch(p=(d=Xu).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ic(r,n,y)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){bs(f);continue}}null!==p?(p.return=d,Xu=p):bs(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=f.stateNode,u=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ic(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Ic(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vs(t,e),ms(e),4&r&&ps(e);case 21:}}function ms(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Xu=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Xu;){var i=Xu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Yu;var c=$u;if(Yu=o,($u=s)&&!c)for(Xu=i;null!==Xu;)s=(o=Xu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Xu=s):_s(i);for(;null!==a;)Xu=a,ks(a,t,n),a=a.sibling;Xu=i,Yu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xu=a):ws(e)}}function ws(e){for(;null!==Xu;){var t=Xu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}$u||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Xu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xu=n;break}Xu=t.return}}function bs(e){for(;null!==Xu;){var t=Xu;if(t===e){Xu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xu=n;break}Xu=t.return}}function _s(e){for(;null!==Xu;){var t=Xu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Xu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Xu=u;break}Xu=t.return}}var xs,Is=Math.ceil,Es=w.ReactCurrentDispatcher,Ss=w.ReactCurrentOwner,Ts=w.ReactCurrentBatchConfig,Cs=0,As=null,Ns=null,Ps=0,Rs=0,Ds=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,Vs=null,js=null,Bs=0,qs=1/0,zs=null,Ws=!1,Ks=null,Hs=null,Gs=!1,Qs=null,Ys=0,$s=0,Js=null,Xs=-1,Zs=0;function ec(){return 0!==(6&Cs)?Je():-1!==Xs?Xs:Xs=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Ps?Ps&-Ps:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===As||(e===As&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Ps)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(qs=Je()+500,Vi&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ft(e,e===As?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(sc.bind(null,e)):Bi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&qi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xs=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ft(e,e===As?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(As===e&&Ps===t||(zs=null,qs=Je()+500,fc(e,t));;)try{gc();break}catch(s){dc(e,s)}ba(),Es.current=o,Cs=i,null!==Ns?t=0:(As=null,Ps=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,fc(e,0),uc(e,r),rc(e,Je()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,fc(e,0),uc(e,r),rc(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:bc(e,js,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=Bs+500-Je())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,js,zs),t);break}bc(e,js,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,js,zs),r);break}bc(e,js,zs);break;default:throw Error(a(329))}}}return rc(e,Je()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=Vs;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&oc(t)),e}function oc(e){null===js?js=e:js.push.apply(js,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ft(e,0);if(0===(1&t))return rc(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,fc(e,0),uc(e,t),rc(e,Je()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,js,zs),rc(e,Je()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(qs=Je()+500,Vi&&qi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Ts.transition,r=kt;try{if(Ts.transition=null,kt=1,e)return e()}finally{kt=r,Ts.transition=n,0===(6&(Cs=t))&&qi()}}function hc(){Rs=Ds.current,Ei(Ds)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ei(Ai),Ei(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ns=e=Dc(e.current,null),Ps=Rs=t,Os=0,Ls=null,Us=Fs=Ms=0,js=Vs=null,null!==Sa){for(t=0;t<Sa.length;t++)if(null!==(r=(n=Sa[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Sa=null}return e}function dc(e,t){for(;;){var n=Ns;try{if(ba(),ho.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,wo=0,Ss.current=null,null===n||null===n.return){Os=1,Ls=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=s,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===Vs?Vs=[o]:Vs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(w){t=w,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Es.current;return Es.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===As||0===(268435455&Ms)&&0===(268435455&Fs)||uc(As,Ps)}function yc(e,t){var n=Cs;Cs|=2;var r=pc();for(As===e&&Ps===t||(zs=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(ba(),Cs=n,Es.current=r,null!==Ns)throw Error(a(261));return As=null,Ps=0,Os}function mc(){for(;null!==Ns;)kc(Ns)}function gc(){for(;null!==Ns&&!Ye();)kc(Ns)}function kc(e){var t=xs(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Ns=t,Ss.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Rs)))return void(Ns=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Os=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Os&&(Os=5)}function bc(e,t,n){var r=kt,i=Ts.transition;try{Ts.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ns=As=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ts.transition,Ts.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=Wt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==o||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Xu=t;null!==Xu;)if(e=(t=Xu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xu=e;else for(;null!==Xu;){t=Xu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ic(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Xu=e;break}Xu=t.return}v=ts,ts=!1}(e,n),ys(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),$e(),Cs=s,kt=u,Ts.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,Ys=i),0===(o=e.pendingLanes)&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&Ys)&&0!==e.tag&&_c(),0!==(1&(o=e.pendingLanes))?e===Js?$s++:($s=0,Js=e):$s=0,qi()}(e,t,n,r)}finally{Ts.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=wt(Ys),t=Ts.transition,n=kt;try{if(Ts.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Xu=e.current;null!==Xu;){var o=Xu,u=o.child;if(0!==(16&Xu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Xu=l;null!==Xu;){var h=Xu;switch(h.tag){case 0:case 11:case 15:ns(8,h,o)}var f=h.child;if(null!==f)f.return=h,Xu=f;else for(;null!==Xu;){var d=(h=Xu).sibling,p=h.return;if(as(h),h===l){Xu=null;break}if(null!==d){d.return=p,Xu=d;break}Xu=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Xu=u;else e:for(;null!==Xu;){if(0!==(2048&(o=Xu).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xu=g;break e}Xu=o.return}}var k=e.current;for(Xu=k;null!==Xu;){var w=(u=Xu).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,Xu=w;else e:for(u=k;null!==Xu;){if(0!==(2048&(s=Xu).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Xu=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,Xu=b;break e}Xu=s.return}}if(Cs=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Ts.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ps&n)===n&&(4===Os||3===Os&&(130023424&Ps)===Ps&&500>Je()-Bs?fc(e,0):Us|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Aa(e,t))&&(mt(e,t,n),rc(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Ac(e,t){return Ge(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:u=10;break e;case T:u=9;break e;case C:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Vc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=qc(null),n=e.current,(a=Da(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Si(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Si(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Wu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=Ba,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ja(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Su(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Si(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ai.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),zu(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),za(t,r,i),Ka(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Je()),0===(6&Cs)&&(qs=Je()+500,qi()))}break;case 13:lc((function(){var t=Aa(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Aa(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));G(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=lc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Se,Te,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,w=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return b(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return _(e)||b(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return b(e)===c},t.isContextProvider=function(e){return b(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===y},t.isMemo=function(e){return b(e)===v},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===u},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===w||e.$$typeof===m)},t.typeOf=b},441:function(e,t,n){"use strict";e.exports=n(372)},459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.offscreen");function m(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case f:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case h:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},900:function(e,t,n){"use strict";n(459)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?f.callback=u:f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)var s=!0;else{var h=r(l);null!==h&&O(b,h.startTime-n),s=!1}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,S=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function N(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,x=function(){R.postMessage(null)}}else x=function(){m(N,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<a.length;s++){var c=a[s];if(!u(c))return!1;var l=e[c],h=t[c];if(!1===(i=n?n.call(r,l,h,c):void 0)||void 0===i&&l!==h)return!1}return!0}},561:function(e,t,n){"use strict";var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){"use strict";var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=u(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var d=o(e,h[0],h[1]);return s((function(){f.hasValue=!0,f.value=d}),[d]),l(d),d}},248:function(e,t,n){"use strict";e.exports=n(561)},327:function(e,t,n){"use strict";e.exports=n(595)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".efefe6ef.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="dog:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var f=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/sodog/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkdog=self.webpackChunkdog||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return on},SDK_VERSION:function(){return _r},_DEFAULT_ENTRY_NAME:function(){return cr},_addComponent:function(){return dr},_addOrOverwriteComponent:function(){return pr},_apps:function(){return hr},_clearComponents:function(){return gr},_components:function(){return fr},_getProvider:function(){return yr},_registerComponent:function(){return vr},_removeServiceInstance:function(){return mr},deleteApp:function(){return Sr},getApp:function(){return Ir},getApps:function(){return Er},initializeApp:function(){return xr},onLog:function(){return Ar},registerVersion:function(){return Cr},setLogLevel:function(){return Nr}});var t=n(791),r=n(250);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.p;function u(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var s=n(248),c=n(327),l=n(164);var h=function(e){e()},f=function(){return h},d=t.createContext(null);function p(){return(0,t.useContext)(d)}var v=function(){throw new Error("uSES not initialized!")},y=v,m=function(e,t){return e===t};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=e===d?p:function(){return(0,t.useContext)(e)};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;var i=n(),a=i.store,o=i.subscription,u=i.getServerState,s=y(o.addNestedSub,a.getState,u||a.getState,e,r);return(0,t.useDebugValue)(s),s}}var k=g(),w=n(110),b=n.n(w);n(900);var _={notify:function(){},get:function(){return[]}};function x(e,t){var n,r=_;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=f(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=_)},getListeners:function(){return r}};return o}var I=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?t.useLayoutEffect:t.useEffect;var E=function(e){var n=e.store,r=e.context,i=e.children,a=e.serverState,o=(0,t.useMemo)((function(){var e=x(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),u=(0,t.useMemo)((function(){return n.getState()}),[n]);I((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=r||d;return t.createElement(s.Provider,{value:o},i)};function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,n=e===d?p:function(){return(0,t.useContext)(e)};return function(){return n().store}}var T=S();function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=e===d?T:S(e);return function(){return t().dispatch}}var A,N=C();!function(e){y=e}(c.useSyncExternalStoreWithSelector),function(e){e}(s.useSyncExternalStore),A=l.unstable_batchedUpdates,h=A;var P=n(441),R=n(613),D=n.n(R);var O=function(e){function t(e,r,s,c,f){for(var d,p,v,y,w,_=0,x=0,I=0,E=0,S=0,R=0,O=v=d=0,M=0,F=0,U=0,V=0,j=s.length,B=j-1,q="",z="",W="",K="";M<j;){if(p=s.charCodeAt(M),M===B&&0!==x+E+I+_&&(0!==x&&(p=47===x?10:47),E=I=_=0,j++,B++),0===x+E+I+_){if(M===B&&(0<F&&(q=q.replace(h,"")),0<q.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:q+=s.charAt(M)}p=59}switch(p){case 123:for(d=(q=q.trim()).charCodeAt(0),v=1,V=++M;M<j;){switch(p=s.charCodeAt(M)){case 123:v++;break;case 125:v--;break;case 47:switch(p=s.charCodeAt(M+1)){case 42:case 47:e:{for(O=M+1;O<B;++O)switch(s.charCodeAt(O)){case 47:if(42===p&&42===s.charCodeAt(O-1)&&M+2!==O){M=O+1;break e}break;case 10:if(47===p){M=O+1;break e}}M=O}}break;case 91:p++;case 40:p++;case 34:case 39:for(;M++<B&&s.charCodeAt(M)!==p;);}if(0===v)break;M++}if(v=s.substring(V,M),0===d&&(d=(q=q.replace(l,"").trim()).charCodeAt(0)),64===d){switch(0<F&&(q=q.replace(h,"")),p=q.charCodeAt(1)){case 100:case 109:case 115:case 45:F=r;break;default:F=P}if(V=(v=t(r,F,v,p,f+1)).length,0<D&&(w=u(3,v,F=n(P,q,U),r,C,T,V,p,f,c),q=F.join(""),void 0!==w&&0===(V=(v=w.trim()).length)&&(p=0,v="")),0<V)switch(p){case 115:q=q.replace(b,o);case 100:case 109:case 45:v=q+"{"+v+"}";break;case 107:v=(q=q.replace(m,"$1 $2"))+"{"+v+"}",v=1===N||2===N&&a("@"+v,3)?"@-webkit-"+v+"@"+v:"@"+v;break;default:v=q+v,112===c&&(z+=v,v="")}else v=""}else v=t(r,n(r,q,U),v,c,f+1);W+=v,v=U=F=O=d=0,q="",p=s.charCodeAt(++M);break;case 125:case 59:if(1<(V=(q=(0<F?q.replace(h,""):q).trim()).length))switch(0===O&&(d=q.charCodeAt(0),45===d||96<d&&123>d)&&(V=(q=q.replace(" ",":")).length),0<D&&void 0!==(w=u(1,q,r,e,C,T,z.length,c,f,c))&&0===(V=(q=w.trim()).length)&&(q="\0\0"),d=q.charCodeAt(0),p=q.charCodeAt(1),d){case 0:break;case 64:if(105===p||99===p){K+=q+s.charAt(M);break}default:58!==q.charCodeAt(V-1)&&(z+=i(q,d,p,q.charCodeAt(2)))}U=F=O=d=0,q="",p=s.charCodeAt(++M)}}switch(p){case 13:case 10:47===x?x=0:0===1+d&&107!==c&&0<q.length&&(F=1,q+="\0"),0<D*L&&u(0,q,r,e,C,T,z.length,c,f,c),T=1,C++;break;case 59:case 125:if(0===x+E+I+_){T++;break}default:switch(T++,y=s.charAt(M),p){case 9:case 32:if(0===E+_+x)switch(S){case 44:case 58:case 9:case 32:y="";break;default:32!==p&&(y=" ")}break;case 0:y="\\0";break;case 12:y="\\f";break;case 11:y="\\v";break;case 38:0===E+x+_&&(F=U=1,y="\f"+y);break;case 108:if(0===E+x+_+A&&0<O)switch(M-O){case 2:112===S&&58===s.charCodeAt(M-3)&&(A=S);case 8:111===R&&(A=R)}break;case 58:0===E+x+_&&(O=M);break;case 44:0===x+I+E+_&&(F=1,y+="\r");break;case 34:case 39:0===x&&(E=E===p?0:0===E?p:E);break;case 91:0===E+x+I&&_++;break;case 93:0===E+x+I&&_--;break;case 41:0===E+x+_&&I--;break;case 40:if(0===E+x+_){if(0===d)if(2*S+3*R===533);else d=1;I++}break;case 64:0===x+I+E+_+O+v&&(v=1);break;case 42:case 47:if(!(0<E+_+I))switch(x){case 0:switch(2*p+3*s.charCodeAt(M+1)){case 235:x=47;break;case 220:V=M,x=42}break;case 42:47===p&&42===S&&V+2!==M&&(33===s.charCodeAt(V+2)&&(z+=s.substring(V,M+1)),y="",x=0)}}0===x&&(q+=y)}R=S,S=p,M++}if(0<(V=z.length)){if(F=r,0<D&&(void 0!==(w=u(2,z,F,e,C,T,V,c,f,c))&&0===(z=w).length))return K+z+W;if(z=F.join(",")+"{"+z+"}",0!==N*A){switch(2!==N||a(z,2)||(A=0),A){case 111:z=z.replace(k,":-moz-$1")+z;break;case 112:z=z.replace(g,"::-webkit-input-$1")+z.replace(g,"::-moz-$1")+z.replace(g,":-ms-input-$1")+z}A=0}}return K+z+W}function n(e,t,n){var i=t.trim().split(v);t=i;var a=i.length,o=e.length;switch(o){case 0:case 1:var u=0;for(e=0===o?"":e[0]+" ";u<a;++u)t[u]=r(e,t[u],n).trim();break;default:var s=u=0;for(t=[];u<a;++u)for(var c=0;c<o;++c)t[s++]=r(e[c]+" ",i[u],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(y,"$1"+e.trim());case 58:return e.trim()+t.replace(y,"$1"+e.trim());default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(y,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function i(e,t,n,r){var o=e+";",u=2*t+3*n+4*r;if(944===u){e=o.indexOf(":",9)+1;var s=o.substring(e,o.length-1).trim();return s=o.substring(0,e).trim()+s+";",1===N||2===N&&a(s,1)?"-webkit-"+s+s:s}if(0===N||2===N&&!a(o,1))return o;switch(u){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(S,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(s=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+s+o;case 1005:return d.test(o)?o.replace(f,":-webkit-")+o.replace(f,":-moz-")+o:o;case 1e3:switch(t=(s=o.substring(13).trim()).indexOf("-")+1,s.charCodeAt(0)+s.charCodeAt(t)){case 226:s=o.replace(w,"tb");break;case 232:s=o.replace(w,"tb-rl");break;case 220:s=o.replace(w,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+s+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,u=(s=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|s.charCodeAt(7))){case 203:if(111>s.charCodeAt(8))break;case 115:o=o.replace(s,"-webkit-"+s)+";"+o;break;case 207:case 102:o=o.replace(s,"-webkit-"+(102<u?"inline-":"")+"box")+";"+o.replace(s,"-webkit-"+s)+";"+o.replace(s,"-ms-"+s+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return s=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+s+"-ms-flex-"+s+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(x,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(x,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===E.test(e))return 115===(s=e.substring(e.indexOf(":")+1)).charCodeAt(0)?i(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):o.replace(s,"-webkit-"+s)+o.replace(s,"-moz-"+s.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===n+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function a(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),O(2!==t?r:r.replace(I,"$1"),n,t)}function o(e,t){var n=i(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(_," or ($1)").substring(4):"("+t+")"}function u(e,t,n,r,i,a,o,u,s,l){for(var h,f=0,d=t;f<D;++f)switch(h=R[f].call(c,e,d,n,r,i,a,o,u,s,l)){case void 0:case!1:case!0:case null:break;default:d=h}if(d!==t)return d}function s(e){return void 0!==(e=e.prefix)&&(O=null,e?"function"!==typeof e?N=1:(N=2,O=e):N=0),s}function c(e,n){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<D){var i=u(-1,n,r,r,C,T,0,0,0,0);void 0!==i&&"string"===typeof i&&(n=i)}var a=t(P,r,n,0,0);return 0<D&&(void 0!==(i=u(-2,a,r,r,C,T,a.length,0,0,0))&&(a=i)),"",A=0,T=C=1,a}var l=/^\0+/g,h=/[\0\r\f]/g,f=/: */g,d=/zoo|gra/,p=/([,: ])(transform)/g,v=/,\r+?/g,y=/([\t\r\n ])*\f?&/g,m=/@(k\w+)\s*(\S*)\s*/,g=/::(place)/g,k=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,b=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,x=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,E=/stretch|:\s*\w+\-(?:conte|avail)/,S=/([^-])(image-set\()/,T=1,C=1,A=0,N=1,P=[],R=[],D=0,O=null,L=0;return c.use=function e(t){switch(t){case void 0:case null:D=R.length=0;break;default:if("function"===typeof t)R[D++]=t;else if("object"===typeof t)for(var n=0,r=t.length;n<r;++n)e(t[n]);else L=0|!!t}return e},c.set=s,void 0!==e&&s(e),c},L={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var M=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},F=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,U=M((function(e){return F.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=function(e,t){for(var n=[e[0]],r=0,i=t.length;r<i;r+=1)n.push(t[r],e[r+1]);return n},B=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,P.typeOf)(e)},q=Object.freeze([]),z=Object.freeze({});function W(e){return"function"==typeof e}function K(e){return e.displayName||e.name||"Component"}function H(e){return e&&"string"==typeof e.styledComponentId}var G="undefined"!=typeof process&&({NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.SC_ATTR)||"data-styled",Q="undefined"!=typeof window&&"HTMLElement"in window,Y=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.SC_DISABLE_SPEEDY));function $(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var J=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var t=e.prototype;return t.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},t.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,i=r;e>=i;)(i<<=1)<0&&$(16,""+e);this.groupSizes=new Uint32Array(i),this.groupSizes.set(n),this.length=i;for(var a=r;a<i;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(e+1),u=0,s=t.length;u<s;u++)this.tag.insertRule(o,t[u])&&(this.groupSizes[e]++,o++)},t.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var i=n;i<r;i++)this.tag.deleteRule(n)}},t.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n,a=r;a<i;a++)t+=this.tag.getRule(a)+"/*!sc*/\n";return t},e}(),X=new Map,Z=new Map,ee=1,te=function(e){if(X.has(e))return X.get(e);for(;Z.has(ee);)ee++;var t=ee++;return X.set(e,t),Z.set(t,e),t},ne=function(e){return Z.get(e)},re=function(e,t){t>=ee&&(ee=t+1),X.set(e,t),Z.set(t,e)},ie="style["+G+'][data-styled-version="5.3.5"]',ae=new RegExp("^"+G+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),oe=function(e,t,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&e.registerName(t,r)},ue=function(e,t){for(var n=(t.textContent||"").split("/*!sc*/\n"),r=[],i=0,a=n.length;i<a;i++){var o=n[i].trim();if(o){var u=o.match(ae);if(u){var s=0|parseInt(u[1],10),c=u[2];0!==s&&(re(c,s),oe(e,c,u[3]),e.getTag().insertRules(s,r)),r.length=0}else r.push(o)}}},se=function(){return"undefined"!=typeof window&&void 0!==window.__webpack_nonce__?window.__webpack_nonce__:null},ce=function(e){var t=document.head,n=e||t,r=document.createElement("style"),i=function(e){for(var t=e.childNodes,n=t.length;n>=0;n--){var r=t[n];if(r&&1===r.nodeType&&r.hasAttribute(G))return r}}(n),a=void 0!==i?i.nextSibling:null;r.setAttribute(G,"active"),r.setAttribute("data-styled-version","5.3.5");var o=se();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},le=function(){function e(e){var t=this.element=ce(e);t.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var i=t[n];if(i.ownerNode===e)return i}$(17)}(t),this.length=0}var t=e.prototype;return t.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},t.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.getRule=function(e){var t=this.sheet.cssRules[e];return void 0!==t&&"string"==typeof t.cssText?t.cssText:""},e}(),he=function(){function e(e){var t=this.element=ce(e);this.nodes=t.childNodes,this.length=0}var t=e.prototype;return t.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t),r=this.nodes[e];return this.element.insertBefore(n,r||null),this.length++,!0}return!1},t.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),fe=function(){function e(e){this.rules=[],this.length=0}var t=e.prototype;return t.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},t.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),de=Q,pe={isServer:!Q,useCSSOMInjection:!Y},ve=function(){function e(e,t,n){void 0===e&&(e=z),void 0===t&&(t={}),this.options=V({},pe,{},e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Q&&de&&(de=!1,function(e){for(var t=document.querySelectorAll(ie),n=0,r=t.length;n<r;n++){var i=t[n];i&&"active"!==i.getAttribute(G)&&(ue(e,i),i.parentNode&&i.parentNode.removeChild(i))}}(this))}e.registerId=function(e){return te(e)};var t=e.prototype;return t.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(V({},this.options,{},t),this.gs,n&&this.names||void 0)},t.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.getTag=function(){return this.tag||(this.tag=(n=(t=this.options).isServer,r=t.useCSSOMInjection,i=t.target,e=n?new fe(i):r?new le(i):new he(i),new J(e)));var e,t,n,r,i},t.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},t.registerName=function(e,t){if(te(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},t.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(te(e),n)},t.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.clearRules=function(e){this.getTag().clearGroup(te(e)),this.clearNames(e)},t.clearTag=function(){this.tag=void 0},t.toString=function(){return function(e){for(var t=e.getTag(),n=t.length,r="",i=0;i<n;i++){var a=ne(i);if(void 0!==a){var o=e.names.get(a),u=t.getGroup(i);if(o&&u&&o.size){var s=G+".g"+i+'[id="'+a+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+u+s+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),ye=/(a)(d)/gi,me=function(e){return String.fromCharCode(e+(e>25?39:97))};function ge(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=me(t%52)+n;return(me(t%52)+n).replace(ye,"$1-$2")}var ke=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},we=function(e){return ke(5381,e)};function be(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(W(n)&&!H(n))return!1}return!0}var _e=we("5.3.5"),xe=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&be(e),this.componentId=t,this.baseHash=ke(_e,t),this.baseStyle=n,ve.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.componentId,i=[];if(this.baseStyle&&i.push(this.baseStyle.generateAndInjectStyles(e,t,n)),this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(r,this.staticRulesId))i.push(this.staticRulesId);else{var a=Be(this.rules,e,t,n).join(""),o=ge(ke(this.baseHash,a)>>>0);if(!t.hasNameForId(r,o)){var u=n(a,"."+o,void 0,r);t.insertRules(r,o,u)}i.push(o),this.staticRulesId=o}else{for(var s=this.rules.length,c=ke(this.baseHash,n.hash),l="",h=0;h<s;h++){var f=this.rules[h];if("string"==typeof f)l+=f;else if(f){var d=Be(f,e,t,n),p=Array.isArray(d)?d.join(""):d;c=ke(c,p+h),l+=p}}if(l){var v=ge(c>>>0);if(!t.hasNameForId(r,v)){var y=n(l,"."+v,void 0,r);t.insertRules(r,v,y)}i.push(v)}}return i.join(" ")},e}(),Ie=/^\s*\/\/.*$/gm,Ee=[":","[",".","#"];function Se(e){var t,n,r,i,a=void 0===e?z:e,o=a.options,u=void 0===o?z:o,s=a.plugins,c=void 0===s?q:s,l=new O(u),h=[],f=function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,i,a,o,u,s,c,l,h){switch(n){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(i[0]+r),"";default:return r+(0===h?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}((function(e){h.push(e)})),d=function(e,r,a){return 0===r&&-1!==Ee.indexOf(a[n.length])||a.match(i)?e:"."+t};function p(e,a,o,u){void 0===u&&(u="&");var s=e.replace(Ie,""),c=a&&o?o+" "+a+" { "+s+" }":s;return t=u,n=a,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),l(o||!a?"":a,c)}return l.use([].concat(c,[function(e,t,i){2===e&&i.length&&i[0].lastIndexOf(n)>0&&(i[0]=i[0].replace(r,d))},f,function(e){if(-2===e){var t=h;return h=[],t}}])),p.hash=c.length?c.reduce((function(e,t){return t.name||$(15),ke(e,t.name)}),5381).toString():"",p}var Te=t.createContext(),Ce=(Te.Consumer,t.createContext()),Ae=(Ce.Consumer,new ve),Ne=Se();function Pe(){return(0,t.useContext)(Te)||Ae}function Re(){return(0,t.useContext)(Ce)||Ne}function De(e){var n=(0,t.useState)(e.stylisPlugins),r=n[0],i=n[1],a=Pe(),o=(0,t.useMemo)((function(){var t=a;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target]),u=(0,t.useMemo)((function(){return Se({options:{prefix:!e.disableVendorPrefixes},plugins:r})}),[e.disableVendorPrefixes,r]);return(0,t.useEffect)((function(){D()(r,e.stylisPlugins)||i(e.stylisPlugins)}),[e.stylisPlugins]),t.createElement(Te.Provider,{value:o},t.createElement(Ce.Provider,{value:u},e.children))}var Oe=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Ne);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.toString=function(){return $(12,String(n.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=t}return e.prototype.getName=function(e){return void 0===e&&(e=Ne),this.name+e.hash},e}(),Le=/([A-Z])/,Me=/([A-Z])/g,Fe=/^ms-/,Ue=function(e){return"-"+e.toLowerCase()};function Ve(e){return Le.test(e)?e.replace(Me,Ue).replace(Fe,"-ms-"):e}var je=function(e){return null==e||!1===e||""===e};function Be(e,t,n,r){if(Array.isArray(e)){for(var i,a=[],o=0,u=e.length;o<u;o+=1)""!==(i=Be(e[o],t,n,r))&&(Array.isArray(i)?a.push.apply(a,i):a.push(i));return a}return je(e)?"":H(e)?"."+e.styledComponentId:W(e)?"function"!=typeof(s=e)||s.prototype&&s.prototype.isReactComponent||!t?e:Be(e(t),t,n,r):e instanceof Oe?n?(e.inject(n,r),e.getName(r)):e:B(e)?function e(t,n){var r,i,a=[];for(var o in t)t.hasOwnProperty(o)&&!je(t[o])&&(Array.isArray(t[o])&&t[o].isCss||W(t[o])?a.push(Ve(o)+":",t[o],";"):B(t[o])?a.push.apply(a,e(t[o],o)):a.push(Ve(o)+": "+(r=o,(null==(i=t[o])||"boolean"==typeof i||""===i?"":"number"!=typeof i||0===i||r in L?String(i).trim():i+"px")+";")));return n?[n+" {"].concat(a,["}"]):a}(e):e.toString();var s}var qe=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return W(e)||B(e)?qe(Be(j(q,[e].concat(n)))):0===n.length&&1===e.length&&"string"==typeof e[0]?e:qe(Be(j(e,n)))}new Set;var We=function(e,t,n){return void 0===n&&(n=z),e.theme!==n.theme&&e.theme||t||n.theme},Ke=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,He=/(^-|-$)/g;function Ge(e){return e.replace(Ke,"-").replace(He,"")}var Qe=function(e){return ge(we(e)>>>0)};function Ye(e){return"string"==typeof e&&!0}var $e=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Je=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Xe(e,t,n){var r=e[n];$e(t)&&$e(r)?Ze(r,t):e[n]=t}function Ze(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];if($e(o))for(var u in o)Je(u)&&Xe(e,o[u],u)}return e}var et=t.createContext();et.Consumer;var tt={};function nt(e,n,r){var i=H(e),a=!Ye(e),o=n.attrs,u=void 0===o?q:o,s=n.componentId,c=void 0===s?function(e,t){var n="string"!=typeof e?"sc":Ge(e);tt[n]=(tt[n]||0)+1;var r=n+"-"+Qe("5.3.5"+n+tt[n]);return t?t+"-"+r:r}(n.displayName,n.parentComponentId):s,l=n.displayName,h=void 0===l?function(e){return Ye(e)?"styled."+e:"Styled("+K(e)+")"}(e):l,f=n.displayName&&n.componentId?Ge(n.displayName)+"-"+n.componentId:n.componentId||c,d=i&&e.attrs?Array.prototype.concat(e.attrs,u).filter(Boolean):u,p=n.shouldForwardProp;i&&e.shouldForwardProp&&(p=n.shouldForwardProp?function(t,r,i){return e.shouldForwardProp(t,r,i)&&n.shouldForwardProp(t,r,i)}:e.shouldForwardProp);var v,y=new xe(r,f,i?e.componentStyle:void 0),m=y.isStatic&&0===u.length,g=function(e,n){return function(e,n,r,i){var a=e.attrs,o=e.componentStyle,u=e.defaultProps,s=e.foldedComponentIds,c=e.shouldForwardProp,l=e.styledComponentId,h=e.target,f=function(e,t,n){void 0===e&&(e=z);var r=V({},t,{theme:e}),i={};return n.forEach((function(e){var t,n,a,o=e;for(t in W(o)&&(o=o(r)),o)r[t]=i[t]="className"===t?(n=i[t],a=o[t],n&&a?n+" "+a:n||a):o[t]})),[r,i]}(We(n,(0,t.useContext)(et),u)||z,n,a),d=f[0],p=f[1],v=function(e,t,n,r){var i=Pe(),a=Re();return t?e.generateAndInjectStyles(z,i,a):e.generateAndInjectStyles(n,i,a)}(o,i,d),y=r,m=p.$as||n.$as||p.as||n.as||h,g=Ye(m),k=p!==n?V({},n,{},p):n,w={};for(var b in k)"$"!==b[0]&&"as"!==b&&("forwardedAs"===b?w.as=k[b]:(c?c(b,U,m):!g||U(b))&&(w[b]=k[b]));return n.style&&p.style!==n.style&&(w.style=V({},n.style,{},p.style)),w.className=Array.prototype.concat(s,l,v!==l?v:null,n.className,p.className).filter(Boolean).join(" "),w.ref=y,(0,t.createElement)(m,w)}(v,e,n,m)};return g.displayName=h,(v=t.forwardRef(g)).attrs=d,v.componentStyle=y,v.displayName=h,v.shouldForwardProp=p,v.foldedComponentIds=i?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):q,v.styledComponentId=f,v.target=i?e.target:e,v.withComponent=function(e){var t=n.componentId,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["componentId"]),a=t&&t+"-"+(Ye(e)?e:Ge(K(e)));return nt(e,V({},i,{attrs:d,componentId:a}),r)},Object.defineProperty(v,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(t){this._foldedDefaultProps=i?Ze({},e.defaultProps,t):t}}),v.toString=function(){return"."+v.styledComponentId},a&&b()(v,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),v}var rt=function(e){return function e(t,n,r){if(void 0===r&&(r=z),!(0,P.isValidElementType)(n))return $(1,String(n));var i=function(){return t(n,r,ze.apply(void 0,arguments))};return i.withConfig=function(i){return e(t,n,V({},r,{},i))},i.attrs=function(i){return e(t,n,V({},r,{attrs:Array.prototype.concat(r.attrs,i).filter(Boolean)}))},i}(nt,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){rt[e]=rt(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=be(e),ve.registerId(this.componentId+1)}var t=e.prototype;t.createStyles=function(e,t,n,r){var i=r(Be(this.rules,t,n,r).join(""),""),a=this.componentId+e;n.insertRules(a,a,i)},t.removeStyles=function(e,t){t.clearRules(this.componentId+e)},t.renderStyles=function(e,t,n,r){e>2&&ve.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,r)}}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=se();return"<style "+[n&&'nonce="'+n+'"',G+'="true"','data-styled-version="5.3.5"'].filter(Boolean).join(" ")+">"+t+"</style>"},this.getStyleTags=function(){return e.sealed?$(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return $(2);var r=((n={})[G]="",n["data-styled-version"]="5.3.5",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),i=se();return i&&(r.nonce=i),[t.createElement("style",V({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new ve({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?$(2):t.createElement(De,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return $(3)}}();var it,at,ot,ut=rt,st=n(184),ct=ut.button(it||(it=u(["\n  width: 100%;\n  font-size: 1.2em;\n  border: none;\n  border-radius: 10px;\n"]))),lt=function(){var e=N();return(0,st.jsx)("div",{children:(0,st.jsx)(ct,{onClick:function(){e({type:"CHANGE_INPUT_VALUE",payload:void 0})},children:"logout"})})},ht=ut.div(at||(at=u(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 5%;\n  font-size: 1.5em;\n  color: white;\n  border-bottom: solid 1px #f2f2f2;\n  background: rgb(101, 96, 182);\n  background: linear-gradient(\n    90deg,\n    rgba(101, 96, 182, 1) 0%,\n    rgba(85, 223, 251, 1) 100%\n  );\n"]))),ft=ut.div(ot||(ot=u(["\n  font-size: 0.7em;\n"]))),dt=function(){var e=k((function(e){return e.user}));return(0,st.jsxs)(ht,{children:[(0,st.jsx)("div",{children:"Realtime Chat"}),void 0!==e&&(0,st.jsxs)(ft,{children:["Wellcome ",e," ",(0,st.jsx)(lt,{})]})]})};function pt(e){if(Array.isArray(e))return e}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yt(e,t){if(e){if("string"===typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}function mt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gt(e,t){return pt(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||yt(e,t)||mt()}function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function wt(){wt=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(S){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return E()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=w(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(S){return{type:"throw",arg:S}}}e.wrap=s;var l={};function h(){}function f(){}function d(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==kt(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function w(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=d,u(m,"constructor",d),u(d,"constructor",f),f.displayName=u(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),u(m,o,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function bt(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(si){return void n(si)}u.done?t(s):Promise.resolve(s).then(r,i)}function _t(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){bt(a,r,i,o,u,"next",e)}function u(e){bt(a,r,i,o,u,"throw",e)}o(void 0)}))}}function xt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(e,t){return It=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},It(e,t)}function Et(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&It(e,t)}function St(e){return St=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},St(e)}function Tt(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ct(e,t){if(t&&("object"===kt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xt(e)}function At(e){var t=Tt();return function(){var n,r=St(e);if(t){var i=St(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ct(this,n)}}function Nt(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Pt(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||Nt(e)||yt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=yt(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t,n){return t&&Ot(e.prototype,t),n&&Ot(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mt(e,t,n){return Mt=Tt()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&It(i,n.prototype),i},Mt.apply(null,arguments)}function Ft(e){var t="function"===typeof Map?new Map:void 0;return Ft=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return Mt(e,arguments,St(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),It(n,e)},Ft(e)}var Ut=!1,Vt=!1,jt="${JSCORE_VERSION}",Bt=function(e,t){if(!e)throw qt(t)},qt=function(e){return new Error("Firebase Database ("+jt+") INTERNAL ASSERT FAILED: "+e)},zt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Wt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(zt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Kt=function(e){var t=zt(e);return Wt.encodeByteArray(t,!0)},Ht=function(e){return Kt(e).replace(/\./g,"")},Gt=function(e){try{return Wt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Qt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Qt(e[n],t[n]));return e}var Yt=function(){function e(){var t=this;Dt(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return Lt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function $t(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ht(JSON.stringify({alg:"none",type:"JWT"})),Ht(JSON.stringify(a)),""].join(".")}function Jt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Xt(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jt())}function Zt(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function en(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function tn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function nn(){var e=Jt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function rn(){return!0===Ut||!0===Vt}function an(){return"object"===typeof indexedDB}var on=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(xt(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(xt(a),un.prototype.create),a}return Lt(n)}(Ft(Error)),un=function(){function e(t,n,r){Dt(this,e),this.service=t,this.serviceName=n,this.errors=r}return Lt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?sn(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new on(n,a,t);return o}}]),e}();function sn(e,t){return e.replace(cn,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var cn=/\{\$([^}]+)}/g;function ln(e){return JSON.parse(e)}function hn(e){return JSON.stringify(e)}var fn=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ln(Gt(a[0])||""),n=ln(Gt(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function dn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function pn(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function vn(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function yn(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function mn(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(gn(u)&&gn(s)){if(!mn(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function gn(e){return null!==e&&"object"===typeof e}function kn(e){for(var t=[],n=function(){var e=gt(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function wn(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=gt(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function bn(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var _n=function(){function e(){Dt(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return Lt(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function xn(e,t){var n=new In(e,t);return n.subscribe.bind(n)}var In=function(){function e(t,n){var r=this;Dt(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return Lt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=Rt(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=En),void 0===r.error&&(r.error=En),void 0===r.complete&&(r.complete=En);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function En(){}function Sn(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Tn=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Cn(e){return e&&e._delegate?e._delegate:e}var An=function(){function e(t,n,r){Dt(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Lt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Nn="[DEFAULT]",Pn=function(){function e(t,n){Dt(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return Lt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new Yt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Nn})}catch(s){}var t,n=Rt(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=gt(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(Pt(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),Pt(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=Rt(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=gt(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=Rt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Nn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn;return this.component?this.component.multipleInstances?e:Nn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Rn,Dn,On=function(){function e(t){Dt(this,e),this.name=t,this.providers=new Map}return Lt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Pn(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ln=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Dn||(Dn={}));var Mn={debug:Dn.DEBUG,verbose:Dn.VERBOSE,info:Dn.INFO,warn:Dn.WARN,error:Dn.ERROR,silent:Dn.SILENT},Fn=Dn.INFO,Un=(i(Rn={},Dn.DEBUG,"log"),i(Rn,Dn.VERBOSE,"log"),i(Rn,Dn.INFO,"info"),i(Rn,Dn.WARN,"warn"),i(Rn,Dn.ERROR,"error"),Rn),Vn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Un[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},jn=function(){function e(t){Dt(this,e),this.name=t,this._logLevel=Fn,this._logHandler=Vn,this._userLogHandler=null,Ln.push(this)}return Lt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Dn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Mn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dn.DEBUG].concat(t)),this._logHandler.apply(this,[this,Dn.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dn.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Dn.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dn.INFO].concat(t)),this._logHandler.apply(this,[this,Dn.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dn.WARN].concat(t)),this._logHandler.apply(this,[this,Dn.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Dn.ERROR].concat(t)),this._logHandler.apply(this,[this,Dn.ERROR].concat(t))}}]),e}();var Bn,qn;var zn=new WeakMap,Wn=new WeakMap,Kn=new WeakMap,Hn=new WeakMap,Gn=new WeakMap;var Qn={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Wn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Kn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Yn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(qn||(qn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Xn(this),n),Jn(zn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Jn(e.apply(Xn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Xn(this),t].concat(r));return Kn.set(a,t.sort?t.sort():[t]),Jn(a)}}function $n(e){return"function"===typeof e?Yn(e):(e instanceof IDBTransaction&&function(e){if(!Wn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Wn.set(e,t)}}(e),t=e,(Bn||(Bn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Qn):e);var t}function Jn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Jn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&zn.set(t,e)})).catch((function(){})),Gn.set(t,e),t}(e);if(Hn.has(e))return Hn.get(e);var t=$n(e);return t!==e&&(Hn.set(e,t),Gn.set(t,e)),t}var Xn=function(e){return Gn.get(e)};var Zn,er,tr=["get","getKey","getAll","getAllKeys","count"],nr=["put","add","delete","clear"],rr=new Map;function ir(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(rr.get(t))return rr.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=nr.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||tr.includes(n))){var a=function(){var e=_t(wt().mark((function e(t){var a,o,u,s,c,l,h=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return rr.set(t,a),a}}}Qn=function(e){return o(o({},e),{},{get:function(t,n,r){return ir(t,n)||e.get(t,n,r)},has:function(t,n){return!!ir(t,n)||e.has(t,n)}})}(Qn);var ar=function(){function e(t){Dt(this,e),this.container=t}return Lt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var or="@firebase/app",ur="0.7.30",sr=new jn("@firebase/app"),cr="[DEFAULT]",lr=(i(Zn={},or,"fire-core"),i(Zn,"@firebase/app-compat","fire-core-compat"),i(Zn,"@firebase/analytics","fire-analytics"),i(Zn,"@firebase/analytics-compat","fire-analytics-compat"),i(Zn,"@firebase/app-check","fire-app-check"),i(Zn,"@firebase/app-check-compat","fire-app-check-compat"),i(Zn,"@firebase/auth","fire-auth"),i(Zn,"@firebase/auth-compat","fire-auth-compat"),i(Zn,"@firebase/database","fire-rtdb"),i(Zn,"@firebase/database-compat","fire-rtdb-compat"),i(Zn,"@firebase/functions","fire-fn"),i(Zn,"@firebase/functions-compat","fire-fn-compat"),i(Zn,"@firebase/installations","fire-iid"),i(Zn,"@firebase/installations-compat","fire-iid-compat"),i(Zn,"@firebase/messaging","fire-fcm"),i(Zn,"@firebase/messaging-compat","fire-fcm-compat"),i(Zn,"@firebase/performance","fire-perf"),i(Zn,"@firebase/performance-compat","fire-perf-compat"),i(Zn,"@firebase/remote-config","fire-rc"),i(Zn,"@firebase/remote-config-compat","fire-rc-compat"),i(Zn,"@firebase/storage","fire-gcs"),i(Zn,"@firebase/storage-compat","fire-gcs-compat"),i(Zn,"@firebase/firestore","fire-fst"),i(Zn,"@firebase/firestore-compat","fire-fst-compat"),i(Zn,"fire-js","fire-js"),i(Zn,"firebase","fire-js-all"),Zn),hr=new Map,fr=new Map;function dr(e,t){try{e.container.addComponent(t)}catch(n){sr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function pr(e,t){e.container.addOrOverwriteComponent(t)}function vr(e){var t=e.name;if(fr.has(t))return sr.debug("There were multiple attempts to register component ".concat(t,".")),!1;fr.set(t,e);var n,r=Rt(hr.values());try{for(r.s();!(n=r.n()).done;){dr(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function yr(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function mr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cr;yr(e,t).clearInstance(n)}function gr(){fr.clear()}var kr=(i(er={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(er,"bad-app-name","Illegal App name: '{$appName}"),i(er,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),i(er,"app-deleted","Firebase App named '{$appName}' already deleted"),i(er,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),i(er,"invalid-log-argument","First argument to `onLog` must be null or a function."),i(er,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),i(er,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),i(er,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),i(er,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),er),wr=new un("app","Firebase",kr),br=function(){function e(t,n,r){var i=this;Dt(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new An("app",(function(){return i}),"PUBLIC"))}return Lt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}]),e}(),_r="9.9.2";function xr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:cr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw wr.create("bad-app-name",{appName:String(i)});var a=hr.get(i);if(a){if(mn(e,a.options)&&mn(r,a.config))return a;throw wr.create("duplicate-app",{appName:i})}var o,u=new On(i),s=Rt(fr.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(h){s.e(h)}finally{s.f()}var l=new br(e,r,u);return hr.set(i,l),l}function Ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cr,t=hr.get(e);if(!t)throw wr.create("no-app",{appName:e});return t}function Er(){return Array.from(hr.values())}function Sr(e){return Tr.apply(this,arguments)}function Tr(){return(Tr=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!hr.has(n)){e.next=6;break}return hr.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(e,t,n){var r,i=null!==(r=lr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void sr.warn(u.join(" "))}vr(new An("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ar(e,t){if(null!==e&&"function"!==typeof e)throw wr.create("invalid-log-argument");!function(e,t){var n,r=Rt(Ln);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Mn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Dn[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Nr(e){var t;t=e,Ln.forEach((function(e){e.setLogLevel(t)}))}var Pr="firebase-heartbeat-store",Rr=null;function Dr(){return Rr||(Rr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Jn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Jn(u.result),e.oldVersion,e.newVersion,Jn(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Pr)}}).catch((function(e){throw wr.create("idb-open",{originalErrorMessage:e.message})}))),Rr}function Or(e){return Lr.apply(this,arguments)}function Lr(){return Lr=_t(wt().mark((function e(t){var n,r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dr();case 3:return r=e.sent,e.abrupt("return",r.transaction(Pr).objectStore(Pr).get(Ur(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof on?sr.warn(e.t0.message):(i=wr.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),sr.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Lr.apply(this,arguments)}function Mr(e,t){return Fr.apply(this,arguments)}function Fr(){return Fr=_t(wt().mark((function e(t,n){var r,i,a,o,u;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dr();case 3:return i=e.sent,a=i.transaction(Pr,"readwrite"),o=a.objectStore(Pr),e.next=8,o.put(n,Ur(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof on?sr.warn(e.t0.message):(u=wr.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),sr.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Fr.apply(this,arguments)}function Ur(e){return"".concat(e.name,"!").concat(e.options.appId)}var Vr=function(){function e(t){var n=this;Dt(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new zr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return Lt(e,[{key:"triggerHeartbeat",value:function(){var e=_t(wt().mark((function e(){var t,n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=jr(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=_t(wt().mark((function e(){var t,n,r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=jr(),n=Br(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Ht(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function jr(){return(new Date).toISOString().substring(0,10)}function Br(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=Rt(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Wr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Wr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var qr,zr=function(){function e(t){Dt(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return Lt(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(an()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(si){t(si)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Or(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Mr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(Pt(r.heartbeats),Pt(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Wr(e){return Ht(JSON.stringify({version:2,heartbeats:e})).length}qr="",vr(new An("platform-logger",(function(e){return new ar(e)}),"PRIVATE")),vr(new An("heartbeat",(function(e){return new Vr(e)}),"PRIVATE")),Cr(or,ur,qr),Cr(or,ur,"esm2017"),Cr("fire-js","");var Kr="@firebase/database",Hr="0.13.4",Gr="";var Qr=function(){function e(t){Dt(this,e),this.domStorage_=t,this.prefix_="firebase:"}return Lt(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),hn(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ln(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),Yr=function(){function e(){Dt(this,e),this.cache_={},this.isInMemoryStorage=!0}return Lt(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return dn(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),$r=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Qr(t)}}catch(n){}return new Yr},Jr=$r("localStorage"),Xr=$r("sessionStorage"),Zr=new jn("@firebase/database"),ei=function(){var e=1;return function(){return e++}}(),ti=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Bt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new _n;n.update(t);var r=n.digest();return Wt.encodeByteArray(r)},ni=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?hn(r):r,t+=" "}return t},ri=null,ii=!0,ai=function(e,t){Bt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Zr.logLevel=Dn.VERBOSE,ri=Zr.log.bind(Zr),t&&Xr.set("logging_enabled",!0)):"function"===typeof e?ri=e:(ri=null,Xr.remove("logging_enabled"))},oi=function(){if(!0===ii&&(ii=!1,null===ri&&!0===Xr.get("logging_enabled")&&ai(!0)),ri){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=ni.apply(null,t);ri(r)}},ui=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];oi.apply(void 0,[e].concat(n))}},si=function(){var e="FIREBASE INTERNAL ERROR: "+ni.apply(void 0,arguments);Zr.error(e)},ci=function(){var e="FIREBASE FATAL ERROR: ".concat(ni.apply(void 0,arguments));throw Zr.error(e),new Error(e)},li=function(){var e="FIREBASE WARNING: "+ni.apply(void 0,arguments);Zr.warn(e)},hi=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},fi="[MIN_NAME]",di="[MAX_NAME]",pi=function(e,t){if(e===t)return 0;if(e===fi||t===di)return-1;if(t===fi||e===di)return 1;var n=Ii(e),r=Ii(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},vi=function(e,t){return e===t?0:e<t?-1:1},yi=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+hn(t))},mi=function e(t){if("object"!==typeof t||null===t)return hn(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=hn(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},gi=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ki(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var wi=function(e){Bt(!hi(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var bi=new RegExp("^-?(0*)\\d{1,10}$"),_i=-2147483648,xi=2147483647,Ii=function(e){if(bi.test(e)){var t=Number(e);if(t>=_i&&t<=xi)return t}return null},Ei=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw li("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Si=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},Ti=function(){function e(t,n){var r=this;Dt(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return Lt(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){li('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),Ci=function(){function e(t,n,r){var i=this;Dt(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return Lt(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(oi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',li(e)}}]),e}(),Ai=function(){function e(t){Dt(this,e),this.accessToken=t}return Lt(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Ai.OWNER="owner";var Ni="5",Pi=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ri="websocket",Di="long_polling",Oi=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];Dt(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Jr.get("host:"+t)||this._host}return Lt(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Jr.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Li(e,t,n){var r;if(Bt("string"===typeof t,"typeof type must == string"),Bt("object"===typeof n,"typeof params must == object"),t===Ri)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Di)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return ki(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Mi=function(){function e(){Dt(this,e),this.counters_={}}return Lt(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;dn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Qt(void 0,this.counters_)}}]),e}(),Fi={},Ui={};function Vi(e){var t=e.toString();return Fi[t]||(Fi[t]=new Mi),Fi[t]}var ji=function(){function e(t){Dt(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return Lt(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Ei((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Bi="start",qi="close",zi=function(){function e(t,n,r,i,a,o,u){var s=this;Dt(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ui(t),this.stats_=Vi(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),Li(n,Di,e)}}return Lt(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ji(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(rn()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Wi((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Bi)n.id=a,n.password=o;else{if(i!==qi)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Ni,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Pi.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=hn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Kt(t),r=gi(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!rn()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=hn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!rn()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Wi=function(){function e(t,n,r,i){if(Dt(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,rn())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=ei(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){oi("frame writing exception"),u.stack&&oi(u.stack),oi(u)}}}return Lt(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;rn()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){oi("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||oi("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Ki=null;"undefined"!==typeof MozWebSocket?Ki=MozWebSocket:"undefined"!==typeof WebSocket&&(Ki=WebSocket);var Hi=function(){function e(t,n,r,i,a,o,u){Dt(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ui(this.connId),this.stats_=Vi(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return Lt(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Jr.set("previous_websocket_failure",!0);try{var r;if(rn()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Ni,"/").concat(Gr,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Ki(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Jr.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ln(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Bt(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=hn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=gi(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Ni,!rn()&&"undefined"!==typeof location&&location.hostname&&Pi.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),Li(e,Ri,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Ki&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Jr.isInMemoryStorage||!0===Jr.get("previous_websocket_failure")}}]),e}();Hi.responsesRequiredToBeHealthy=2,Hi.healthyTimeout=3e4;var Gi=function(){function e(t){Dt(this,e),this.initTransports_(t)}return Lt(e,[{key:"initTransports_",value:function(t){var n=Hi&&Hi.isAvailable(),r=n&&!Hi.previouslyFailed();if(t.webSocketOnly&&(n||li("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Hi];else{var i,a=this.transports_=[],o=Rt(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[zi,Hi]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Gi.globalTransportInitialized_=!1;var Qi=function(){function e(t,n,r,i,a,o,u,s,c,l){Dt(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ui("c:"+this.id+":"),this.transportManager_=new Gi(n),this.log_("Connection created"),this.start_()}return Lt(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Si((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=yi("t",e),n=yi("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=yi("t",e),n=yi("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=yi("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?si("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):si("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Ni!==n&&li("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Si((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Si((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Jr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),Yi=function(){function e(){Dt(this,e)}return Lt(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),$i=function(){function e(t){Dt(this,e),this.allowedEvents_=t,this.listeners_={},Bt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return Lt(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=Pt(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Bt(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Ji=function(e){Et(n,e);var t=At(n);function n(){var e;return Dt(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Xt()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Lt(n,[{key:"getInitialEvent",value:function(e){return Bt("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}($i),Xi=function(){function e(t,n){if(Dt(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Lt(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Zi(){return new Xi("")}function ea(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ta(e){return e.pieces_.length-e.pieceNum_}function na(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Xi(e.pieces_,t)}function ra(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ia(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function aa(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Xi(t,0)}function oa(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Xi)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Xi(n,0)}function ua(e){return e.pieceNum_>=e.pieces_.length}function sa(e,t){var n=ea(e),r=ea(t);if(null===n)return t;if(n===r)return sa(na(e),na(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ca(e,t){if(ta(e)!==ta(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function la(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(ta(e)>ta(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var ha=Lt((function e(t,n){Dt(this,e),this.errorPrefix_=n,this.parts_=ia(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Tn(this.parts_[r]);fa(this)}));function fa(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+da(e))}function da(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var pa=function(e){Et(n,e);var t=At(n);function n(){var e,r,i;return Dt(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return Lt(n,[{key:"getInitialEvent",value:function(e){return Bt("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}($i),va=1e3,ya=function(e){Et(n,e);var t=At(n);function n(e,r,i,a,o,u,s,c){var l;if(Dt(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=ui("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=va,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!rn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return pa.getInstance().on("visible",l.onVisible_,xt(l)),-1===e.host.indexOf("fblocal")&&Ji.getInstance().on("online",l.onOnline_,xt(l)),l}return Lt(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(hn(i)),Bt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new Yt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Bt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Bt(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=fn(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=fn(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Bt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+hn(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):si("Unrecognized action received from server: "+hn(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Bt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=va,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=va,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=va),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=_t(wt().mark((function e(){var t,r,i,a,o,u,s,c,l,h,f,d,p,v,y=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){Bt(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:f=e.sent,d=gt(f,2),p=d[0],v=d[1],u?oi("getToken() completed but was canceled"):(oi("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,s=new Qi(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){li(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&li(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){oi("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){oi("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vn(this.interruptReasons_)&&(this.reconnectDelay_=va,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return mi(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Xi(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){oi("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){oi("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=Rt(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=Rt(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";rn()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Gr.replace(/\./g,"-")]=1,Xt()?e["framework.cordova"]=1:tn()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Ji.getInstance().currentlyOnline();return vn(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&dn(e,"w")){var n=pn(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();li("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(Yi);ya.nextPersistentConnectionId_=0,ya.nextConnectionId_=0;var ma,ga=function(){function e(t,n){Dt(this,e),this.name=t,this.node=n}return Lt(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),ka=function(){function e(){Dt(this,e)}return Lt(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new ga(fi,e),r=new ga(fi,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return ga.MIN}}]),e}(),wa=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"compare",value:function(e,t){return pi(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw qt("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return ga.MIN}},{key:"maxPost",value:function(){return new ga(di,ma)}},{key:"makePost",value:function(e,t){return Bt("string"===typeof e,"KeyIndex indexValue must always be a string."),new ga(e,ma)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return ma},set:function(e){ma=e}}]),n}(ka),ba=new wa,_a=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;Dt(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return Lt(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),xa=function(){function e(t,n,r,i,a){Dt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Sa.EMPTY_NODE,this.right=null!=a?a:Sa.EMPTY_NODE}return Lt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Sa.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Sa.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();xa.RED=!0,xa.BLACK=!1;var Ia,Ea=function(){function e(){Dt(this,e)}return Lt(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new xa(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Sa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;Dt(this,e),this.comparator_=t,this.root_=n}return Lt(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,xa.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,xa.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new _a(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new _a(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new _a(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new _a(this.root_,null,this.comparator_,!0,e)}}]),e}();function Ta(e,t){return pi(e.name,t.name)}function Ca(e,t){return pi(e,t)}Sa.EMPTY_NODE=new Ea;var Aa,Na,Pa,Ra=function(e){return"number"===typeof e?"number:"+wi(e):"string:"+e},Da=function(e){if(e.isLeafNode()){var t=e.val();Bt("string"===typeof t||"number"===typeof t||"object"===typeof t&&dn(t,".sv"),"Priority must be a string or number.")}else Bt(e===Ia||e.isEmpty(),"priority of unexpected type.");Bt(e===Ia||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Oa=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;Dt(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Bt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Da(this.priorityNode_)}return Lt(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return ua(t)?this:".priority"===ea(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=ea(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Bt(".priority"!==r||1===ta(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(na(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ra(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?wi(this.value_):this.value_,this.lazyHash_=ti(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Bt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Bt(i>=0,"Unknown leaf type: "+n),Bt(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Aa},set:function(e){Aa=e}}]),e}();Oa.VALUE_TYPE_ORDER=["object","boolean","number","string"];var La,Ma,Fa=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?pi(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return ga.MIN}},{key:"maxPost",value:function(){return new ga(di,new Oa("[PRIORITY-POST]",Pa))}},{key:"makePost",value:function(e,t){var n=Na(e);return new ga(t,new Oa("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(ka),Ua=new Fa,Va=Math.log(2),ja=function(){function e(t){Dt(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Va,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return Lt(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Ba=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new xa(o,a.node,xa.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new xa(o,a.node,xa.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new xa(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,xa.BLACK):(u(h,xa.BLACK),u(h,xa.RED))}return a}(new ja(e.length));return new Sa(r||t,a)},qa={},za=function(){function e(t,n){Dt(this,e),this.indexes_=t,this.indexSet_=n}return Lt(e,[{key:"get",value:function(e){var t=pn(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Sa?t:null}},{key:"hasIndex",value:function(e){return dn(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Bt(t!==ba,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(ga.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?Ba(i,t.getCompare()):qa;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(yn(this.indexes_,(function(e,i){var a=pn(r.indexSet_,i);if(Bt(a,"Missing index implementation for "+i),e===qa){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(ga.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),Ba(o,a.getCompare())}return qa}var c=n.get(t.name),l=e;return c&&(l=l.remove(new ga(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(yn(this.indexes_,(function(e){if(e===qa)return e;var r=n.get(t.name);return r?e.remove(new ga(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Bt(qa&&Ua,"ChildrenNode.ts has not been loaded"),La=La||new e({".priority":qa},{".priority":Ua})}}]),e}(),Wa=function(){function e(t,n,r){Dt(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Da(this.priorityNode_),this.children_.isEmpty()&&Bt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Lt(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Ma}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Ma:t}},{key:"getChild",value:function(e){var t=ea(e);return null===t?this:this.getImmediateChild(t).getChild(na(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Bt(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new ga(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Ma:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=ea(e);if(null===n)return t;Bt(".priority"!==ea(e)||1===ta(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(na(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Ua,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Ra(this.getPriority().val())+":"),this.forEachChild(Ua,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ti(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new ga(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new ga(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new ga(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,ga.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,ga.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ka?-1:0}},{key:"withIndex",value:function(t){if(t===ba||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===ba||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Ua),r=t.getIterator(Ua),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===ba?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Ma||(Ma=new e(new Sa(Ca),null,za.Default))}}]),e}();Wa.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var Ka=new(function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.call(this,new Sa(Ca),Wa.EMPTY_NODE,za.Default)}return Lt(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Wa.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Wa));Object.defineProperties(ga,{MIN:{value:new ga(fi,Wa.EMPTY_NODE)},MAX:{value:new ga(di,Ka)}}),wa.__EMPTY_NODE=Wa.EMPTY_NODE,Oa.__childrenNodeConstructor=Wa,Ia=Ka,function(e){Pa=e}(Ka);function Ha(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Wa.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Bt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Oa(n,Ha(t))}if(e instanceof Array){var r=Wa.EMPTY_NODE;return ki(e,(function(t,n){if(dn(e,t)&&"."!==t.substring(0,1)){var i=Ha(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Ha(t))}var i=[],a=!1,o=e;if(ki(o,(function(e,t){if("."!==e.substring(0,1)){var n=Ha(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new ga(e,n)))}})),0===i.length)return Wa.EMPTY_NODE;var u=Ba(i,Ta,(function(e){return e.name}),Ca);if(a){var s=Ba(i,Ua.getCompare());return new Wa(u,Ha(t),new za({".priority":s},{".priority":Ua}))}return new Wa(u,Ha(t),za.Default)}!function(e){Na=e}(Ha);var Ga=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this)).indexPath_=e,Bt(!ua(e)&&".priority"!==ea(e),"Can't create PathIndex with empty path or .priority key"),r}return Lt(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?pi(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Ha(e),r=Wa.EMPTY_NODE.updateChild(this.indexPath_,n);return new ga(t,r)}},{key:"maxPost",value:function(){var e=Wa.EMPTY_NODE.updateChild(this.indexPath_,Ka);return new ga(di,e)}},{key:"toString",value:function(){return ia(this.indexPath_,0).join("/")}}]),n}(ka),Qa=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?pi(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return ga.MIN}},{key:"maxPost",value:function(){return ga.MAX}},{key:"makePost",value:function(e,t){var n=Ha(e);return new ga(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(ka),Ya=new Qa,$a="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function Ja(e){return{type:"value",snapshotNode:e}}function Xa(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Za(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function eo(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var to=function(){function e(t){Dt(this,e),this.index_=t}return Lt(e,[{key:"updateChild",value:function(e,t,n,r,i,a){Bt(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Za(t,o)):Bt(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Xa(t,n)):a.trackChildChange(eo(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ua,(function(e,r){t.hasChild(e)||n.trackChildChange(Za(e,r))})),t.isLeafNode()||t.forEachChild(Ua,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(eo(t,r,i))}else n.trackChildChange(Xa(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Wa.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),no=function(){function e(t){Dt(this,e),this.indexedFilter_=new to(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return Lt(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new ga(t,n))||(n=Wa.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Wa.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Wa.EMPTY_NODE);var i=this;return t.forEachChild(Ua,(function(e,t){i.matches(new ga(e,t))||(r=r.updateImmediateChild(e,Wa.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),ro=function(){function e(t){Dt(this,e),this.rangedFilter_=new no(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return Lt(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new ga(t,n))||(n=Wa.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Wa.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Wa.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(Wa.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,s)<=0?f++:r=r.updateImmediateChild(p.name,Wa.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;Bt(u.numChildren()===this.limit_,"");var s=new ga(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(eo(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Za(t,h));var p=u.updateImmediateChild(t,Wa.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Xa(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(Za(c.name,c.node)),i.trackChildChange(Xa(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,Wa.EMPTY_NODE)):e}}]),e}(),io=function(){function e(){Dt(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ua}return Lt(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Bt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Bt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fi}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Bt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Bt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:di}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Bt(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Ua}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function ao(e){var t,n={};return e.isDefault()||(e.index_===Ua?t="$priority":e.index_===Ya?t="$value":e.index_===ba?t="$key":(Bt(e.index_ instanceof Ga,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=hn(t),e.startSet_&&(n.startAt=hn(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+hn(e.indexStartName_))),e.endSet_&&(n.endAt=hn(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+hn(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function oo(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ua&&(t.i=e.index_.toString()),t}var uo=function(e){Et(n,e);var t=At(n);function n(e,r,i,a){var o;return Dt(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=ui("p:rest:"),o.listens_={},o}return Lt(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=ao(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),pn(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=ao(e._queryParams),r=e._path.toString(),i=new Yt;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=gt(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+kn(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ln(c.responseText)}catch(n){li("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&li("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Bt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(Yi),so=function(){function e(){Dt(this,e),this.rootNode_=Wa.EMPTY_NODE}return Lt(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function co(){return{value:null,children:new Map}}function lo(e,t,n){if(ua(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ea(t);e.children.has(r)||e.children.set(r,co()),lo(e.children.get(r),t=na(t),n)}}function ho(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){ho(r,new Xi(t.toString()+"/"+e),n)}))}var fo,po=function(){function e(t){Dt(this,e),this.collection_=t,this.last_=null}return Lt(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ki(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),vo=function(){function e(t,n){Dt(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new po(t);var r=1e4+2e4*Math.random();Si(this.reportStats_.bind(this),Math.floor(r))}return Lt(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;ki(t,(function(t,i){i>0&&dn(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Si(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function yo(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(fo||(fo={}));var mo,go=function(){function e(t,n,r){Dt(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=fo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return Lt(e,[{key:"operationForChild",value:function(t){if(ua(this.path)){if(null!=this.affectedTree.value)return Bt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Xi(t));return new e(Zi(),n,this.revert)}return Bt(ea(this.path)===t,"operationForChild called for unrelated child."),new e(na(this.path),this.affectedTree,this.revert)}}]),e}(),ko=function(){function e(t,n){Dt(this,e),this.source=t,this.path=n,this.type=fo.LISTEN_COMPLETE}return Lt(e,[{key:"operationForChild",value:function(t){return ua(this.path)?new e(this.source,Zi()):new e(this.source,na(this.path))}}]),e}(),wo=function(){function e(t,n,r){Dt(this,e),this.source=t,this.path=n,this.snap=r,this.type=fo.OVERWRITE}return Lt(e,[{key:"operationForChild",value:function(t){return ua(this.path)?new e(this.source,Zi(),this.snap.getImmediateChild(t)):new e(this.source,na(this.path),this.snap)}}]),e}(),bo=function(){function e(t,n,r){Dt(this,e),this.source=t,this.path=n,this.children=r,this.type=fo.MERGE}return Lt(e,[{key:"operationForChild",value:function(t){if(ua(this.path)){var n=this.children.subtree(new Xi(t));return n.isEmpty()?null:n.value?new wo(this.source,Zi(),n.value):new e(this.source,Zi(),n)}return Bt(ea(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,na(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),_o=function(){function e(t,n,r){Dt(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return Lt(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(ua(e))return this.isFullyInitialized()&&!this.filtered_;var t=ea(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),xo=Lt((function e(t){Dt(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Io(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw qt("Should only compare child_ events.");var r=new ga(t.childName,t.snapshotNode),i=new ga(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Eo(e,t){return{eventCache:e,serverCache:t}}function So(e,t,n,r){return Eo(new _o(t,n,r),e.serverCache)}function To(e,t,n,r){return Eo(e.eventCache,new _o(t,n,r))}function Co(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ao(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var No=function(){return mo||(mo=new Sa(vi)),mo},Po=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:No();Dt(this,e),this.value=t,this.children=n}return Lt(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Zi(),value:this.value};if(ua(e))return null;var n=ea(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(na(e),t);return null!=i?{path:oa(new Xi(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(ua(t))return this;var n=ea(t),r=this.children.get(n);return null!==r?r.subtree(na(t)):new e(null)}},{key:"set",value:function(t,n){if(ua(t))return new e(n,this.children);var r=ea(t),i=(this.children.get(r)||new e(null)).set(na(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(ua(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ea(t),r=this.children.get(n);if(r){var i,a=r.remove(na(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(ua(e))return this.value;var t=ea(e),n=this.children.get(t);return n?n.get(na(e)):null}},{key:"setTree",value:function(t,n){if(ua(t))return n;var r,i=ea(t),a=(this.children.get(i)||new e(null)).setTree(na(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Zi(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(oa(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Zi(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ua(e))return null;var i=ea(e),a=this.children.get(i);return a?a.findOnPath_(na(e),oa(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Zi(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(ua(t))return this;this.value&&r(n,this.value);var i=ea(t),a=this.children.get(i);return a?a.foreachOnPath_(na(t),oa(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Zi(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(oa(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return ki(t,(function(e,t){n=n.set(new Xi(e),t)})),n}}]),e}(),Ro=function(){function e(t){Dt(this,e),this.writeTree_=t}return Lt(e,null,[{key:"empty",value:function(){return new e(new Po(null))}}]),e}();function Do(e,t,n){if(ua(t))return new Ro(new Po(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=sa(i,t);return a=a.updateChild(o,n),new Ro(e.writeTree_.set(i,a))}var u=new Po(n),s=e.writeTree_.setTree(t,u);return new Ro(s)}function Oo(e,t,n){var r=e;return ki(n,(function(e,n){r=Do(r,oa(t,e),n)})),r}function Lo(e,t){if(ua(t))return Ro.empty();var n=e.writeTree_.setTree(t,new Po(null));return new Ro(n)}function Mo(e,t){return null!=Fo(e,t)}function Fo(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(sa(n.path,t)):null}function Uo(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ua,(function(e,n){t.push(new ga(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new ga(e,n.value))})),t}function Vo(e,t){if(ua(t))return e;var n=Fo(e,t);return new Ro(null!=n?new Po(n):e.writeTree_.subtree(t))}function jo(e){return e.writeTree_.isEmpty()}function Bo(e,t){return qo(Zi(),e.writeTree_,t)}function qo(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Bt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=qo(oa(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(oa(e,".priority"),r)),n}function zo(e,t){return ru(t,e)}function Wo(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Ko(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Bt(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&Ho(u,r.path)?i=!1:la(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Qo(e.allWrites,Go,Zi()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Lo(e.visibleWrites,r.path):ki(r.children,(function(t){e.visibleWrites=Lo(e.visibleWrites,oa(r.path,t))}));return!0}return!1}function Ho(e,t){if(e.snap)return la(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&la(oa(e.path,n),t))return!0;return!1}function Go(e){return e.visible}function Qo(e,t,n){for(var r=Ro.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)la(n,o)?r=Do(r,u=sa(n,o),a.snap):la(o,n)&&(u=sa(o,n),r=Do(r,Zi(),a.snap.getChild(u)));else{if(!a.children)throw qt("WriteRecord should have .snap or .children");if(la(n,o))r=Oo(r,u=sa(n,o),a.children);else if(la(o,n))if(ua(u=sa(o,n)))r=Oo(r,Zi(),a.children);else{var s=pn(a.children,ea(u));if(s){var c=s.getChild(na(u));r=Do(r,Zi(),c)}}}}}return r}function Yo(e,t,n,r,i){if(r||i){var a=Vo(e.visibleWrites,t);if(!i&&jo(a))return n;if(i||null!=n||Mo(a,Zi())){return Bo(Qo(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(la(e.path,t)||la(t,e.path))}),t),n||Wa.EMPTY_NODE)}return null}var o=Fo(e.visibleWrites,t);if(null!=o)return o;var u=Vo(e.visibleWrites,t);return jo(u)?n:null!=n||Mo(u,Zi())?Bo(u,n||Wa.EMPTY_NODE):null}function $o(e,t,n,r){return Yo(e.writeTree,e.treePath,t,n,r)}function Jo(e,t){return function(e,t,n){var r=Wa.EMPTY_NODE,i=Fo(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ua,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=Vo(e.visibleWrites,t);return n.forEachChild(Ua,(function(e,t){var n=Bo(Vo(a,new Xi(e)),t);r=r.updateImmediateChild(e,n)})),Uo(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Uo(Vo(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Xo(e,t,n,r){return function(e,t,n,r,i){Bt(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=oa(t,n);if(Mo(e.visibleWrites,a))return null;var o=Vo(e.visibleWrites,a);return jo(o)?i.getChild(n):Bo(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Zo(e,t){return function(e,t){return Fo(e.visibleWrites,t)}(e.writeTree,oa(e.treePath,t))}function eu(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=Vo(e.visibleWrites,t),c=Fo(s,Zi());if(null!=c)u=c;else{if(null==n)return[];u=Bo(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function tu(e,t,n){return function(e,t,n,r){var i=oa(t,n),a=Fo(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?Bo(Vo(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function nu(e,t){return ru(oa(e.treePath,t),e.writeTree)}function ru(e,t){return{treePath:e,writeTree:t}}var iu=function(){function e(){Dt(this,e),this.changeMap=new Map}return Lt(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Bt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Bt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,eo(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Za(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Xa(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw qt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,eo(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),au=new(function(){function e(){Dt(this,e)}return Lt(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),ou=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Dt(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return Lt(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new _o(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return tu(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ao(this.viewCache_),i=eu(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function uu(e,t,n,r,i){var a,o,u=new iu;if(n.type===fo.OVERWRITE){var s=n;s.source.fromUser?a=lu(e,t,s.path,s.snap,r,i,u):(Bt(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!ua(s.path),a=cu(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===fo.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=oa(n,r);hu(t,ea(c))&&(u=lu(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=oa(n,r);hu(t,ea(c))||(u=lu(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Bt(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=du(e,t,c.path,c.children,r,i,o,u))}else if(n.type===fo.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Zo(r,n))return t;var u,s=new ou(r,t,i),c=t.eventCache.getNode();if(ua(n)||".priority"===ea(n)){var l;if(t.serverCache.isFullyInitialized())l=$o(r,Ao(t));else{var h=t.serverCache.getNode();Bt(h instanceof Wa,"serverChildren would be complete if leaf node"),l=Jo(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=ea(n),d=tu(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,na(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Wa.EMPTY_NODE,na(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=$o(r,Ao(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Zo(r,Zi()),So(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=Zo(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(ua(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return cu(e,t,n,s.getNode().getChild(n),i,a,u,o);if(ua(n)){var c=new Po(null);return s.getNode().forEachChild(ba,(function(e,t){c=c.set(new Xi(e),t)})),du(e,t,n,c,i,a,u,o)}return t}var l=new Po(null);return r.foreach((function(e,t){var r=oa(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),du(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==fo.LISTEN_COMPLETE)throw qt("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=To(t,a.getNode(),a.isFullyInitialized()||ua(n),a.isFiltered());return su(e,o,n,r,au,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Co(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Ja(Co(t)))}}(t,a,h),{viewCache:a,changes:h}}function su(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=Zo(r,n))return t;if(ua(n))if(Bt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Ao(t),l=Jo(r,c instanceof Wa?c:Wa.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=$o(r,Ao(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=ea(n);if(".priority"===f){Bt(1===ta(n),"Can't have a priority with additional path components");var d=s.getNode(),p=Xo(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=na(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=Xo(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=tu(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return So(t,o,s.isFullyInitialized()||ua(n),e.filter.filtersNodes())}function cu(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(ua(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=ea(n);if(!c.isCompleteForPath(n)&&ta(n)>1)return t;var d=na(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,au,null)}var v=To(t,s,c.isFullyInitialized()||ua(n),l.filtersNodes());return su(e,v,n,i,new ou(i,v,a),u)}function lu(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new ou(i,t,a);if(ua(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=So(t,s,!0,e.filter.filtersNodes());else{var h=ea(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=So(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=na(n),p=c.getNode().getImmediateChild(h);if(ua(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===ra(d)&&v.getChild(aa(d)).isEmpty()?v:v.updateChild(d,r):Wa.EMPTY_NODE}if(p.equals(f))u=t;else u=So(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function hu(e,t){return e.eventCache.isCompleteForChild(t)}function fu(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function du(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=ua(n)?r:new Po(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=fu(0,t.serverCache.getNode().getImmediateChild(n),r);c=cu(e,c,new Xi(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var h=fu(0,t.serverCache.getNode().getImmediateChild(n),r);c=cu(e,c,new Xi(n),h,i,a,o,u)}})),c}var pu,vu=function(){function e(t,n){Dt(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new to(i.getIndex()),o=(r=i).loadsAllData()?new to(r.getIndex()):r.hasLimit()?new ro(r):new no(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(Wa.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(Wa.EMPTY_NODE,s.getNode(),null),h=new _o(c,u.isFullyInitialized(),a.filtersNodes()),f=new _o(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Eo(f,h),this.eventGenerator_=new xo(this.query_)}return Lt(e,[{key:"query",get:function(){return this.query_}}]),e}();function yu(e,t){var n=Ao(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ua(t)&&!n.getImmediateChild(ea(t)).isEmpty())?n.getChild(t):null}function mu(e){return 0===e.eventRegistrations_.length}function gu(e,t,n){var r=[];if(n){Bt(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function ku(e,t,n,r){t.type===fo.MERGE&&null!==t.source.queryId&&(Bt(Ao(e.viewCache_),"We should always have a full cache before handling merges"),Bt(Co(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=uu(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Bt(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Bt(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Bt(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,wu(e,u.changes,u.viewCache.eventCache.getNode(),null)}function wu(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Io(e,i,"child_removed",t,r,n),Io(e,i,"child_added",t,r,n),Io(e,i,"child_moved",a,r,n),Io(e,i,"child_changed",t,r,n),Io(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var bu,_u=Lt((function e(){Dt(this,e),this.views=new Map}));function xu(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Bt(null!=a,"SyncTree gave us an op for an invalid query."),ku(a,t,n,r)}var o,u=[],s=Rt(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(ku(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function Iu(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=$o(n,i?r:null),s=!1;u?s=!0:r instanceof Wa?(u=Jo(n,r),s=!1):(u=Wa.EMPTY_NODE,s=!1);var c=Eo(new _o(u,s,!1),new _o(r,i,!1));return new vu(t,c)}return o}function Eu(e,t,n,r,i,a){var o=Iu(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ua,(function(e,t){r.push(Xa(e,t))})),n.isFullyInitialized()&&r.push(Ja(n.getNode())),wu(e,r,n.getNode(),t)}(o,n)}function Su(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=Pu(e);if("default"===i){var s,c=Rt(e.views.entries());try{for(c.s();!(s=c.n()).done;){var l=gt(s.value,2),h=l[0],f=l[1];o=o.concat(gu(f,n,r)),mu(f)&&(e.views.delete(h),f.query._queryParams.loadsAllData()||a.push(f.query))}}catch(p){c.e(p)}finally{c.f()}}else{var d=e.views.get(i);d&&(o=o.concat(gu(d,n,r)),mu(d)&&(e.views.delete(i),d.query._queryParams.loadsAllData()||a.push(d.query)))}return u&&!Pu(e)&&a.push(new(Bt(pu,"Reference.ts has not been loaded"),pu)(t._repo,t._path)),{removed:a,events:o}}function Tu(e){var t,n=[],r=Rt(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Cu(e,t){var n,r=null,i=Rt(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||yu(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Au(e,t){if(t._queryParams.loadsAllData())return Ru(e);var n=t._queryIdentifier;return e.views.get(n)}function Nu(e,t){return null!=Au(e,t)}function Pu(e){return null!=Ru(e)}function Ru(e){var t,n=Rt(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Du=1,Ou=Lt((function e(t){Dt(this,e),this.listenProvider_=t,this.syncPointTree_=new Po(null),this.pendingWriteTree_={visibleWrites:Ro.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Lu(e,t,n,r,i){return function(e,t,n,r,i){Bt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Do(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?zu(e,new wo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Mu(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Wo(e.pendingWriteTree_,t),i=Ko(e.pendingWriteTree_,t);if(i){var a=new Po(null);return null!=r.snap?a=a.set(Zi(),!0):ki(r.children,(function(e){a=a.set(new Xi(e),!0)})),zu(e,new go(r.path,a,n))}return[]}function Fu(e,t,n){return zu(e,new wo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Uu(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||Nu(a,t))){var u=Su(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var s=u.removed;o=u.events;var c=-1!==s.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return Pu(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&Pu(t))return[Ru(t)];var r=[];return t&&(r=Tu(t)),ki(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=Hu(e,p);e.listenProvider_.startListening(Xu(v),Gu(e,v),y.hashFn,y.onComplete)}}if(!l&&s.length>0&&!r)if(c){e.listenProvider_.stopListening(Xu(t),null)}else s.forEach((function(t){var n=e.queryToTagMap.get(Qu(t));e.listenProvider_.stopListening(Xu(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=Qu(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,s)}return o}function Vu(e,t,n,r){var i=Yu(e,r);if(null!=i){var a=$u(i),o=a.path,u=a.queryId,s=sa(o,t);return Ju(e,o,new wo(yo(u),s,n))}return[]}function ju(e,t){var n=e._path,r=null,i=!1;t.syncPointTree_.foreachOnPath(n,(function(e,t){var a=sa(e,n);r=r||Cu(t,a),i=i||Pu(t)}));var a,o=t.syncPointTree_.get(n);(o?(i=i||Pu(o),r=r||Cu(o,Zi())):(o=new _u,t.syncPointTree_=t.syncPointTree_.set(n,o)),null!=r)?a=!0:(a=!1,r=Wa.EMPTY_NODE,t.syncPointTree_.subtree(n).foreachChild((function(e,t){var n=Cu(t,Zi());n&&(r=r.updateImmediateChild(e,n))})));var u=Nu(o,e);if(!u&&!e._queryParams.loadsAllData()){var s=Qu(e);Bt(!t.queryToTagMap.has(s),"View does not exist, but we have a tag");var c=Du++;t.queryToTagMap.set(s,c),t.tagToQueryMap.set(c,s)}return{syncPoint:o,writesCache:zo(t.pendingWriteTree_,n),serverCache:r,serverCacheComplete:a,foundAncestorDefaultView:i,viewAlreadyExists:u}}function Bu(e,t,n){var r=ju(t,e),i=r.syncPoint,a=r.serverCache,o=r.writesCache,u=r.serverCacheComplete,s=r.viewAlreadyExists,c=r.foundAncestorDefaultView,l=Eu(i,t,n,o,a,u);if(!s&&!c){var h=Au(i,t);l=l.concat(function(e,t,n){var r=t._path,i=Gu(e,t),a=Hu(e,n),o=e.listenProvider_.startListening(Xu(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Bt(!Pu(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!ua(e)&&t&&Pu(t))return[Ru(t).query];var r=[];return t&&(r=r.concat(Tu(t).map((function(e){return e.query})))),ki(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(Xu(l),Gu(e,l))}return o}(e,t,h))}return l}function qu(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Cu(n,sa(e,t));if(r)return r}));return Yo(r,t,i,n,!0)}function zu(e,t){return Wu(t,e.syncPointTree_,null,zo(e.pendingWriteTree_,Zi()))}function Wu(e,t,n,r){if(ua(e.path))return Ku(e,t,n,r);var i=t.get(Zi());null==n&&null!=i&&(n=Cu(i,Zi()));var a=[],o=ea(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=nu(r,o);a=a.concat(Wu(u,s,c,l))}return i&&(a=a.concat(xu(i,e,r,n))),a}function Ku(e,t,n,r){var i=t.get(Zi());null==n&&null!=i&&(n=Cu(i,Zi()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=nu(r,t),s=e.operationForChild(t);s&&(a=a.concat(Ku(s,i,o,u)))})),i&&(a=a.concat(xu(i,e,r,n))),a}function Hu(e,t){var n=t.query,r=Gu(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Wa.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Yu(e,n);if(r){var i=$u(r),a=i.path,o=i.queryId,u=sa(a,t);return Ju(e,a,new ko(yo(o),u))}return[]}(e,n._path,r):function(e,t){return zu(e,new ko({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Uu(e,n,null,i)}}}function Gu(e,t){var n=Qu(t);return e.queryToTagMap.get(n)}function Qu(e){return e._path.toString()+"$"+e._queryIdentifier}function Yu(e,t){return e.tagToQueryMap.get(t)}function $u(e){var t=e.indexOf("$");return Bt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Xi(e.substr(0,t))}}function Ju(e,t,n){var r=e.syncPointTree_.get(t);return Bt(r,"Missing sync point for query tag that we're tracking"),xu(r,n,zo(e.pendingWriteTree_,t),null)}function Xu(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Bt(bu,"Reference.ts has not been loaded"),bu)(e._repo,e._path):e}var Zu=function(){function e(t){Dt(this,e),this.node_=t}return Lt(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),es=function(){function e(t,n){Dt(this,e),this.syncTree_=t,this.path_=n}return Lt(e,[{key:"getImmediateChild",value:function(t){var n=oa(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return qu(this.syncTree_,this.path_)}}]),e}(),ts=function(e,t,n){return e&&"object"===typeof e?(Bt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?ns(e[".sv"],t,n):"object"===typeof e[".sv"]?rs(e[".sv"],t):void Bt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ns=function(e,t,n){if("timestamp"===e)return n.timestamp;Bt(!1,"Unexpected server value: "+e)},rs=function(e,t,n){e.hasOwnProperty("increment")||Bt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Bt(!1,"Unexpected increment value: "+r);var i=t.node();if(Bt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},is=function(e,t,n,r){return os(t,new es(n,e),r)},as=function(e,t,n){return os(e,new Zu(t),n)};function os(e,t,n){var r,i=e.getPriority().val(),a=ts(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=ts(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new Oa(u,Ha(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new Oa(a))),s.forEachChild(Ua,(function(e,i){var a=os(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var us=Lt((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};Dt(this,e),this.name=t,this.parent=n,this.node=r}));function ss(e,t){for(var n=t instanceof Xi?t:new Xi(t),r=e,i=ea(n);null!==i;){var a=pn(r.node.children,i)||{children:{},childCount:0};r=new us(i,r,a),i=ea(n=na(n))}return r}function cs(e){return e.node.value}function ls(e,t){e.node.value=t,vs(e)}function hs(e){return e.node.childCount>0}function fs(e,t){ki(e.node.children,(function(n,r){t(new us(n,e,r))}))}function ds(e,t,n,r){n&&!r&&t(e),fs(e,(function(e){ds(e,t,!0,r)})),n&&r&&t(e)}function ps(e){return new Xi(null===e.parent?e.name:ps(e.parent)+"/"+e.name)}function vs(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===cs(e)&&!hs(e)}(n),i=dn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,vs(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,vs(e))}(e.parent,e.name,e)}var ys=/[\[\].#$\/\u0000-\u001F\u007F]/,ms=/[\[\].#$\u0000-\u001F\u007F]/,gs=10485760,ks=function(e){return"string"===typeof e&&0!==e.length&&!ys.test(e)},ws=function(e){return"string"===typeof e&&0!==e.length&&!ms.test(e)},bs=function(e,t,n,r){r&&void 0===t||_s(Sn(e,"value"),t,n)},_s=function e(t,n,r){var i=r instanceof Xi?new ha(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+da(i));if("function"===typeof n)throw new Error(t+"contains a function "+da(i)+" with contents = "+n.toString());if(hi(n))throw new Error(t+"contains "+n.toString()+" "+da(i));if("string"===typeof n&&n.length>gs/3&&Tn(n)>gs)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+da(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(ki(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!ks(n)))throw new Error(t+" contains an invalid key ("+n+") "+da(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,s;s=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(s),u.byteLength_+=Tn(s),fa(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Tn(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+da(i)+" in addition to actual children.")}},xs=function(e,t,n,r){if((!r||void 0!==n)&&!ws(n))throw new Error(Sn(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Is=function(e,t){if(".info"===ea(t))throw new Error(e+" failed = Can't modify data under /.info/")},Es=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!ks(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ws(e)}(n))throw new Error(Sn(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ss=Lt((function e(){Dt(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Ts(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||ca(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Cs(e,t,n){Ts(e,n),Ns(e,(function(e){return ca(e,t)}))}function As(e,t,n){Ts(e,n),Ns(e,(function(e){return la(e,t)||la(t,e)}))}function Ns(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Ps(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Ps(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();ri&&oi("event: "+n.toString()),Ei(r)}}}var Rs="repo_interrupt",Ds=function(){function e(t,n,r,i){Dt(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ss,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=co(),this.transactionQueueTree_=new us,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return Lt(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Os(e,t,n){if(e.stats_=Vi(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new uo(e.repoInfo_,(function(t,n,r,i){Fs(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Us(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{hn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new ya(e.repoInfo_,t,(function(t,n,r,i){Fs(e,t,n,r,i)}),(function(t){Us(e,t)}),(function(t){!function(e,t){ki(t,(function(t,n){Vs(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Ui[n]||(Ui[n]=t()),Ui[n]}(e.repoInfo_,(function(){return new vo(e.stats_,e.server_)})),e.infoData_=new so,e.infoSyncTree_=new Ou({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Fu(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Vs(e,"connected",!1),e.serverSyncTree_=new Ou({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);As(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function Ls(e){var t=e.infoData_.getNode(new Xi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Ms(e){return(t=(t={timestamp:Ls(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Fs(e,t,n,r,i){e.dataUpdateCount++;var a=new Xi(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=yn(n,(function(e){return Ha(e)}));o=function(e,t,n,r){var i=Yu(e,r);if(i){var a=$u(i),o=a.path,u=a.queryId,s=sa(o,t),c=Po.fromObject(n);return Ju(e,o,new bo(yo(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=Ha(n);o=Vu(e.serverSyncTree_,a,s,i)}else if(r){var c=yn(n,(function(e){return Ha(e)}));o=function(e,t,n){var r=Po.fromObject(n);return zu(e,new bo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Ha(n);o=Fu(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=Ys(e,a)),As(e.eventQueue_,h,o)}function Us(e,t){Vs(e,"connected",t),!1===t&&function(e){Ws(e,"onDisconnectEvents");var t=Ms(e),n=co();ho(e.onDisconnect_,Zi(),(function(r,i){var a=is(r,i,e.serverSyncTree_,t);lo(n,r,a)}));var r=[];ho(n,Zi(),(function(t,n){r=r.concat(Fu(e.serverSyncTree_,t,n));var i=ec(e,t);Ys(e,i)})),e.onDisconnect_=co(),As(e.eventQueue_,Zi(),r)}(e)}function Vs(e,t,n){var r=new Xi("/.info/"+t),i=Ha(n);e.infoData_.updateSnapshot(r,i);var a=Fu(e.infoSyncTree_,r,i);As(e.eventQueue_,r,a)}function js(e){return e.nextWriteId_++}function Bs(e,t,n,r,i){Ws(e,"set",{path:t.toString(),value:n,priority:r});var a=Ms(e),o=Ha(n,r),u=qu(e.serverSyncTree_,t),s=as(o,u,a),c=js(e),l=Lu(e.serverSyncTree_,t,s,c,!0);Ts(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||li("set at "+t+" failed: "+n);var o=Mu(e.serverSyncTree_,c,!a);As(e.eventQueue_,t,o),Ks(e,i,n,r)}));var h=ec(e,t);Ys(e,h),As(e.eventQueue_,h,[])}function qs(e,t,n){var r;r=".info"===ea(t._path)?Uu(e.infoSyncTree_,t,n):Uu(e.serverSyncTree_,t,n),Cs(e.eventQueue_,t._path,r)}function zs(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Rs)}function Ws(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];oi.apply(void 0,[t].concat(r))}function Ks(e,t,n,r){t&&Ei((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function Hs(e,t,n){return qu(e.serverSyncTree_,t,n)||Wa.EMPTY_NODE}function Gs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||Zs(e,t),cs(t)){var n=Js(e,t);Bt(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&Qs(e,ps(t),n)}else hs(t)&&fs(t,(function(t){Gs(e,t)}))}function Qs(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Hs(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Bt(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=sa(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Ws(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Mu(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);Zs(e,ss(e.transactionQueueTree_,t)),Gs(e,e.transactionQueueTree_),As(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Ei(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{li("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}Ys(e,t)}}),o)}function Ys(e,t){var n=$s(e,t),r=ps(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=sa(n,s.path),l=!1,h=void 0;if(Bt(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(Mu(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(Mu(e.serverSyncTree_,s.currentWriteId,!0));else{var f=Hs(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){_s("transaction failed: Data returned ",d,s.path);var p=Ha(d);"object"===typeof d&&null!=d&&dn(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=s.currentWriteId,y=Ms(e),m=as(p,f,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=js(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Lu(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(Mu(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Mu(e.serverSyncTree_,s.currentWriteId,!0))}As(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);Zs(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Ei(r[c]);Gs(e,e.transactionQueueTree_)}(e,Js(e,n),r),r}function $s(e,t){var n,r=e.transactionQueueTree_;for(n=ea(t);null!==n&&void 0===cs(r);)r=ss(r,n),n=ea(t=na(t));return r}function Js(e,t){var n=[];return Xs(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Xs(e,t,n){var r=cs(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);fs(t,(function(t){Xs(e,t,n)}))}function Zs(e,t){var n=cs(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ls(t,n.length>0?n:void 0)}fs(t,(function(t){Zs(e,t)}))}function ec(e,t){var n=ps($s(e,t)),r=ss(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){tc(e,t)})),tc(e,r),ds(r,(function(t){tc(e,t)})),n}function tc(e,t){var n=cs(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Bt(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Bt(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Mu(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ls(t,void 0):n.length=a+1,As(e.eventQueue_,ps(t),i);for(var u=0;u<r.length;u++)Ei(r[u])}}var nc=function(e,t){var n=rc(e),r=n.namespace;"firebase.com"===n.domain&&ci(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ci("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&li("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Oi(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Xi(n.pathString)}},rc=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=Rt(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):li("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},ic=function(){function e(t,n,r,i){Dt(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return Lt(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+hn(this.snapshot.exportVal())}}]),e}(),ac=function(){function e(t,n,r){Dt(this,e),this.eventRegistration=t,this.error=n,this.path=r}return Lt(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),oc=function(){function e(t,n){Dt(this,e),this.snapshotCallback=t,this.cancelCallback=n}return Lt(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return Bt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),uc=function(){function e(t,n,r,i){Dt(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return Lt(e,[{key:"key",get:function(){return ua(this._path)?null:ra(this._path)}},{key:"ref",get:function(){return new sc(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=oo(this._queryParams),t=mi(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return oo(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Cn(t))instanceof e))return!1;var n=this._repo===t._repo,r=ca(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var sc=function(e){Et(n,e);var t=At(n);function n(e,r){return Dt(this,n),t.call(this,e,r,new io,!1)}return Lt(n,[{key:"parent",get:function(){var e=aa(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(uc),cc=function(){function e(t,n,r){Dt(this,e),this._node=t,this.ref=n,this._index=r}return Lt(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Xi(t),r=hc(this.ref,t);return new e(this._node.getChild(n),r,Ua)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,hc(n.ref,r),Ua))}))}},{key:"hasChild",value:function(e){var t=new Xi(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function lc(e,t){return(e=Cn(e))._checkNotDeleted("ref"),void 0!==t?hc(e._root,t):e._root}function hc(e,t){var n,r,i,a;return null===ea((e=Cn(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),xs(n,r,i,a)):xs("child","path",t,!1),new sc(e._repo,oa(e._path,t))}function fc(e,t){e=Cn(e),Is("set",e._path),bs("set",t,e._path,!1);var n=new Yt;return Bs(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}var dc=function(){function e(t){Dt(this,e),this.callbackContext=t}return Lt(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new ic("value",this,new cc(e.snapshotNode,new sc(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new ac(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),pc=function(){function e(t,n){Dt(this,e),this.eventType=t,this.callbackContext=n}return Lt(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new ac(this,e,t):null}},{key:"createEvent",value:function(e,t){Bt(null!=e.childName,"Child events should have a childName.");var n=hc(new sc(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new ic(e.type,this,new cc(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function vc(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,u=function(t,n){qs(e._repo,e,c),o(t,n)};u.userCallback=n.userCallback,u.context=n.context,n=u}var s=new oc(n,a||void 0),c="value"===t?new dc(s):new pc(t,s);return function(e,t,n){var r;r=".info"===ea(t._path)?Bu(e.infoSyncTree_,t,n):Bu(e.serverSyncTree_,t,n),Cs(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return qs(e._repo,e,c)}}function yc(e,t,n,r){return vc(e,"value",t,n,r)}!function(e){Bt(!pu,"__referenceConstructor has already been defined"),pu=e}(sc),function(e){Bt(!bu,"__referenceConstructor has already been defined"),bu=e}(sc);var mc={},gc=!1;function kc(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||ci("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),oi("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=nc(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=nc(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new Ai(Ai.OWNER):new Ci(e.name,e.options,t);Es("Invalid Firebase Database URL",u),ua(u.path)||ci("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=mc[t.name];i||(i={},mc[t.name]=i);var a=i[e.toURLString()];a&&ci("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new Ds(e,gc,n,r),i[e.toURLString()]=a,a}(s,e,l,new Ti(e.name,n));return new wc(h,e)}var wc=function(){function e(t,n){Dt(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return Lt(e,[{key:"_repo",get:function(){return this._instanceStarted||(Os(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new sc(this._repo,Zi())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=mc[t];n&&n[e.key]===e||ci("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),zs(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&ci("Cannot call "+e+" on a deleted database.")}}]),e}();ya.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ya.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var bc;!function(e){!function(e){Gr=e}(_r),vr(new An("database",(function(e,t){var n=t.instanceIdentifier;return kc(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Cr(Kr,Hr,e),Cr(Kr,Hr,"esm2017")}();var _c=function(){function e(t,n){var r=this;Dt(this,e),this._delegate=t,this.firebase=n,dr(t,new An("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return Lt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Sr(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){dr(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){pr(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),xc=(i(bc={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),i(bc,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),bc),Ic=new un("app-compat","Firebase",xc);var Ec=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=xr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(dn(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Cr,setLogLevel:Nr,onLog:Ar,apps:null,SDK_VERSION:_r,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(vr(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ic.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Qt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!dn(n,e=e||cr))throw Ic.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(_c);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Qt(n,e)},createSubscribe:xn,ErrorFactory:un,deepExtend:Qt}),n}(),Sc=new jn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Sc.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Tc=self.firebase.SDK_VERSION;Tc&&Tc.indexOf("LITE")>=0&&Sc.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Cc=Ec;!function(e){Cr("@firebase/app-compat","0.1.31",e)}();function Ac(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=St(e)););return e}function Nc(){return Nc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Ac(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Nc.apply(this,arguments)}Cc.registerVersion("firebase","9.9.2","app-compat");function Pc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Rc;Object.create;var Dc="facebook.com",Oc="github.com",Lc="google.com",Mc="password",Fc="twitter.com",Uc="EMAIL_SIGNIN",Vc="PASSWORD_RESET",jc="RECOVER_EMAIL",Bc="REVERT_SECOND_FACTOR_ADDITION",qc="VERIFY_AND_CHANGE_EMAIL",zc="VERIFY_EMAIL";function Wc(){return i({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Kc=function(){var e;return i(e={},"admin-restricted-operation","This operation is restricted to administrators only."),i(e,"argument-error",""),i(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),i(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),i(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),i(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),i(e,"cordova-not-ready","Cordova framework is not ready."),i(e,"cors-unsupported","This browser is not supported."),i(e,"credential-already-in-use","This credential is already associated with a different user account."),i(e,"custom-token-mismatch","The custom token corresponds to a different audience."),i(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),i(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),i(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),i(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),i(e,"email-already-in-use","The email address is already in use by another account."),i(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),i(e,"expired-action-code","The action code has expired."),i(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),i(e,"internal-error","An internal AuthError has occurred."),i(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),i(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),i(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),i(e,"invalid-auth-event","An internal AuthError has occurred."),i(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),i(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),i(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),i(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),i(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),i(e,"invalid-email","The email address is badly formatted."),i(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),i(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),i(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),i(e,"invalid-credential","The supplied auth credential is malformed or has expired."),i(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),i(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),i(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),i(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),i(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),i(e,"wrong-password","The password is invalid or the user does not have a password."),i(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),i(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),i(e,"invalid-provider-id","The specified provider ID is invalid."),i(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),i(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),i(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),i(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),i(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),i(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),i(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),i(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),i(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),i(e,"missing-continue-uri","A continue URL must be provided in the request."),i(e,"missing-iframe-start","An internal AuthError has occurred."),i(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),i(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),i(e,"missing-multi-factor-info","No second factor identifier is provided."),i(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),i(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),i(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),i(e,"app-deleted","This instance of FirebaseApp has been deleted."),i(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),i(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),i(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),i(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),i(e,"no-auth-event","An internal AuthError has occurred."),i(e,"no-such-provider","User was not linked to an account with the given provider."),i(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),i(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),i(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),i(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),i(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),i(e,"provider-already-linked","User can only be linked to one identity for the given provider."),i(e,"quota-exceeded","The project's quota for this operation has been exceeded."),i(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),i(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),i(e,"rejected-credential","The request contains malformed or mismatching credentials."),i(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),i(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),i(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),i(e,"timeout","The operation has timed out."),i(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),i(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),i(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),i(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),i(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),i(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),i(e,"unverified-email","The operation requires a verified email."),i(e,"user-cancelled","The user did not grant your application the permissions it requested."),i(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),i(e,"user-disabled","The user account has been disabled by an administrator."),i(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),i(e,"user-signed-out",""),i(e,"weak-password","The password must be 6 characters long or more."),i(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),i(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Hc=Wc,Gc=new un("auth","Firebase",Wc()),Qc=new jn("@firebase/auth");function Yc(e){if(Qc.logLevel<=Dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Qc.error.apply(Qc,["Auth (".concat(_r,"): ").concat(e)].concat(n))}}function $c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw el.apply(void 0,[e].concat(n))}function Jc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return el.apply(void 0,[e].concat(n))}function Xc(e,t,n){var r=Object.assign(Object.assign({},Hc()),i({},t,n));return new un("auth","Firebase",r).create(t,{appName:e.name})}function Zc(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&$c(e,"argument-error"),Xc(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function el(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=Pt(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(Pt(o)))}return Gc.create.apply(Gc,[e].concat(n))}function tl(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw el.apply(void 0,[t].concat(r))}}function nl(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Yc(t),new Error(t)}function rl(e,t){e||nl(t)}var il=new Map;function al(e){rl(e instanceof Function,"Expected a class definition");var t=il.get(e);return t?(rl(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,il.set(e,t),t)}function ol(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ul(){return"http:"===sl()||"https:"===sl()}function sl(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var cl=function(){function e(t,n){Dt(this,e),this.shortDelay=t,this.longDelay=n,rl(n>t,"Short delay should be less than long delay!"),this.isMobile=Xt()||tn()}return Lt(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ul()||en()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function ll(e,t){rl(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var hl=function(){function e(){Dt(this,e)}return Lt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void nl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void nl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void nl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),fl=(i(Rc={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),i(Rc,"MISSING_CUSTOM_TOKEN","internal-error"),i(Rc,"INVALID_IDENTIFIER","invalid-email"),i(Rc,"MISSING_CONTINUE_URI","internal-error"),i(Rc,"INVALID_PASSWORD","wrong-password"),i(Rc,"MISSING_PASSWORD","internal-error"),i(Rc,"EMAIL_EXISTS","email-already-in-use"),i(Rc,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),i(Rc,"INVALID_IDP_RESPONSE","invalid-credential"),i(Rc,"INVALID_PENDING_TOKEN","invalid-credential"),i(Rc,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),i(Rc,"MISSING_REQ_TYPE","internal-error"),i(Rc,"EMAIL_NOT_FOUND","user-not-found"),i(Rc,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),i(Rc,"EXPIRED_OOB_CODE","expired-action-code"),i(Rc,"INVALID_OOB_CODE","invalid-action-code"),i(Rc,"MISSING_OOB_CODE","internal-error"),i(Rc,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),i(Rc,"INVALID_ID_TOKEN","invalid-user-token"),i(Rc,"TOKEN_EXPIRED","user-token-expired"),i(Rc,"USER_NOT_FOUND","user-token-expired"),i(Rc,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),i(Rc,"INVALID_CODE","invalid-verification-code"),i(Rc,"INVALID_SESSION_INFO","invalid-verification-id"),i(Rc,"INVALID_TEMPORARY_PROOF","invalid-credential"),i(Rc,"MISSING_SESSION_INFO","missing-verification-id"),i(Rc,"SESSION_EXPIRED","code-expired"),i(Rc,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),i(Rc,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),i(Rc,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),i(Rc,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),i(Rc,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),i(Rc,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),i(Rc,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),i(Rc,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),i(Rc,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),i(Rc,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),i(Rc,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Rc),dl=new cl(3e4,6e4);function pl(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function vl(e,t,n,r){return yl.apply(this,arguments)}function yl(){return yl=_t(wt().mark((function e(t,n,r,i){var a,o=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",ml(t,a,_t(wt().mark((function e(){var a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=kn(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",hl.fetch()(bl(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function ml(e,t,n){return gl.apply(this,arguments)}function gl(){return(gl=_t(wt().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},fl),n),e.prev=2,a=new _l(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw xl(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=gt(c,2),h=l[0],f=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw xl(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw xl(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw xl(t,"user-disabled",u);case 29:if(d=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!f){e.next=34;break}throw Xc(t,d,f);case 34:$c(t,d);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof on)){e.next=41;break}throw e.t0;case 41:$c(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function kl(e,t,n,r){return wl.apply(this,arguments)}function wl(){return wl=_t(wt().mark((function e(t,n,r,i){var a,o,u=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,vl(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&$c(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),wl.apply(this,arguments)}function bl(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?ll(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var _l=function(){function e(t){var n=this;Dt(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Jc(n.auth,"network-request-failed"))}),dl.get())}))}return Lt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function xl(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Jc(e,t,r);return i.customData._tokenResponse=n,i}function Il(e,t){return El.apply(this,arguments)}function El(){return(El=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sl(e,t){return Tl.apply(this,arguments)}function Tl(){return(Tl=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cl(e,t){return Al.apply(this,arguments)}function Al(){return(Al=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nl(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Pl(){return Pl=_t(wt().mark((function e(t){var n,r,i,a,o,u,s=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Cn(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,tl((a=Dl(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Nl(Rl(a.auth_time)),issuedAtTime:Nl(Rl(a.iat)),expirationTime:Nl(Rl(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Pl.apply(this,arguments)}function Rl(e){return 1e3*Number(e)}function Dl(e){var t,n=gt(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Yc("JWT malformed, contained fewer than 3 sections"),null;try{var o=Gt(i);return o?JSON.parse(o):(Yc("Failed to decode base64 JWT payload"),null)}catch(u){return Yc("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Ol(e,t){return Ll.apply(this,arguments)}function Ll(){return Ll=_t(wt().mark((function e(t,n){var r=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof on&&Ml(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ll.apply(this,arguments)}function Ml(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Fl=function(){function e(t){Dt(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return Lt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(_t(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ul=function(){function e(t,n){Dt(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return Lt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Nl(this.lastLoginAt),this.creationTime=Nl(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Vl(e){return jl.apply(this,arguments)}function jl(){return jl=_t(wt().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Ol(t,Cl(r,{idToken:i}));case 6:tl(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?zl(o.providerUserInfo):[],s=ql(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ul(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),jl.apply(this,arguments)}function Bl(){return(Bl=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Cn(t),e.next=3,Vl(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ql(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(Pt(n),Pt(t))}function zl(e){return e.map((function(e){var t=e.providerId,n=Pc(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Wl(e,t){return Kl.apply(this,arguments)}function Kl(){return(Kl=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ml(t,{},_t(wt().mark((function e(){var r,i,a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=kn({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=bl(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",hl.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hl=function(){function e(){Dt(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return Lt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){tl(e.idToken,"internal-error"),tl("undefined"!==typeof e.idToken,"internal-error"),tl("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Dl(e);return tl(t,"internal-error"),tl("undefined"!==typeof t.exp,"internal-error"),tl("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=_t(wt().mark((function e(t){var n,r=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],tl(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=_t(wt().mark((function e(t,n){var r,i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wl(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return nl("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(tl("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(tl("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(tl("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Gl(e,t){tl("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Ql=function(){function e(t){Dt(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Pc(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?Pt(a.providerData):[],this.metadata=new Ul(a.createdAt||void 0,a.lastLoginAt||void 0)}return Lt(e,[{key:"getIdToken",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ol(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(tl(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Pl.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Bl.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(tl(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){tl(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=_t(wt().mark((function e(t){var n,r,i=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Vl(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Ol(this,Il(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;tl(k&&x,t,"internal-error");var I=Hl.fromJSON(this.name,x);tl("string"===typeof k,t,"internal-error"),Gl(h,t.name),Gl(f,t.name),tl("boolean"===typeof w,t,"internal-error"),tl("boolean"===typeof b,t,"internal-error"),Gl(d,t.name),Gl(p,t.name),Gl(v,t.name),Gl(y,t.name),Gl(m,t.name),Gl(g,t.name);var E=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=_t(wt().mark((function t(n,r){var i,a,o,u=arguments;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Hl).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Vl(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Yl=function(){function e(){Dt(this,e),this.type="NONE",this.storage={}}return Lt(e,[{key:"_isAvailable",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Yl.type="NONE";var $l=Yl;function Jl(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Xl=function(){function e(t,n,r){Dt(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Jl(this.userKey,a.apiKey,o),this.fullPersistenceKey=Jl("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return Lt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Ql._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=_t(wt().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,d,p,v=arguments;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(al($l),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||al($l),u=Jl(i,n.config.apiKey,n.name),s=null,c=Rt(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return d=Ql._fromJSON(n,f),h!==o&&(s=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Zl(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(rh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(eh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ah(t))return"Blackberry";if(oh(t))return"Webos";if(th(t))return"Safari";if((t.includes("chrome/")||nh(t))&&!t.includes("edge/"))return"Chrome";if(ih(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function eh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/firefox\//i.test(e)}function th(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function nh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/crios\//i.test(e)}function rh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/iemobile/i.test(e)}function ih(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/android/i.test(e)}function ah(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/blackberry/i.test(e)}function oh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/webos/i.test(e)}function uh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function sh(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return uh(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function ch(){return nn()&&10===document.documentMode}function lh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return uh(e)||ih(e)||oh(e)||ah(e)||/windows phone/i.test(e)||rh(e)}function hh(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Zl(Jt());break;case"Worker":t="".concat(Zl(Jt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(_r,"/").concat(r)}var fh=function(){function e(t){Dt(this,e),this.auth=t,this.queue=[]}return Lt(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=_t(wt().mark((function e(t){var n,r,i,a,o,u,s,c;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=Rt(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=Rt(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(K){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),dh=function(){function e(t,n,r){Dt(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vh(this),this.idTokenSubscription=new vh(this),this.beforeStateQueue=new fh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Gc,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return Lt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=al(t)),this._initializationPromise=this.queue(_t(wt().mark((function r(){var i,a;return wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Xl.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=_t(wt().mark((function e(t){var n,r,i,a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return tl(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vl(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Cn(t):null)&&tl(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=_t(wt().mark((function e(t){var n,r=this,i=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&tl(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(_t(wt().mark((function n(){return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(al(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new un("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return tl(n=t&&al(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Xl.create(this,[al(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=_t(wt().mark((function e(t){var n=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return tl(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return tl(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hh(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=_t(wt().mark((function e(){var t,n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ph(e){return Cn(e)}var vh=function(){function e(t){var n=this;Dt(this,e),this.auth=t,this.observer=null,this.addObserver=xn((function(e){return n.observer=e}))}return Lt(e,[{key:"next",get:function(){return tl(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function yh(e,t,n){var r=ph(e);tl(r._canInitEmulator,r,"emulator-config-failed"),tl(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=mh(t),o=function(e){var t=mh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:gh(r.substr(a.length+1))}}var o=gt(r.split(":"),2);return{host:o[0],port:gh(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function mh(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function gh(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var kh=function(){function e(t,n){Dt(this,e),this.providerId=t,this.signInMethod=n}return Lt(e,[{key:"toJSON",value:function(){return nl("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return nl("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return nl("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return nl("not implemented")}}]),e}();function wh(e,t){return bh.apply(this,arguments)}function bh(){return(bh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:resetPassword",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _h(e,t){return xh.apply(this,arguments)}function xh(){return(xh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ih(e,t){return Eh.apply(this,arguments)}function Eh(){return(Eh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:update",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sh(e,t){return Th.apply(this,arguments)}function Th(){return(Th=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kl(t,"POST","/v1/accounts:signInWithPassword",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ch(e,t){return Ah.apply(this,arguments)}function Ah(){return(Ah=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:sendOobCode",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nh(e,t){return Ph.apply(this,arguments)}function Ph(){return(Ph=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ch(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rh(e,t){return Dh.apply(this,arguments)}function Dh(){return(Dh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ch(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oh(e,t){return Lh.apply(this,arguments)}function Lh(){return(Lh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ch(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mh(e,t){return Fh.apply(this,arguments)}function Fh(){return(Fh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ch(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uh(e,t){return Vh.apply(this,arguments)}function Vh(){return(Vh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kl(t,"POST","/v1/accounts:signInWithEmailLink",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jh(e,t){return Bh.apply(this,arguments)}function Bh(){return(Bh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kl(t,"POST","/v1/accounts:signInWithEmailLink",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var qh=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Dt(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return Lt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Sh(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Uh(t,{email:this._email,oobCode:this._password}));case 5:$c(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",_h(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",jh(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:$c(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(kh);function zh(e,t){return Wh.apply(this,arguments)}function Wh(){return(Wh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kl(t,"POST","/v1/accounts:signInWithIdp",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kh=function(e){Et(n,e);var t=At(n);function n(){var e;return Dt(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return Lt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return zh(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,zh(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,zh(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=kn(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$c("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Pc(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(kh);function Hh(e,t){return Gh.apply(this,arguments)}function Gh(){return(Gh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:sendVerificationCode",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qh(){return(Qh=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kl(t,"POST","/v1/accounts:signInWithPhoneNumber",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yh(){return(Yh=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kl(t,"POST","/v1/accounts:signInWithPhoneNumber",pl(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw xl(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $h=i({},"USER_NOT_FOUND","user-not-found");function Jh(){return(Jh=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",kl(t,"POST","/v1/accounts:signInWithPhoneNumber",pl(t,r),$h));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xh=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this,"phone","phone")).params=e,r}return Lt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Qh.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Yh.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Jh.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(kh);var Zh=function(){function e(t){var n,r,i,a,o,u;Dt(this,e);var s=wn(bn(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);tl(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return Lt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=wn(bn(e)).link,n=t?wn(bn(t)).deep_link_id:null,r=wn(bn(e)).deep_link_id;return(r?wn(bn(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var ef=function(){function e(){Dt(this,e),this.providerId=e.PROVIDER_ID}return Lt(e,null,[{key:"credential",value:function(e,t){return qh._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Zh.parseLink(t);return tl(n,"argument-error"),qh._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();ef.PROVIDER_ID="password",ef.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ef.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var tf=function(){function e(t){Dt(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return Lt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),nf=function(e){Et(n,e);var t=At(n);function n(){var e;return Dt(this,n),(e=t.apply(this,arguments)).scopes=[],e}return Lt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return Pt(this.scopes)}}]),n}(tf),rf=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return tl(e.idToken||e.accessToken,"argument-error"),Kh._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return tl("providerId"in t&&"signInMethod"in t,"argument-error"),Kh._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(nf),af=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.call(this,"facebook.com")}return Lt(n,null,[{key:"credential",value:function(e){return Kh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(nf);af.FACEBOOK_SIGN_IN_METHOD="facebook.com",af.PROVIDER_ID="facebook.com";var of=function(e){Et(n,e);var t=At(n);function n(){var e;return Dt(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return Lt(n,null,[{key:"credential",value:function(e,t){return Kh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(nf);of.GOOGLE_SIGN_IN_METHOD="google.com",of.PROVIDER_ID="google.com";var uf=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.call(this,"github.com")}return Lt(n,null,[{key:"credential",value:function(e){return Kh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(nf);uf.GITHUB_SIGN_IN_METHOD="github.com",uf.PROVIDER_ID="github.com";var sf=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return Lt(n,[{key:"_getIdTokenResponse",value:function(e){return zh(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,zh(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,zh(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(kh),cf=function(e){Et(n,e);var t=At(n);function n(e){return Dt(this,n),tl(e.startsWith("saml."),"argument-error"),t.call(this,e)}return Lt(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=sf.fromJSON(e);return tl(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return sf._create(r,n)}catch(i){return null}}}]),n}(tf),lf=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.call(this,"twitter.com")}return Lt(n,null,[{key:"credential",value:function(e,t){return Kh._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(nf);function hf(e,t){return ff.apply(this,arguments)}function ff(){return(ff=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kl(t,"POST","/v1/accounts:signUp",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}lf.TWITTER_SIGN_IN_METHOD="twitter.com",lf.PROVIDER_ID="twitter.com";var df=function(){function e(t){Dt(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return Lt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=_t(wt().mark((function t(n,r,i){var a,o,u,s,c=arguments;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Ql._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=pf(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=_t(wt().mark((function t(n,r,i){var a;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=pf(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function pf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function vf(){return vf=_t(wt().mark((function e(t){var n,r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ph(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new df({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,hf(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,df._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),vf.apply(this,arguments)}var yf=function(e){Et(n,e);var t=At(n);function n(e,r,i,a){var o,u;return Dt(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(xt(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return Lt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(on);function mf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw yf._fromErrorAndOperation(e,n,t,r);throw n}))}function gf(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function kf(e,t){return wf.apply(this,arguments)}function wf(){return wf=_t(wt().mark((function e(t,n){var r,i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cn(t),e.next=3,xf(!0,r,n);case 3:return e.t0=Sl,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=gf(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),wf.apply(this,arguments)}function bf(e,t){return _f.apply(this,arguments)}function _f(){return _f=_t(wt().mark((function e(t,n){var r,i,a=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Ol,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",df._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),_f.apply(this,arguments)}function xf(e,t,n){return If.apply(this,arguments)}function If(){return(If=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vl(n);case 2:i=gf(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",tl(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ef(e,t){return Sf.apply(this,arguments)}function Sf(){return Sf=_t(wt().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Ol(t,mf(a,o,n,t),r);case 6:return tl((u=e.sent).idToken,a,"internal-error"),tl(s=Dl(u.idToken),a,"internal-error"),c=s.sub,tl(t.uid===c,a,"user-mismatch"),e.abrupt("return",df._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&$c(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Sf.apply(this,arguments)}function Tf(e,t){return Cf.apply(this,arguments)}function Cf(){return Cf=_t(wt().mark((function e(t,n){var r,i,a,o,u=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,mf(t,i,n);case 4:return a=e.sent,e.next=7,df._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Cf.apply(this,arguments)}function Af(e,t){return Nf.apply(this,arguments)}function Nf(){return(Nf=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tf(ph(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pf(e,t){return Rf.apply(this,arguments)}function Rf(){return(Rf=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cn(t),e.next=3,xf(!1,r,n.providerId);case 3:return e.abrupt("return",bf(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Df(e,t){return Of.apply(this,arguments)}function Of(){return(Of=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ef(Cn(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lf(e,t){return Mf.apply(this,arguments)}function Mf(){return(Mf=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",kl(t,"POST","/v1/accounts:signInWithCustomToken",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ff(){return(Ff=_t(wt().mark((function e(t,n){var r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ph(t),e.next=3,Lf(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,df._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uf=function(){function e(t,n){Dt(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return Lt(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Vf._fromServerResponse(e,t):$c(e,"internal-error")}}]),e}(),Vf=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return Lt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Uf);function jf(e,t,n){var r;tl((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),tl("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(tl(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(tl(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Bf(){return(Bf=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cn(t),a={requestType:"PASSWORD_RESET",email:n},r&&jf(i,a,r),e.next=5,Rh(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qf(){return(qf=_t(wt().mark((function e(t,n,r){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wh(Cn(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zf(){return(zf=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih(Cn(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wf(e,t){return Kf.apply(this,arguments)}function Kf(){return(Kf=_t(wt().mark((function e(t,n){var r,i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cn(t),e.next=3,wh(r,{oobCode:n});case 3:i=e.sent,tl(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return tl(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:tl(i.mfaInfo,r,"internal-error");case 13:tl(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Uf._fromServerResponse(ph(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hf(){return(Hf=_t(wt().mark((function e(t,n){var r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wf(Cn(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gf(e,t,n){return Qf.apply(this,arguments)}function Qf(){return(Qf=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ph(t),e.next=3,hf(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,df._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yf(){return(Yf=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cn(t),a={requestType:"EMAIL_SIGNIN",email:n},tl(r.handleCodeInApp,i,"argument-error"),r&&jf(i,a,r),e.next=6,Oh(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $f(){return($f=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cn(t),tl((a=ef.credentialWithLink(n,r||ol()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Af(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jf(e,t){return Xf.apply(this,arguments)}function Xf(){return(Xf=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:createAuthUri",pl(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zf(){return(Zf=_t(wt().mark((function e(t,n){var r,i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ul()?ol():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Jf(Cn(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ed(){return(ed=_t(wt().mark((function e(t,n){var r,i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cn(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&jf(r.auth,a,n),e.next=8,Nh(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function td(){return(td=_t(wt().mark((function e(t,n,r){var i,a,o,u;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cn(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&jf(i.auth,o,r),e.next=8,Mh(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nd(e,t){return rd.apply(this,arguments)}function rd(){return(rd=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vl(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function id(){return(id=_t(wt().mark((function e(t,n){var r,i,a,o,u,s,c;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Cn(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Ol(a,nd(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ad(e,t,n){return od.apply(this,arguments)}function od(){return(od=_t(wt().mark((function e(t,n,r){var i,a,o,u;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Ol(t,_h(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ud=Lt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Dt(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),sd=function(e){Et(n,e);var t=At(n);function n(e,r,i,a){var o;return Dt(this,n),(o=t.call(this,e,r,i)).username=a,o}return Lt(n)}(ud),cd=function(e){Et(n,e);var t=At(n);function n(e,r){return Dt(this,n),t.call(this,e,"facebook.com",r)}return Lt(n)}(ud),ld=function(e){Et(n,e);var t=At(n);function n(e,r){return Dt(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return Lt(n)}(sd),hd=function(e){Et(n,e);var t=At(n);function n(e,r){return Dt(this,n),t.call(this,e,"google.com",r)}return Lt(n)}(ud),fd=function(e){Et(n,e);var t=At(n);function n(e,r,i){return Dt(this,n),t.call(this,e,"twitter.com",r,i)}return Lt(n)}(sd);function dd(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Dl(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ud(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new cd(a,i);case"github.com":return new ld(a,i);case"google.com":return new hd(a,i);case"twitter.com":return new fd(a,i,e.screenName||null);case"custom":case"anonymous":return new ud(a,null);default:return new ud(a,r,i)}}(n)}var pd=function(){function e(t,n){Dt(this,e),this.type=t,this.credential=n}return Lt(e,[{key:"toJSON",value:function(){return{multiFactorSession:i({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),vd=function(){function e(t,n,r){Dt(this,e),this.session=t,this.hints=n,this.signInResolver=r}return Lt(e,[{key:"resolveSignIn",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ph(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Uf._fromServerResponse(r,e)}));tl(i.mfaPendingCredential,r,"internal-error");var o=pd._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=_t(wt().mark((function e(t){var a,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,df._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return tl(n.user,r,"internal-error"),e.abrupt("return",df._forOperation(n.user,n.operationType,u));case 17:$c(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function yd(e,t){return vl(e,"POST","/v2/accounts/mfaEnrollment:start",pl(e,t))}var md=function(){function e(t){var n=this;Dt(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Uf._fromServerResponse(t.auth,e)})))}))}return Lt(e,[{key:"getSession",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=pd,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=_t(wt().mark((function e(t,n){var r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Ol(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=_t(wt().mark((function e(t){var n,r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Ol(this.user,vl(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",pl(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),gd=new WeakMap;var kd="__sak",wd=function(){function e(t,n){Dt(this,e),this.storageRetriever=t,this.type=n}return Lt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(kd,"1"),this.storage.removeItem(kd),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var bd=function(e){Et(n,e);var t=At(n);function n(){var e;return Dt(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Jt();return th(e)||uh(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=lh(),e._shouldAllowMigration=!0,e}return Lt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);ch()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=_t(wt().mark((function e(t,r){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nc(St(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_t(wt().mark((function e(t){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nc(St(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nc(St(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(wd);bd.type="LOCAL";var _d=bd,xd=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return Lt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(wd);xd.type="SESSION";var Id=xd;function Ed(e){return Promise.all(e.map(function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Sd=function(){function e(t){Dt(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return Lt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=_t(wt().mark((function e(t){var n,r,i,a,o,u,s,c;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Ed(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Td(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Sd.receivers=[];var Cd=function(){function e(t){Dt(this,e),this.target=t,this.handlers=new Set}return Lt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=_t(wt().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Td("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ad(){return window}function Nd(){return"undefined"!==typeof Ad().WorkerGlobalScope&&"function"===typeof Ad().importScripts}function Pd(){return Rd.apply(this,arguments)}function Rd(){return(Rd=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Dd(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Od="firebaseLocalStorageDb",Ld="firebaseLocalStorage",Md="fbase_key",Fd=function(){function e(t){Dt(this,e),this.request=t}return Lt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ud(e,t){return e.transaction([Ld],t?"readwrite":"readonly").objectStore(Ld)}function Vd(){var e=indexedDB.deleteDatabase(Od);return new Fd(e).toPromise()}function jd(){var e=indexedDB.open(Od,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Ld,{keyPath:Md})}catch(r){n(r)}})),e.addEventListener("success",_t(wt().mark((function n(){var r;return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Ld)){n.next=12;break}return r.close(),n.next=5,Vd();case 5:return n.t0=t,n.next=8,jd();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Bd(e,t,n){return qd.apply(this,arguments)}function qd(){return qd=_t(wt().mark((function e(t,n,r){var a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ud(t,!0).put((i(a={},Md,n),i(a,"value",r),a)),e.abrupt("return",new Fd(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),qd.apply(this,arguments)}function zd(e,t){return Wd.apply(this,arguments)}function Wd(){return Wd=_t(wt().mark((function e(t,n){var r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ud(t,!1).get(n),e.next=3,new Fd(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Wd.apply(this,arguments)}function Kd(e,t){var n=Ud(e,!0).delete(t);return new Fd(n).toPromise()}var Hd=function(){function e(){Dt(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return Lt(e,[{key:"_openDb",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,jd();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Nd()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=_t(wt().mark((function e(){var t=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Sd._getInstance(Nd()?self:null),this.receiver._subscribe("keyChanged",function(){var e=_t(wt().mark((function e(n,r){var i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=_t(wt().mark((function e(){var t,n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pd();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Cd(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Dd()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,jd();case 5:return t=e.sent,e.next=8,Bd(t,kd,"1");case 8:return e.next=10,Kd(t,kd);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=_t(wt().mark((function e(t,n){var r=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Bd(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return zd(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=_t(wt().mark((function e(t){var n=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Kd(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=_t(wt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ud(e,!1).getAll();return new Fd(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=Rt(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(_t(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Hd.type="LOCAL";var Gd=Hd;function Qd(e,t){return vl(e,"POST","/v2/accounts/mfaSignIn:start",pl(e,t))}function Yd(e){return $d.apply(this,arguments)}function $d(){return($d=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vl(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jd(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Jc("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Xd(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Zd=1e12,ep=function(){function e(t){Dt(this,e),this.auth=t,this.counter=Zd,this._widgets=new Map}return Lt(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new tp(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Zd;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Zd;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Zd,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),tp=function(){function e(t,n,r){var i=this;Dt(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;tl(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return Lt(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var np=Xd("rcb"),rp=new cl(3e4,6e4),ip="https://www.google.com/recaptcha/api.js?",ap=function(){function e(){var t;Dt(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Ad().grecaptcha)||void 0===t?void 0:t.render)}return Lt(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return tl(op(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ad().grecaptcha):new Promise((function(r,i){var a=Ad().setTimeout((function(){i(Jc(e,"network-request-failed"))}),rp.get());Ad()[np]=function(){Ad().clearTimeout(a),delete Ad()[np];var o=Ad().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Jc(e,"internal-error"))},Jd("".concat(ip,"?").concat(kn({onload:np,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Jc(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Ad().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function op(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var up=function(){function e(){Dt(this,e)}return Lt(e,[{key:"load",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ep(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),sp="recaptcha",cp={theme:"light",type:"image"},lp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},cp),r=arguments.length>2?arguments[2]:void 0;Dt(this,e),this.parameters=n,this.type=sp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ph(r),this.isInvisible="invisible"===this.parameters.size,tl("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;tl(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new up:new ap,this.validateStartingState()}return Lt(e,[{key:"verify",value:function(){var e=_t(wt().mark((function e(){var t,n,r,i=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){tl(!this.parameters.sitekey,this.auth,"argument-error"),tl(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tl("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ad()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){tl(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=_t(wt().mark((function e(){var t,n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tl(ul()&&!Nd(),this.auth,"internal-error"),e.next=3,hp();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Yd(this.auth);case 8:tl(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return tl(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function hp(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var fp=function(){function e(t,n){Dt(this,e),this.verificationId=t,this.onConfirmation=n}return Lt(e,[{key:"confirm",value:function(e){var t=Xh._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function dp(){return(dp=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ph(t),e.next=3,mp(i,n,Cn(r));case 3:return a=e.sent,e.abrupt("return",new fp(a,(function(e){return Af(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pp(e,t,n){return vp.apply(this,arguments)}function vp(){return(vp=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cn(t),e.next=3,xf(!1,i,"phone");case 3:return e.next=5,mp(i.auth,n,Cn(r));case 5:return a=e.sent,e.abrupt("return",new fp(a,(function(e){return Pf(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yp(){return(yp=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Cn(t),e.next=3,mp(i.auth,n,Cn(r));case 3:return a=e.sent,e.abrupt("return",new fp(a,(function(e){return Df(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mp(e,t,n){return gp.apply(this,arguments)}function gp(){return gp=_t(wt().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,tl("string"===typeof a,t,"argument-error"),tl(r.type===sp,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return tl("enroll"===u.type,t,"internal-error"),e.next=13,yd(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return tl("signin"===u.type,t,"internal-error"),tl(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Qd(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Hh(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),gp.apply(this,arguments)}function kp(){return(kp=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bf(Cn(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wp=function(){function e(t){Dt(this,e),this.providerId=e.PROVIDER_ID,this.auth=ph(t)}return Lt(e,[{key:"verifyPhoneNumber",value:function(e,t){return mp(this.auth,e,Cn(t))}}],[{key:"credential",value:function(e,t){return Xh._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Xh._fromTokenResponse(n,r):null}}]),e}();function bp(e,t){return t?al(t):(tl(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}wp.PROVIDER_ID="phone",wp.PHONE_SIGN_IN_METHOD="phone";var _p=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this,"custom","custom")).params=e,r}return Lt(n,[{key:"_getIdTokenResponse",value:function(e){return zh(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return zh(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return zh(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(kh);function xp(e){return Tf(e.auth,new _p(e),e.bypassAuthState)}function Ip(e){var t=e.auth,n=e.user;return tl(n,t,"internal-error"),Ef(n,new _p(e),e.bypassAuthState)}function Ep(e){return Sp.apply(this,arguments)}function Sp(){return(Sp=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,tl(r=t.user,n,"internal-error"),e.abrupt("return",bf(r,new _p(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Tp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];Dt(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return Lt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=_t(wt().mark((function t(n,r){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=_t(wt().mark((function e(t){var n,r,i,a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xp;case"linkViaPopup":case"linkViaRedirect":return Ep;case"reauthViaPopup":case"reauthViaRedirect":return Ip;default:$c(this.auth,"internal-error")}}},{key:"resolve",value:function(e){rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){rl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Cp=new cl(2e3,1e4);function Ap(e,t,n){return Np.apply(this,arguments)}function Np(){return(Np=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ph(t),Zc(t,n,tf),a=bp(i,r),o=new Op(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pp(){return(Pp=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zc((i=Cn(t)).auth,n,tf),a=bp(i.auth,r),o=new Op(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rp(e,t,n){return Dp.apply(this,arguments)}function Dp(){return(Dp=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zc((i=Cn(t)).auth,n,tf),a=bp(i.auth,r),o=new Op(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Op=function(e){Et(n,e);var t=At(n);function n(e,r,i,a,o){var u;return Dt(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=xt(u),u}return Lt(n,[{key:"executeNotNull",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return tl(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=_t(wt().mark((function e(){var t,n=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rl(1===this.filter.length,"Popup operations only handle one event"),t=Td(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Jc(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Jc(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Jc(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Cp.get())}()}}]),n}(Tp);Op.currentPopupAction=null;var Lp=new Map,Mp=function(e){Et(n,e);var t=At(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Dt(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return Lt(n,[{key:"execute",value:function(){var e=_t(wt().mark((function e(){var t,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Lp.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Fp(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Nc(St(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Lp.set(this.auth._key(),t);case 21:return this.bypassAuthState||Lp.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=_t(wt().mark((function e(t){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Nc(St(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Nc(St(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Tp);function Fp(e,t){return Up.apply(this,arguments)}function Up(){return(Up=_t(wt().mark((function e(t,n){var r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=zp(n),i=qp(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vp(e,t){return jp.apply(this,arguments)}function jp(){return(jp=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",qp(t)._set(zp(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bp(e,t){Lp.set(e._key(),t)}function qp(e){return al(e._redirectPersistence)}function zp(e){return Jl("pendingRedirect",e.config.apiKey,e.name)}function Wp(e,t,n){return function(e,t,n){return Kp.apply(this,arguments)}(e,t,n)}function Kp(){return(Kp=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ph(t),Zc(t,n,tf),a=bp(i,r),e.next=5,Vp(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hp(e,t,n){return function(e,t,n){return Gp.apply(this,arguments)}(e,t,n)}function Gp(){return(Gp=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zc((i=Cn(t)).auth,n,tf),a=bp(i.auth,r),e.next=5,Vp(a,i.auth);case 5:return e.next=7,ev(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qp(e,t,n){return function(e,t,n){return Yp.apply(this,arguments)}(e,t,n)}function Yp(){return(Yp=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zc((i=Cn(t)).auth,n,tf),a=bp(i.auth,r),e.next=5,xf(!1,i,n.providerId);case 5:return e.next=7,Vp(a,i.auth);case 7:return e.next=9,ev(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $p(e,t){return Jp.apply(this,arguments)}function Jp(){return(Jp=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ph(t)._initializationPromise;case 2:return e.abrupt("return",Xp(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xp(e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=_t(wt().mark((function e(t,n){var r,i,a,o,u,s=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=ph(t),a=bp(i,n),o=new Mp(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Zp.apply(this,arguments)}function ev(e){return tv.apply(this,arguments)}function tv(){return(tv=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Td("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nv=function(){function e(t){Dt(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return Lt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iv(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!iv(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Jc(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rv(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(rv(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function rv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function iv(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function av(e){return ov.apply(this,arguments)}function ov(){return ov=_t(wt().mark((function e(t){var n,r=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",vl(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ov.apply(this,arguments)}var uv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sv=/^https?/;function cv(){return(cv=_t(wt().mark((function e(t){var n,r,i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,av(t);case 4:n=e.sent,r=n.authorizedDomains,i=Rt(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!lv(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:$c(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function lv(e){var t=ol(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!sv.test(r))return!1;if(uv.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var hv=new cl(3e4,6e4);function fv(){var e=Ad().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=Pt(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var dv=null;function pv(e){return dv=dv||function(e){return new Promise((function(t,n){var r,i,a;function o(){fv(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){fv(),n(Jc(e,"network-request-failed"))},timeout:hv.get()})}if(null===(i=null===(r=Ad().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ad().gapi)||void 0===a?void 0:a.load)){var u=Xd("iframefcb");return Ad()[u]=function(){gapi.load?o():n(Jc(e,"network-request-failed"))},Jd("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw dv=null,e}))}(e),dv}var vv=new cl(5e3,15e3),yv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gv(e){var t=e.config;tl(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?ll(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:_r},i=mv.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(kn(r).slice(1))}function kv(e){return wv.apply(this,arguments)}function wv(){return wv=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pv(t);case 2:return n=e.sent,tl(r=Ad().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:gv(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yv,dontclear:!0},(function(e){return new Promise(function(){var n=_t(wt().mark((function n(r,i){var a,o,u;return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ad().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Jc(t,"network-request-failed"),o=Ad().setTimeout((function(){i(a)}),vv.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),wv.apply(this,arguments)}var bv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_v="_blank",xv="http://localhost",Iv=function(){function e(t){Dt(this,e),this.window=t,this.associatedEvent=null}return Lt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ev(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},bv),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Jt().toLowerCase();n&&(u=nh(c)?_v:n),eh(c)&&(t=t||xv,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=gt(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(sh(c)&&"_self"!==u)return Sv(t||"",u),new Iv(null);var h=window.open(t||"",u,l);tl(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Iv(h)}function Sv(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Tv="__/auth/handler",Cv="emulator/auth/handler";function Av(e,t,n,r,i,a){tl(e.config.authDomain,e,"auth-domain-config-required"),tl(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:_r,eventId:i};if(t instanceof tf){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",vn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=gt(s[u],2),l=c[0],h=c[1];o[l]=h}}if(t instanceof nf){var f=t.getScopes().filter((function(e){return""!==e}));f.length>0&&(o.scopes=f.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var d=o,p=0,v=Object.keys(d);p<v.length;p++){var y=v[p];void 0===d[y]&&delete d[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Tv);return ll(t,Cv)}(e),"?").concat(kn(d).slice(1))}var Nv="webStorageSupport",Pv=function(){function e(){Dt(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Id,this._completeRedirectFn=Xp,this._overrideRedirectResult=Bp}return Lt(e,[{key:"_openPopup",value:function(){var e=_t(wt().mark((function e(t,n,r,i){var a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rl(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Av(t,n,r,ol(),i),e.abrupt("return",Ev(t,o,Td()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=_t(wt().mark((function e(t,n,r,i){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Av(t,n,r,ol(),i),Ad().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(rl(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kv(t);case 2:return n=e.sent,r=new nv(t),n.register("authEvent",(function(e){return tl(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Nv,{type:Nv},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),$c(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return cv.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return lh()||th()||uh()}}]),e}(),Rv=Pv,Dv=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this,"phone")).credential=e,r}return Lt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return vl(e,"POST","/v2/accounts/mfaEnrollment:finalize",pl(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return vl(e,"POST","/v2/accounts/mfaSignIn:finalize",pl(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){Dt(this,e),this.factorId=t}return Lt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return nl("unexpected MultiFactorSessionType")}}}]),e}()),Ov=function(){function e(){Dt(this,e)}return Lt(e,null,[{key:"assertion",value:function(e){return Dv._fromCredential(e)}}]),e}();Ov.FACTOR_ID="phone";var Lv,Mv="@firebase/auth",Fv="0.20.5",Uv=function(){function e(t){Dt(this,e),this.auth=t,this.internalListeners=new Map}return Lt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){tl(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Vv(){return window}Lv="Browser",vr(new An("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){tl(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),tl(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Lv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hh(Lv)},i=new dh(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(al);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),vr(new An("auth-internal",(function(e){return function(e){return new Uv(e)}(ph(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(Mv,Fv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Lv)),Cr(Mv,Fv,"esm2017");function jv(e,t,n){return Bv.apply(this,arguments)}function Bv(){return Bv=_t(wt().mark((function e(t,n,r){var i,a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Vv(),o=a.BuildInfo,rl(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Gv(n.sessionId);case 4:return u=e.sent,s={},uh()?s.ibi=o.packageName:ih()?s.apn=o.packageName:$c(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Av(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}function qv(){return(qv=_t(wt().mark((function e(t){var n,r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Vv(),r=n.BuildInfo,i={},uh()?i.iosBundleId=r.packageName:ih()?i.androidPackageName=r.packageName:$c(t,"operation-not-supported-in-this-environment"),e.next=5,av(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zv(e){var t=Vv().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Wv(e,t,n){return Kv.apply(this,arguments)}function Kv(){return Kv=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Vv(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Jc(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),ih()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Kv.apply(this,arguments)}function Hv(e){var t,n,r,i,a,o,u,s,c,l,h=Vv();tl("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tl("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tl("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tl("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tl("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Gv(e){return Qv.apply(this,arguments)}function Qv(){return(Qv=_t(wt().mark((function e(t){var n,r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yv(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yv(e){if(rl(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var $v=function(e){Et(n,e);var t=At(n);function n(){var e;return Dt(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return Lt(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Nc(St(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(nv);function Jv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:ny(),postBody:null,tenantId:e.tenantId,error:Jc(e,"no-auth-event")}}function Xv(e,t){return ry()._set(iy(e),t)}function Zv(e){return ey.apply(this,arguments)}function ey(){return(ey=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ry()._get(iy(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,ry()._remove(iy(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ty(e,t){var n,r,i=function(e){var t=ay(e),n=t.link?decodeURIComponent(t.link):void 0,r=ay(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return ay(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=ay(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Jc(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ny(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function ry(){return al(_d)}function iy(e){return Jl("authEvent",e.config.apiKey,e.name)}function ay(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=pt(t=n)||Nt(t)||yt(t)||mt();r[0];return wn(r.slice(1).join("?"))}var oy=function(){function e(){Dt(this,e),this._redirectPersistence=Id,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Xp,this._overrideRedirectResult=Bp}return Lt(e,[{key:"_initialize",value:function(){var e=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new $v(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){$c(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=_t(wt().mark((function e(t,n,r,i){var a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Hv(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Lp.clear(),e.next=10,this._originValidation(t);case 10:return o=Jv(t,r,i),e.next=13,Xv(t,o);case 13:return e.next=15,jv(t,o,n);case 15:return u=e.sent,e.next=18,zv(u);case 18:return s=e.sent,e.abrupt("return",Wv(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return qv.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Vv(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(_t(wt().mark((function n(){return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zv(e);case 2:t.onEvent(sy());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=_t(wt().mark((function n(r){var i,a;return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Zv(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ty(i,r.url)),t.onEvent(a||sy());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Vv().handleOpenURL=function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),uy=oy;function sy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Jc("no-auth-event")}}function cy(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function ly(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return!("file:"!==cy()&&"ionic:"!==cy()&&"capacitor:"!==cy()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function hy(){return nn()&&11===(null===document||void 0===document?void 0:document.documentMode)}function fy(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return/Edge\/\d+/.test(e)}function dy(){try{var e=self.localStorage,t=Td();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt();return hy()||fy(e)}()||an()}catch(n){return py()&&an()}return!1}function py(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function vy(){return("http:"===cy()||"https:"===cy()||en()||ly())&&!(tn()||Zt())&&dy()&&!py()}function yy(){return ly()&&"undefined"!==typeof document}function my(){return gy.apply(this,arguments)}function gy(){return(gy=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(yy()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ky={LOCAL:"local",NONE:"none",SESSION:"session"},wy=tl,by="persistence";function _y(e,t){wy(Object.values(ky).includes(t),e,"invalid-persistence-type"),tn()?wy(t!==ky.SESSION,e,"unsupported-persistence-type"):Zt()?wy(t===ky.NONE,e,"unsupported-persistence-type"):py()?wy(t===ky.NONE||t===ky.LOCAL&&an(),e,"unsupported-persistence-type"):wy(t===ky.NONE||dy(),e,"unsupported-persistence-type")}function xy(e){return Iy.apply(this,arguments)}function Iy(){return(Iy=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ey(),r=Jl(by,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ey(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Sy=tl,Ty=function(){function e(){Dt(this,e),this.browserResolver=al(Rv),this.cordovaResolver=al(uy),this.underlyingResolver=null,this._redirectPersistence=Id,this._completeRedirectFn=Xp,this._overrideRedirectResult=Bp}return Lt(e,[{key:"_initialize",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=_t(wt().mark((function e(t,n,r,i){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=_t(wt().mark((function e(t,n,r,i){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return yy()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Sy(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,my();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Cy(e){return e.unwrap()}function Ay(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new Oy(e,function(e,t){var n,r=Cn(e),i=t;return tl(t.customData.operationType,r,"argument-error"),tl(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),vd._fromError(r,i)}(e,t));else if(i){var a=Ny(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Ny(e){var t=(e instanceof on?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof on)&&"temporaryProof"in t&&"phoneNumber"in t)return wp.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Mc)return null;switch(r){case Lc:n=of;break;case Dc:n=af;break;case Oc:n=uf;break;case Fc:n=lf;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?sf._create(r,u):Kh._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new rf(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof on?n.credentialFromError(e):n.credentialFromResult(e)}function Py(e,t){return t.catch((function(t){throw t instanceof on&&Ay(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ny(t)),additionalUserInfo:dd(e),user:Ly.getOrCreate(r)}}))}function Ry(e,t){return Dy.apply(this,arguments)}function Dy(){return(Dy=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Py(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oy=function(){function e(t,n){Dt(this,e),this.resolver=n,this.auth=t.wrapped()}return Lt(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Py(Cy(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Ly=function(){function e(t){Dt(this,e),this._delegate=t,this.multiFactor=function(e){var t=Cn(e);return gd.has(t)||gd.set(t,md._fromUser(t)),gd.get(t)}(t)}return Lt(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Py(this.auth,Pf(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ry(this.auth,pp(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Py(this.auth,Rp(this._delegate,t,Ty)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xy(ph(this.auth));case 2:return e.abrupt("return",Qp(this._delegate,t,Ty));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Py(this.auth,Df(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Ry(this.auth,function(e,t,n){return yp.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Py(this.auth,function(e,t,n){return Pp.apply(this,arguments)}(this._delegate,e,Ty))}},{key:"reauthenticateWithRedirect",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xy(ph(this.auth));case 2:return e.abrupt("return",Hp(this._delegate,t,Ty));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return ed.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kf(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ad(Cn(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ad(Cn(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return kp.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return id.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return td.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Ly.USER_MAP=new WeakMap;var My=tl,Fy=function(){function e(t,n){if(Dt(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;My(r,"invalid-api-key",{appName:t.name}),My(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ty:void 0;this._delegate=n.initialize({options:{persistence:Vy(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Kc),this.linkUnderlyingAuth()}return Lt(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Ly.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){yh(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return zf.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Wf(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return qf.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Py(this._delegate,Gf(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Zf.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Zh.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return My(vy(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,$p(this._delegate,Ty);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Py(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ph(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Uy(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Uy(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Yf.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Bf.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_y(this._delegate,t),e.t0=t,e.next=e.t0===ky.SESSION?4:e.t0===ky.LOCAL?6:e.t0===ky.NONE?11:13;break;case 4:return n=Id,e.abrupt("break",14);case 6:return e.next=8,al(Gd)._isAvailable();case 8:return r=e.sent,n=r?Gd:_d,e.abrupt("break",14);case 11:return n=$l,e.abrupt("break",14);case 13:return e.abrupt("return",$c("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Py(this._delegate,function(e){return vf.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Py(this._delegate,Af(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Py(this._delegate,function(e,t){return Ff.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Py(this._delegate,function(e,t,n){return Af(Cn(e),ef.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Py(this._delegate,function(e,t,n){return $f.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Ry(this._delegate,function(e,t,n){return dp.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return My(vy(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Py(this._delegate,Ap(this._delegate,t,Ty)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return My(vy(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,xy(this._delegate);case 3:return e.abrupt("return",Wp(this._delegate,t,Ty));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Hf.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Uy(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Ly.getOrCreate(e))},error:t,complete:n}}function Vy(e,t){var n=function(e,t){var n=Ey();if(!n)return[];var r=Jl(by,e,t);switch(n.getItem(r)){case ky.NONE:return[$l];case ky.LOCAL:return[Gd,Id];case ky.SESSION:return[Id];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Gd)||n.push(Gd),"undefined"!==typeof window)for(var r=0,i=[_d,Id];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes($l)||n.push($l),n}Fy.Persistence=ky;var jy=function(){function e(){Dt(this,e),this.providerId="phone",this._delegate=new wp(Cy(Cc.auth()))}return Lt(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return wp.credential(e,t)}}]),e}();jy.PHONE_SIGN_IN_METHOD=wp.PHONE_SIGN_IN_METHOD,jy.PROVIDER_ID=wp.PROVIDER_ID;var By,qy=tl,zy=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cc.app();Dt(this,e),qy(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new lp(t,n,i.auth()),this.type=this._delegate.type}return Lt(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(By=Cc).INTERNAL.registerComponent(new An("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Fy(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Uc,PASSWORD_RESET:Vc,RECOVER_EMAIL:jc,REVERT_SECOND_FACTOR_ADDITION:Bc,VERIFY_AND_CHANGE_EMAIL:qc,VERIFY_EMAIL:zc}},EmailAuthProvider:ef,FacebookAuthProvider:af,GithubAuthProvider:uf,GoogleAuthProvider:of,OAuthProvider:rf,SAMLAuthProvider:cf,PhoneAuthProvider:jy,PhoneMultiFactorGenerator:Ov,RecaptchaVerifier:zy,TwitterAuthProvider:lf,Auth:Fy,AuthCredential:kh,Error:on}).setInstantiationMode("LAZY").setMultipleInstances(!1)),By.registerVersion("@firebase/auth-compat","0.2.18");var Wy,Ky="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Hy={},Gy=Gy||{},Qy=Ky||self;function Yy(){}function $y(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Jy(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Xy="closure_uid_"+(1e9*Math.random()>>>0),Zy=0;function em(e,t,n){return e.call.apply(e.bind,arguments)}function tm(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function nm(e,t,n){return(nm=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?em:tm).apply(null,arguments)}function rm(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function im(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function am(){this.s=this.s,this.o=this.o}var om={};am.prototype.s=!1,am.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Xy)&&e[Xy]||(e[Xy]=++Zy)}(this);delete om[e]}},am.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var um=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},sm=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function cm(e){return Array.prototype.concat.apply([],arguments)}function lm(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function hm(e){return/^[\s\xa0]*$/.test(e)}var fm,dm=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function pm(e,t){return-1!=e.indexOf(t)}function vm(e,t){return e<t?-1:e>t?1:0}e:{var ym=Qy.navigator;if(ym){var mm=ym.userAgent;if(mm){fm=mm;break e}}fm=""}function gm(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function km(e){var t={};for(var n in e)t[n]=e[n];return t}var wm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bm(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<wm.length;a++)n=wm[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _m(e){return _m[" "](e),e}_m[" "]=Yy;var xm,Im=pm(fm,"Opera"),Em=pm(fm,"Trident")||pm(fm,"MSIE"),Sm=pm(fm,"Edge"),Tm=Sm||Em,Cm=pm(fm,"Gecko")&&!(pm(fm.toLowerCase(),"webkit")&&!pm(fm,"Edge"))&&!(pm(fm,"Trident")||pm(fm,"MSIE"))&&!pm(fm,"Edge"),Am=pm(fm.toLowerCase(),"webkit")&&!pm(fm,"Edge");function Nm(){var e=Qy.document;return e?e.documentMode:void 0}e:{var Pm="",Rm=function(){var e=fm;return Cm?/rv:([^\);]+)(\)|;)/.exec(e):Sm?/Edge\/([\d\.]+)/.exec(e):Em?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Am?/WebKit\/(\S+)/.exec(e):Im?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Rm&&(Pm=Rm?Rm[1]:""),Em){var Dm=Nm();if(null!=Dm&&Dm>parseFloat(Pm)){xm=String(Dm);break e}}xm=Pm}var Om,Lm={};function Mm(){return function(e){var t=Lm;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=dm(String(xm)).split("."),n=dm("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=vm(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||vm(0==a[2].length,0==o[2].length)||vm(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Qy.document&&Em){var Fm=Nm();Om=Fm||(parseInt(xm,10)||void 0)}else Om=void 0;var Um=Om,Vm=function(){if(!Qy.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Qy.addEventListener("test",Yy,t),Qy.removeEventListener("test",Yy,t)}catch(n){}return e}();function jm(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Bm(e,t){if(jm.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Cm){e:{try{_m(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:qm[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bm.Z.h.call(this)}}jm.prototype.h=function(){this.defaultPrevented=!0},im(Bm,jm);var qm={2:"touch",3:"pen",4:"mouse"};Bm.prototype.h=function(){Bm.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var zm="closure_listenable_"+(1e6*Math.random()|0),Wm=0;function Km(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Wm,this.ca=this.fa=!1}function Hm(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Gm(e){this.src=e,this.g={},this.h=0}function Qm(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=um(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Hm(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ym(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}Gm.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ym(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Km(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var $m="closure_lm_"+(1e6*Math.random()|0),Jm={};function Xm(e,t,n,r,i){if(r&&r.once)return eg(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Xm(e,t[a],n,r,i);return null}return n=ug(n),e&&e[zm]?e.N(t,n,Jy(r)?!!r.capture:!!r,i):Zm(e,t,n,!1,r,i)}function Zm(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Jy(i)?!!i.capture:!!i,u=ag(e);if(u||(e[$m]=u=new Gm(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=ig;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Vm||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(rg(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function eg(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)eg(e,t[a],n,r,i);return null}return n=ug(n),e&&e[zm]?e.O(t,n,Jy(r)?!!r.capture:!!r,i):Zm(e,t,n,!0,r,i)}function tg(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)tg(e,t[a],n,r,i);else r=Jy(r)?!!r.capture:!!r,n=ug(n),e&&e[zm]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ym(a=e.g[t],n,r,i))&&(Hm(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=ag(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ym(t,n,r,i)),(n=-1<e?t[e]:null)&&ng(n))}function ng(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[zm])Qm(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(rg(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ag(t))?(Qm(n,e),0==n.h&&(n.src=null,t[$m]=null)):Hm(e)}}}function rg(e){return e in Jm?Jm[e]:Jm[e]="on"+e}function ig(e,t){if(e.ca)e=!0;else{t=new Bm(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ng(e),e=n.call(r,t)}return e}function ag(e){return(e=e[$m])instanceof Gm?e:null}var og="__closure_events_fn_"+(1e9*Math.random()>>>0);function ug(e){return"function"===typeof e?e:(e[og]||(e[og]=function(t){return e.handleEvent(t)}),e[og])}function sg(){am.call(this),this.i=new Gm(this),this.P=this,this.I=null}function cg(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new jm(t,e);else if(t instanceof jm)t.target=t.target||e;else{var i=t;bm(t=new jm(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=lg(o,r,!0,t)&&i}if(i=lg(o=t.g=e,r,!0,t)&&i,i=lg(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=lg(o=t.g=n[a],r,!1,t)&&i}function lg(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&Qm(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}im(sg,am),sg.prototype[zm]=!0,sg.prototype.removeEventListener=function(e,t,n,r){tg(this,e,t,n,r)},sg.prototype.M=function(){if(sg.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Hm(n[r]);delete t.g[e],t.h--}}this.I=null},sg.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},sg.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var hg=Qy.JSON.stringify;function fg(){var e=wg,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var dg,pg=function(){function e(){Dt(this,e),this.h=this.g=null}return Lt(e,[{key:"add",value:function(e,t){var n=vg.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),vg=new(function(){function e(t,n){Dt(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return Lt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new yg}),(function(e){return e.reset()})),yg=function(){function e(){Dt(this,e),this.next=this.g=this.h=null}return Lt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function mg(e){Qy.setTimeout((function(){throw e}),0)}function gg(e,t){dg||function(){var e=Qy.Promise.resolve(void 0);dg=function(){e.then(bg)}}(),kg||(dg(),kg=!0),wg.add(e,t)}var kg=!1,wg=new pg;function bg(){for(var e;e=fg();){try{e.h.call(e.g)}catch(n){mg(n)}var t=vg;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}kg=!1}function _g(e,t){sg.call(this),this.h=e||1,this.g=t||Qy,this.j=nm(this.kb,this),this.l=Date.now()}function xg(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Ig(e,t,n){if("function"===typeof e)n&&(e=nm(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=nm(e.handleEvent,e)}return 2147483647<Number(t)?-1:Qy.setTimeout(e,t||0)}function Eg(e){e.g=Ig((function(){e.g=null,e.i&&(e.i=!1,Eg(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}im(_g,sg),(Wy=_g.prototype).da=!1,Wy.S=null,Wy.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cg(this,"tick"),this.da&&(xg(this),this.start()))}},Wy.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Wy.M=function(){_g.Z.M.call(this),xg(this),delete this.g};var Sg=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return Lt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Eg(this)}},{key:"M",value:function(){Nc(St(n.prototype),"M",this).call(this),this.g&&(Qy.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(am);function Tg(e){am.call(this),this.h=e,this.g={}}im(Tg,am);var Cg=[];function Ag(e,t,n,r){Array.isArray(n)||(n&&(Cg[0]=n.toString()),n=Cg);for(var i=0;i<n.length;i++){var a=Xm(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Ng(e){gm(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ng(e)}),e),e.g={}}function Pg(){this.g=!0}function Rg(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return hg(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Tg.prototype.M=function(){Tg.Z.M.call(this),Ng(this)},Tg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pg.prototype.Aa=function(){this.g=!1},Pg.prototype.info=function(){};var Dg={},Og=null;function Lg(){return Og=Og||new sg}function Mg(e){jm.call(this,Dg.Ma,e)}function Fg(e){var t=Lg();cg(t,new Mg(t,e))}function Ug(e,t){jm.call(this,Dg.STAT_EVENT,e),this.stat=t}function Vg(e){var t=Lg();cg(t,new Ug(t,e))}function jg(e,t){jm.call(this,Dg.Na,e),this.size=t}function Bg(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Qy.setTimeout((function(){e()}),t)}Dg.Ma="serverreachability",im(Mg,jm),Dg.STAT_EVENT="statevent",im(Ug,jm),Dg.Na="timingevent",im(jg,jm);var qg={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},zg={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Wg(){}function Kg(e){return e.h||(e.h=e.i())}function Hg(){}Wg.prototype.h=null;var Gg,Qg={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Yg(){jm.call(this,"d")}function $g(){jm.call(this,"c")}function Jg(){}function Xg(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Tg(this),this.P=ek,e=Tm?125:void 0,this.W=new _g(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Zg}function Zg(){this.i=null,this.g="",this.h=!1}im(Yg,jm),im($g,jm),im(Jg,Wg),Jg.prototype.g=function(){return new XMLHttpRequest},Jg.prototype.i=function(){return{}},Gg=new Jg;var ek=45e3,tk={},nk={};function rk(e,t,n){e.K=1,e.v=Sk(wk(t)),e.s=n,e.U=!0,ik(e,null)}function ik(e,t){e.F=Date.now(),sk(e),e.A=wk(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Vk(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Zg,e.g=Bw(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Sg(nm(e.Ia,e,e.g),e.O)),Ag(e.V,e.g,"readystatechange",e.gb),t=e.H?km(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Fg(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function ak(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function ok(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=uk(e,n))==nk){4==t&&(e.o=4,Vg(14),i=!1),Rg(e.j,e.m,null,"[Incomplete Response]");break}if(r==tk){e.o=4,Vg(15),Rg(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Rg(e.j,e.m,r,null),dk(e,r)}ak(e)&&r!=nk&&r!=tk&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Vg(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Dw(t),t.L=!0,Vg(11))):(Rg(e.j,e.m,n,"[Invalid Chunked Response]"),fk(e),hk(e))}function uk(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?nk:(n=Number(t.substring(n,r)),isNaN(n)?tk:(r+=1)+n>t.length?nk:(t=t.substr(r,n),e.C=r+n,t))}function sk(e){e.Y=Date.now()+e.P,ck(e,e.P)}function ck(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Bg(nm(e.eb,e),t)}function lk(e){e.B&&(Qy.clearTimeout(e.B),e.B=null)}function hk(e){0==e.l.G||e.I||Mw(e.l,e)}function fk(e){lk(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,xg(e.W),Ng(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function dk(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Gk(n.i,e)))if(n.I=e.N,!e.J&&Gk(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Lw(n),Iw(n)}Rw(n),Vg(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Bg(nm(n.ab,n),6e3));if(1>=Hk(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Uw(n,11)}else if((e.J||n.g==e)&&Lw(n),!hm(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(pm(l,"spdy")||pm(l,"quic")||pm(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Qk(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ek(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=jw(r,r.H?r.la:null,r.W),d.J){Yk(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(lk(p),sk(p)),r.g=d}else Pw(r);0<n.l.length&&Tw(n)}else"stop"!=a[0]&&"close"!=a[0]||Uw(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Uw(n,7):xw(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}Fg(4)}catch(a){}}function pk(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if($y(e)||"string"===typeof e)sm(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if($y(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if($y(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function vk(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof vk)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function yk(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];mk(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)mk(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function mk(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Wy=Xg.prototype).setTimeout=function(e){this.P=e},Wy.gb=function(e){e=e.target;var t=this.L;t&&3==gw(e)?t.l():this.Ia(e)},Wy.Ia=function(e){try{if(e==this.g)e:{var t=gw(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Tm||this.g&&(this.h.h||this.g.ga()||kw(this.g)))){this.I||4!=t||7==n||Fg(8==n||0>=r?3:2),lk(this);var i=this.g.ba();this.N=i;t:if(ak(this)){var a=kw(this.g);e="";var o=a.length,u=4==gw(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){fk(this),hk(this);var s="";break t}this.h.i=new Qy.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hm(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Vg(12),fk(this),hk(this);break e}Rg(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,dk(this,i)}this.U?(ok(this,t,s),Tm&&this.i&&3==t&&(Ag(this.V,this.W,"tick",this.fb),this.W.start())):(Rg(this.j,this.m,s,null),dk(this,s)),4==t&&fk(this),this.i&&!this.I&&(4==t?Mw(this.l,this):(this.i=!1,sk(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Vg(12)):(this.o=0,Vg(13)),fk(this),hk(this)}}}catch(t){}},Wy.fb=function(){if(this.g){var e=gw(this.g),t=this.g.ga();this.C<t.length&&(lk(this),ok(this,e,t),this.i&&4!=e&&sk(this))}},Wy.cancel=function(){this.I=!0,fk(this)},Wy.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(Fg(3),Vg(17)),fk(this),this.o=2,hk(this)):ck(this,this.Y-e)},(Wy=vk.prototype).R=function(){yk(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Wy.T=function(){return yk(this),this.g.concat()},Wy.get=function(e,t){return mk(this.h,e)?this.h[e]:t},Wy.set=function(e,t){mk(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Wy.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var gk=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kk(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof kk){this.g=void 0!==t?t:e.g,bk(this,e.j),this.s=e.s,_k(this,e.i),xk(this,e.m),this.l=e.l,t=e.h;var n=new Lk;n.i=t.i,t.g&&(n.g=new vk(t.g),n.h=t.h),Ik(this,n),this.o=e.o}else e&&(n=String(e).match(gk))?(this.g=!!t,bk(this,n[1]||"",!0),this.s=Tk(n[2]||""),_k(this,n[3]||"",!0),xk(this,n[4]),this.l=Tk(n[5]||"",!0),Ik(this,n[6]||"",!0),this.o=Tk(n[7]||"")):(this.g=!!t,this.h=new Lk(null,this.g))}function wk(e){return new kk(e)}function bk(e,t,n){e.j=n?Tk(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function _k(e,t,n){e.i=n?Tk(t,!0):t}function xk(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ik(e,t,n){t instanceof Lk?(e.h=t,function(e,t){t&&!e.j&&(Mk(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Fk(this,t),Vk(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Ck(t,Dk)),e.h=new Lk(t,e.g))}function Ek(e,t,n){e.h.set(t,n)}function Sk(e){return Ek(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Tk(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ck(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ak),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ak(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}kk.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ck(t,Nk,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ck(t,Nk,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ck(n,"/"==n.charAt(0)?Rk:Pk,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ck(n,Ok)),e.join("")};var Nk=/[#\/\?@]/g,Pk=/[#\?:]/g,Rk=/[#\?]/g,Dk=/[#\?@]/g,Ok=/#/g;function Lk(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Mk(e){e.g||(e.g=new vk,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Fk(e,t){Mk(e),t=jk(e,t),mk(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,mk((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&yk(e)))}function Uk(e,t){return Mk(e),t=jk(e,t),mk(e.g.h,t)}function Vk(e,t,n){Fk(e,t),0<n.length&&(e.i=null,e.g.set(jk(e,t),lm(n)),e.h+=n.length)}function jk(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Wy=Lk.prototype).add=function(e,t){Mk(this),this.i=null,e=jk(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Wy.forEach=function(e,t){Mk(this),this.g.forEach((function(n,r){sm(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Wy.T=function(){Mk(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Wy.R=function(e){Mk(this);var t=[];if("string"===typeof e)Uk(this,e)&&(t=cm(t,this.g.get(jk(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=cm(t,e[n])}return t},Wy.set=function(e,t){return Mk(this),this.i=null,Uk(this,e=jk(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Wy.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Wy.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Bk=Lt((function e(t,n){Dt(this,e),this.h=t,this.g=n}));function qk(e){this.l=e||Wk,Qy.PerformanceNavigationTiming?e=0<(e=Qy.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Qy.g&&Qy.g.Ea&&Qy.g.Ea()&&Qy.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var zk,Wk=10;function Kk(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Hk(e){return e.h?1:e.g?e.g.size:0}function Gk(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Qk(e,t){e.g?e.g.add(t):e.h=t}function Yk(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $k(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=Rt(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return lm(e.i)}function Jk(){}function Xk(){this.g=new Jk}function Zk(e,t,n){var r=n||"";try{pk(e,(function(e,n){var i=e;Jy(e)&&(i=hg(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ew(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function tw(e){this.l=e.$b||null,this.j=e.ib||!1}function nw(e,t){sg.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=rw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qk.prototype.cancel=function(){if(this.i=$k(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=Rt(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Jk.prototype.stringify=function(e){return Qy.JSON.stringify(e,void 0)},Jk.prototype.parse=function(e){return Qy.JSON.parse(e,void 0)},im(tw,Wg),tw.prototype.g=function(){return new nw(this.l,this.j)},tw.prototype.i=(zk={},function(){return zk}),im(nw,sg);var rw=0;function iw(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function aw(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ow(e)}function ow(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Wy=nw.prototype).open=function(e,t){if(this.readyState!=rw)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ow(this)},Wy.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Qy).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Wy.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,aw(this)),this.readyState=rw},Wy.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ow(this)),this.g&&(this.readyState=3,ow(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof Qy.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iw(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Wy.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?aw(this):ow(this),3==this.readyState&&iw(this)}},Wy.Ua=function(e){this.g&&(this.response=this.responseText=e,aw(this))},Wy.Ta=function(e){this.g&&(this.response=e,aw(this))},Wy.ha=function(){this.g&&aw(this)},Wy.setRequestHeader=function(e,t){this.v.append(e,t)},Wy.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Wy.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(nw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var uw=Qy.JSON.parse;function sw(e){sg.call(this),this.headers=new vk,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cw,this.K=this.L=!1}im(sw,sg);var cw="",lw=/^https?$/i,hw=["POST","PUT"];function fw(e){return"content-type"==e.toLowerCase()}function dw(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,pw(e),yw(e)}function pw(e){e.D||(e.D=!0,cg(e,"complete"),cg(e,"error"))}function vw(e){if(e.h&&"undefined"!=typeof Gy&&(!e.C[1]||4!=gw(e)||2!=e.ba()))if(e.v&&4==gw(e))Ig(e.Fa,0,e);else if(cg(e,"readystatechange"),4==gw(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(gk)[1]||null;if(!a&&Qy.self&&Qy.self.location){var o=Qy.self.location.protocol;a=o.substr(0,o.length-1)}i=!lw.test(a?a.toLowerCase():"")}t=i}if(t)cg(e,"complete"),cg(e,"success");else{e.m=6;try{var u=2<gw(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",pw(e)}}finally{yw(e)}}}function yw(e,t){if(e.g){mw(e);var n=e.g,r=e.C[0]?Yy:null;e.g=null,e.C=null,t||cg(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function mw(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Qy.clearTimeout(e.A),e.A=null)}function gw(e){return e.g?e.g.readyState:0}function kw(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case cw:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(W){return null}}function ww(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return gm(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ek(e,t,n))}function bw(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function _w(e){this.za=0,this.l=[],this.h=new Pg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=bw("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=bw("baseRetryDelayMs",5e3,e),this.$a=bw("retryDelaySeedMs",1e4,e),this.Ya=bw("forwardChannelMaxRetries",2,e),this.ra=bw("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new qk(e&&e.concurrentRequestLimit),this.Ca=new Xk,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function xw(e){if(Ew(e),3==e.G){var t=e.V++,n=wk(e.F);Ek(n,"SID",e.J),Ek(n,"RID",t),Ek(n,"TYPE","terminate"),Aw(e,n),(t=new Xg(e,e.h,t,void 0)).K=2,t.v=Sk(wk(n)),n=!1,Qy.navigator&&Qy.navigator.sendBeacon&&(n=Qy.navigator.sendBeacon(t.v.toString(),"")),!n&&Qy.Image&&((new Image).src=t.v,n=!0),n||(t.g=Bw(t.l,null),t.g.ea(t.v)),t.F=Date.now(),sk(t)}Vw(e)}function Iw(e){e.g&&(Dw(e),e.g.cancel(),e.g=null)}function Ew(e){Iw(e),e.u&&(Qy.clearTimeout(e.u),e.u=null),Lw(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Qy.clearTimeout(e.m),e.m=null)}function Sw(e,t){e.l.push(new Bk(e.Za++,t)),3==e.G&&Tw(e)}function Tw(e){Kk(e.i)||e.m||(e.m=!0,gg(e.Ha,e),e.C=0)}function Cw(e,t){var n;n=t?t.m:e.V++;var r=wk(e.F);Ek(r,"SID",e.J),Ek(r,"RID",n),Ek(r,"AID",e.U),Aw(e,r),e.o&&e.s&&ww(r,e.o,e.s),n=new Xg(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Nw(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Qk(e.i,n),rk(n,r,t)}function Aw(e,t){e.j&&pk({},(function(e,n){Ek(t,n,e)}))}function Nw(e,t,n){n=Math.min(e.l.length,n);var r=e.j?nm(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Zk(l,o,"req"+c+"_")}catch(ie){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Pw(e){e.g||e.u||(e.Y=1,gg(e.Ga,e),e.A=0)}function Rw(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=Bg(nm(e.Ga,e),Fw(e,e.A)),e.A++,!0)}function Dw(e){null!=e.B&&(Qy.clearTimeout(e.B),e.B=null)}function Ow(e){e.g=new Xg(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=wk(e.oa);Ek(t,"RID","rpc"),Ek(t,"SID",e.J),Ek(t,"CI",e.N?"0":"1"),Ek(t,"AID",e.U),Aw(e,t),Ek(t,"TYPE","xmlhttp"),e.o&&e.s&&ww(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Sk(wk(t)),n.s=null,n.U=!0,ik(n,e)}function Lw(e){null!=e.v&&(Qy.clearTimeout(e.v),e.v=null)}function Mw(e,t){var n=null;if(e.g==t){Lw(e),Dw(e),e.g=null;var r=2}else{if(!Gk(e.i,t))return;n=t.D,Yk(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;cg(r=Lg(),new jg(r,n,t,i)),Tw(e)}else Pw(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Hk(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=Bg(nm(e.Ha,e,t),Fw(e,e.C)),e.C++,!0))}(e,t)||2==r&&Rw(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Uw(e,5);break;case 4:Uw(e,10);break;case 3:Uw(e,6);break;default:Uw(e,2)}}function Fw(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Uw(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=nm(e.jb,e);n||(n=new kk("//www.google.com/images/cleardot.gif"),Qy.location&&"http"==Qy.location.protocol||bk(n,"https"),Sk(n)),function(e,t){var n=new Pg;if(Qy.Image){var r=new Image;r.onload=rm(ew,n,r,"TestLoadImage: loaded",!0,t),r.onerror=rm(ew,n,r,"TestLoadImage: error",!1,t),r.onabort=rm(ew,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=rm(ew,n,r,"TestLoadImage: timeout",!1,t),Qy.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Vg(2);e.G=0,e.j&&e.j.va(t),Vw(e),Ew(e)}function Vw(e){e.G=0,e.I=-1,e.j&&(0==$k(e.i).length&&0==e.l.length||(e.i.i.length=0,lm(e.l),e.l.length=0),e.j.ua())}function jw(e,t,n){var r=function(e){return e instanceof kk?wk(e):new kk(e,void 0)}(n);if(""!=r.i)t&&_k(r,t+"."+r.i),xk(r,r.m);else{var i=Qy.location;r=function(e,t,n,r){var i=new kk(null,void 0);return e&&bk(i,e),t&&_k(i,t),n&&xk(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&gm(e.aa,(function(e,t){Ek(r,t,e)})),t=e.D,n=e.sa,t&&n&&Ek(r,t,n),Ek(r,"VER",e.ma),Aw(e,r),r}function Bw(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new sw(new tw({ib:!0})):new sw(e.qa)).L=e.H,t}function qw(){}function zw(){if(Em&&!(10<=Number(Um)))throw Error("Environmental error: no available transport.")}function Ww(e,t){sg.call(this),this.g=new _w(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!hm(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!hm(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Gw(this)}function Kw(e){Yg.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Hw(){$g.call(this),this.status=1}function Gw(e){this.g=e}(Wy=sw.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gg.g(),this.C=this.u?Kg(this.u):Kg(Gg),this.g.onreadystatechange=nm(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void dw(this,a)}e=n||"";var i=new vk(this.headers);r&&pk(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=fw,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=Qy.FormData&&e instanceof Qy.FormData,!(0<=um(hw,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{mw(this),0<this.B&&((this.K=function(e){return Em&&Mm()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=nm(this.pa,this)):this.A=Ig(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){dw(this,a)}},Wy.pa=function(){"undefined"!=typeof Gy&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cg(this,"timeout"),this.abort(8))},Wy.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,cg(this,"complete"),cg(this,"abort"),yw(this))},Wy.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yw(this,!0)),sw.Z.M.call(this)},Wy.Fa=function(){this.s||(this.F||this.v||this.l?vw(this):this.cb())},Wy.cb=function(){vw(this)},Wy.ba=function(){try{return 2<gw(this)?this.g.status:-1}catch(zk){return-1}},Wy.ga=function(){try{return this.g?this.g.responseText:""}catch(zk){return""}},Wy.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),uw(t)}},Wy.Da=function(){return this.m},Wy.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Wy=_w.prototype).ma=8,Wy.G=1,Wy.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(W){}},Wy.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Xg(this,this.h,e,void 0),n=this.s;if(this.P&&(n?bm(n=km(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Nw(this,t,r),Ek(i=wk(this.F),"RID",e),Ek(i,"CVER",22),this.D&&Ek(i,"X-HTTP-Session-Id",this.D),Aw(this,i),this.o&&n&&ww(i,this.o,n),Qk(this.i,t),this.Ra&&Ek(i,"TYPE","init"),this.ja?(Ek(i,"$req",r),Ek(i,"SID","null"),t.$=!0,rk(t,i,null)):rk(t,i,r),this.G=2}}else 3==this.G&&(e?Cw(this,e):0==this.l.length||Kk(this.i)||Cw(this))},Wy.Ga=function(){if(this.u=null,Ow(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Bg(nm(this.bb,this),e)}},Wy.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Vg(10),Iw(this),Ow(this))},Wy.ab=function(){null!=this.v&&(this.v=null,Iw(this),Rw(this),Vg(19))},Wy.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Vg(2)):(this.h.info("Failed to ping google.com"),Vg(1))},(Wy=qw.prototype).xa=function(){},Wy.wa=function(){},Wy.va=function(){},Wy.ua=function(){},Wy.Oa=function(){},zw.prototype.g=function(e,t){return new Ww(e,t)},im(Ww,sg),Ww.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),gg(nm(e.hb,e,t))),Vg(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=jw(e,null,e.W),Tw(e)},Ww.prototype.close=function(){xw(this.g)},Ww.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Sw(this.g,t)}else this.v?((t={}).__data__=hg(e),Sw(this.g,t)):Sw(this.g,e)},Ww.prototype.M=function(){this.g.j=null,delete this.j,xw(this.g),delete this.g,Ww.Z.M.call(this)},im(Kw,Yg),im(Hw,$g),im(Gw,qw),Gw.prototype.xa=function(){cg(this.g,"a")},Gw.prototype.wa=function(e){cg(this.g,new Kw(e))},Gw.prototype.va=function(e){cg(this.g,new Hw(e))},Gw.prototype.ua=function(){cg(this.g,"b")},zw.prototype.createWebChannel=zw.prototype.g,Ww.prototype.send=Ww.prototype.u,Ww.prototype.open=Ww.prototype.m,Ww.prototype.close=Ww.prototype.close,qg.NO_ERROR=0,qg.TIMEOUT=8,qg.HTTP_ERROR=6,zg.COMPLETE="complete",Hg.EventType=Qg,Qg.OPEN="a",Qg.CLOSE="b",Qg.ERROR="c",Qg.MESSAGE="d",sg.prototype.listen=sg.prototype.N,sw.prototype.listenOnce=sw.prototype.O,sw.prototype.getLastError=sw.prototype.La,sw.prototype.getLastErrorCode=sw.prototype.Da,sw.prototype.getStatus=sw.prototype.ba,sw.prototype.getResponseJson=sw.prototype.Qa,sw.prototype.getResponseText=sw.prototype.ga,sw.prototype.send=sw.prototype.ea;var Qw=Hy.createWebChannelTransport=function(){return new zw},Yw=Hy.getStatEventTarget=function(){return Lg()},$w=Hy.ErrorCode=qg,Jw=Hy.EventType=zg,Xw=Hy.Event=Dg,Zw=Hy.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},eb=Hy.FetchXmlHttpFactory=tw,tb=Hy.WebChannel=Hg,nb=Hy.XhrIo=sw,rb="@firebase/firestore",ib=function(){function e(t){Dt(this,e),this.uid=t}return Lt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();ib.UNAUTHENTICATED=new ib(null),ib.GOOGLE_CREDENTIALS=new ib("google-credentials-uid"),ib.FIRST_PARTY=new ib("first-party-uid"),ib.MOCK_USER=new ib("mock-user");var ab="9.9.2",ob=new jn("@firebase/firestore");function ub(){return ob.logLevel}function sb(e){if(ob.logLevel<=Dn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(hb);ob.debug.apply(ob,["Firestore (".concat(ab,"): ").concat(e)].concat(Pt(i)))}}function cb(e){if(ob.logLevel<=Dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(hb);ob.error.apply(ob,["Firestore (".concat(ab,"): ").concat(e)].concat(Pt(i)))}}function lb(e){if(ob.logLevel<=Dn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(hb);ob.warn.apply(ob,["Firestore (".concat(ab,"): ").concat(e)].concat(Pt(i)))}}function hb(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function fb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ab,") INTERNAL ASSERTION FAILED: ")+e;throw cb(t),new Error(t)}function db(e,t){e||fb()}function pb(e,t){return e}var vb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},yb=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return Lt(n)}(on),mb=Lt((function e(){var t=this;Dt(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),gb=Lt((function e(t,n){Dt(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),kb=function(){function e(){Dt(this,e)}return Lt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ib.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),wb=function(){function e(t){Dt(this,e),this.token=t,this.changeListener=null}return Lt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),bb=function(){function e(t){Dt(this,e),this.t=t,this.currentUser=ib.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return Lt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new mb;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new mb,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){sb("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(sb("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mb)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(sb("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(db("string"==typeof n.accessToken),new gb(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return db(null===e||"string"==typeof e),new ib(e)}}]),e}(),_b=Lt((function e(t,n,r){Dt(this,e),this.type="FirstParty",this.user=ib.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),xb=function(){function e(t,n,r){Dt(this,e),this.h=t,this.l=n,this.m=r}return Lt(e,[{key:"getToken",value:function(){return Promise.resolve(new _b(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(ib.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Ib=Lt((function e(t){Dt(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Eb=function(){function e(t){Dt(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return Lt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&sb("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,sb("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){sb("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):sb("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(db("string"==typeof t.token),e.p=t.token,new Ib(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Sb(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Tb=function(){function e(){Dt(this,e)}return Lt(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Sb(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Cb(e,t){return e<t?-1:e>t?1:0}function Ab(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Nb(e){return e+"\0"}var Pb=function(){function e(t,n){if(Dt(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new yb(vb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new yb(vb.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new yb(vb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new yb(vb.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return Lt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Cb(this.nanoseconds,e.nanoseconds):Cb(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Rb=function(){function e(t){Dt(this,e),this.timestamp=t}return Lt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Pb(0,0))}},{key:"max",value:function(){return new e(new Pb(253402300799,999999999))}}]),e}(),Db=function(){function e(t,n,r){Dt(this,e),void 0===n?n=0:n>t.length&&fb(),void 0===r?r=t.length-n:r>t.length-n&&fb(),this.segments=t,this.offset=n,this.len=r}return Lt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Ob=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new yb(vb.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,Pt(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Db),Lb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Mb=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Lb.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new yb(vb.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new yb(vb.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new yb(vb.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new yb(vb.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Db),Fb=function(){function e(t){Dt(this,e),this.path=t}return Lt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Ob.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Ob.fromString(t))}},{key:"fromName",value:function(t){return new e(Ob.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Ob.emptyPath())}},{key:"comparator",value:function(e,t){return Ob.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Ob(t.slice()))}}]),e}(),Ub=Lt((function e(t,n,r,i){Dt(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Vb(e){return e.fields.find((function(e){return 2===e.kind}))}function jb(e){return e.fields.filter((function(e){return 2!==e.kind}))}Ub.UNKNOWN_ID=-1;var Bb=Lt((function e(t,n){Dt(this,e),this.fieldPath=t,this.kind=n}));var qb=function(){function e(t,n){Dt(this,e),this.sequenceNumber=t,this.offset=n}return Lt(e,null,[{key:"empty",value:function(){return new e(0,Kb.min())}}]),e}();function zb(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Rb.fromTimestamp(1e9===r?new Pb(n+1,0):new Pb(n,r));return new Kb(i,Fb.empty(),t)}function Wb(e){return new Kb(e.readTime,e.key,-1)}var Kb=function(){function e(t,n,r){Dt(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return Lt(e,null,[{key:"min",value:function(){return new e(Rb.min(),Fb.empty(),-1)}},{key:"max",value:function(){return new e(Rb.max(),Fb.empty(),-1)}}]),e}();function Hb(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Fb.comparator(e.documentKey,t.documentKey))?n:Cb(e.largestBatchId,t.largestBatchId)}var Gb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Qb=function(){function e(){Dt(this,e),this.onCommittedListeners=[]}return Lt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Yb(e){return $b.apply(this,arguments)}function $b(){return $b=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===vb.FAILED_PRECONDITION&&t.message===Gb){e.next=2;break}throw t;case 2:sb("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}var Jb=function(){function e(t){var n=this;Dt(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return Lt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&fb(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=Rt(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Xb=function(){function e(t,n){var r=this;Dt(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new mb,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new t_(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=o_(e.target.error);r.T.reject(new t_(t,n))}}return Lt(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(sb("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new r_(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new t_(n,t)}}}]),e}(),Zb=function(){function e(t,n,r){Dt(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Jt())&&cb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return Lt(e,[{key:"k",value:function(){var e=_t(wt().mark((function e(t){var n=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return sb("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new t_(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new yb(vb.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new yb(vb.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new t_(t,n))},i.onupgradeneeded=function(e){sb("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.M(t,i.transaction,e.oldVersion,n.version).next((function(){sb("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.O&&(this.db.onversionchange=function(e){return n.O(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.O=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=_t(wt().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(wt().mark((function e(){var n,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=Xb.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),Jb.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,sb("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return sb("SimpleDb","Removing database:",e),i_(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!an())return!1;if(e.S())return!0;var t=Jt(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/sodog",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",REACT_APP_FIREBASE_AUTH_DOMAIN:"socialdog-p.firebaseapp.com",REACT_APP_FIREBASE_DB_URL:"https://socialdog-p-default-rtdb.firebaseio.com/",REACT_APP_FIREBASE_PROJECT_ID:"socialdog-p"})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),e_=function(){function e(t){Dt(this,e),this.$=t,this.B=!1,this.L=null}return Lt(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return i_(this.$.delete())}}]),e}(),t_=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,vb.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return Lt(n)}(yb);function n_(e){return"IndexedDbTransactionError"===e.name}var r_=function(){function e(t){Dt(this,e),this.store=t}return Lt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(sb("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(sb("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),i_(n)}},{key:"add",value:function(e){return sb("SimpleDb","ADD",this.store.name,e,e),i_(this.store.add(e))}},{key:"get",value:function(e){var t=this;return i_(this.store.get(e)).next((function(n){return void 0===n&&(n=null),sb("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return sb("SimpleDb","DELETE",this.store.name,e),i_(this.store.delete(e))}},{key:"count",value:function(){return sb("SimpleDb","COUNT",this.store.name),i_(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Jb((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Jb((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){sb("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new Jb((function(n,r){t.onerror=function(e){var t=o_(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new Jb((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new e_(i),o=t(i.primaryKey,i.value,a);if(o instanceof Jb){var u=o.catch((function(e){return a.done(),Jb.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Jb.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function i_(e){return new Jb((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=o_(e.target.error);n(t)}}))}var a_=!1;function o_(e){var t=Zb.v(Jt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new yb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return a_||(a_=!0,setTimeout((function(){throw r}),0)),r}}return e}var u_=function(){function e(t,n){Dt(this,e),this.asyncQueue=t,this.X=n,this.task=null}return Lt(e,[{key:"start",value:function(){this.Z(15)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;sb("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=sb,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!n_(e.t4)){e.next=17;break}sb("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Yb(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),s_=function(){function e(t,n){Dt(this,e),this.localStore=t,this.persistence=n}return Lt(e,[{key:"tt",value:function(){var e=_t(wt().mark((function e(){var t,n=this,r=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Jb.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return sb("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return sb("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Wb(t);Hb(r,n)>0&&(n=r)})),new Kb(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),c_=function(){function e(t,n){var r=this;Dt(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return Lt(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function l_(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function h_(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function f_(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}c_.ot=-1;var d_=function(){function e(t,n){Dt(this,e),this.comparator=t,this.root=n||v_.EMPTY}return Lt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,v_.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,v_.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new p_(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new p_(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new p_(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new p_(this.root,e,this.comparator,!0)}}]),e}(),p_=function(){function e(t,n,r,i){Dt(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return Lt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),v_=function(){function e(t,n,r,i,a){Dt(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return Lt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw fb();if(this.right.isRed())throw fb();var e=this.left.check();if(e!==this.right.check())throw fb();return e+(this.isRed()?0:1)}}]),e}();v_.EMPTY=null,v_.RED=!0,v_.BLACK=!1,v_.EMPTY=new(function(){function e(){Dt(this,e),this.size=0}return Lt(e,[{key:"key",get:function(){throw fb()}},{key:"value",get:function(){throw fb()}},{key:"color",get:function(){throw fb()}},{key:"left",get:function(){throw fb()}},{key:"right",get:function(){throw fb()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new v_(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var y_=function(){function e(t){Dt(this,e),this.comparator=t,this.data=new d_(this.comparator)}return Lt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new m_(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new m_(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),m_=function(){function e(t){Dt(this,e),this.iter=t}return Lt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function g_(e){return e.hasNext()?e.getNext():void 0}var k_=function(){function e(t){Dt(this,e),this.fields=t,t.sort(Mb.comparator)}return Lt(e,[{key:"unionWith",value:function(t){var n,r=new y_(Mb.comparator),i=Rt(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=Rt(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=Rt(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ab(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var w_=function(e){function t(e){Dt(this,t),this.binaryString=e}return Lt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Cb(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();w_.EMPTY_BYTE_STRING=new w_("");var b_=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __(e){if(db(!!e),"string"==typeof e){var t=0,n=b_.exec(e);if(db(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:x_(e.seconds),nanos:x_(e.nanos)}}function x_(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function I_(e){return"string"==typeof e?w_.fromBase64String(e):w_.fromUint8Array(e)}function E_(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function S_(e){var t=e.mapValue.fields.__previous_value__;return E_(t)?S_(t):t}function T_(e){var t=__(e.mapValue.fields.__local_write_time__.timestampValue);return new Pb(t.seconds,t.nanos)}var C_=Lt((function e(t,n,r,i,a,o,u,s){Dt(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),A_=function(){function e(t,n){Dt(this,e),this.projectId=t,this.database=n||"(default)"}return Lt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function N_(e){return null==e}function P_(e){return 0===e&&1/e==-1/0}function R_(e){return"number"==typeof e&&Number.isInteger(e)&&!P_(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var D_={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},O_={nullValue:"NULL_VALUE"};function L_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?E_(e)?4:Y_(e)?9007199254740991:10:fb()}function M_(e,t){if(e===t)return!0;var n=L_(e);if(n!==L_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return T_(e).isEqual(T_(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=__(e.timestampValue),r=__(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return I_(e.bytesValue).isEqual(I_(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return x_(e.geoPointValue.latitude)===x_(t.geoPointValue.latitude)&&x_(e.geoPointValue.longitude)===x_(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return x_(e.integerValue)===x_(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=x_(e.doubleValue),r=x_(t.doubleValue);return n===r?P_(n)===P_(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ab(e.arrayValue.values||[],t.arrayValue.values||[],M_);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(l_(n)!==l_(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!M_(n[i],r[i])))return!1;return!0}(e,t);default:return fb()}}function F_(e,t){return void 0!==(e.values||[]).find((function(e){return M_(e,t)}))}function U_(e,t){if(e===t)return 0;var n=L_(e),r=L_(t);if(n!==r)return Cb(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Cb(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=x_(e.integerValue||e.doubleValue),r=x_(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return V_(e.timestampValue,t.timestampValue);case 4:return V_(T_(e),T_(t));case 5:return Cb(e.stringValue,t.stringValue);case 6:return function(e,t){var n=I_(e),r=I_(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Cb(n[i],r[i]);if(0!==a)return a}return Cb(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Cb(x_(e.latitude),x_(t.latitude));return 0!==n?n:Cb(x_(e.longitude),x_(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=U_(n[i],r[i]);if(a)return a}return Cb(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===D_.mapValue&&t===D_.mapValue)return 0;if(e===D_.mapValue)return 1;if(t===D_.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Cb(r[o],a[o]);if(0!==u)return u;var s=U_(n[r[o]],i[a[o]]);if(0!==s)return s}return Cb(r.length,a.length)}(e.mapValue,t.mapValue);default:throw fb()}}function V_(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Cb(e,t);var n=__(e),r=__(t),i=Cb(n.seconds,r.seconds);return 0!==i?i:Cb(n.nanos,r.nanos)}function j_(e){return B_(e)}function B_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=__(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?I_(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Fb.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=Rt(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=B_(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=Rt(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(B_(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):fb();var t,n}function q_(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function z_(e){return!!e&&"integerValue"in e}function W_(e){return!!e&&"arrayValue"in e}function K_(e){return!!e&&"nullValue"in e}function H_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function G_(e){return!!e&&"mapValue"in e}function Q_(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return h_(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Q_(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Q_(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Y_(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function $_(e){return"nullValue"in e?O_:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?q_(A_.empty(),Fb.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:fb()}function J_(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?q_(A_.empty(),Fb.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?D_:fb()}function X_(e,t){var n=U_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Z_(e,t){var n=U_(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ex=function(){function e(t){Dt(this,e),this.value=t}return Lt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!G_(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Q_(t)}},{key:"setAll",value:function(e){var t=this,n=Mb.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Q_(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());G_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return M_(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];G_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){h_(t,(function(t,n){return e[t]=n}));var r,i=Rt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Q_(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function tx(e){var t=[];return h_(e.fields,(function(e,n){var r=new Mb([e]);if(G_(n)){var i=tx(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=Rt(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new k_(t)}var nx=function(){function e(t,n,r,i,a,o){Dt(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return Lt(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ex.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ex.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Rb.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Rb.min(),Rb.min(),ex.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Rb.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Rb.min(),ex.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Rb.min(),ex.empty(),2)}}]),e}(),rx=Lt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;Dt(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ut=null}));function ix(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new rx(e,t,n,r,i,a,o)}function ax(e){var t=pb(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+j_(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),N_(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return j_(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return j_(e)})).join(",")),t.ut=n}return t.ut}function ox(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!_x(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!M_(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ix(e.startAt,t.startAt)&&Ix(e.endAt,t.endAt)}function ux(e){return Fb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function sx(e,t){return e.filters.filter((function(e){return e instanceof hx&&e.field.isEqual(t)}))}function cx(e,t,n){var r,i=O_,a=!0,o=Rt(sx(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=O_,c=!0;switch(u.op){case"<":case"<=":s=$_(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=O_}X_({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];X_({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function lx(e,t,n){var r,i=D_,a=!0,o=Rt(sx(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=D_,c=!0;switch(u.op){case">=":case">":s=J_(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=D_}Z_({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Z_({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var hx=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return Lt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(U_(t,this.value)):null!==t&&L_(this.value)===L_(t)&&this.at(U_(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fb()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new fx(e,t,r):"array-contains"===t?new yx(e,r):"in"===t?new mx(e,r):"not-in"===t?new gx(e,r):"array-contains-any"===t?new kx(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new dx(e,n):new px(e,n)}}]),n}(function(){return Lt((function e(){Dt(this,e)}))}()),fx=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this,e,r,i)).key=Fb.fromName(i.referenceValue),a}return Lt(n,[{key:"matches",value:function(e){var t=Fb.comparator(e.key,this.key);return this.at(t)}}]),n}(hx),dx=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e,"in",r)).keys=vx("in",r),i}return Lt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hx),px=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e,"not-in",r)).keys=vx("not-in",r),i}return Lt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hx);function vx(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Fb.fromName(e.referenceValue)}))}var yx=function(e){Et(n,e);var t=At(n);function n(e,r){return Dt(this,n),t.call(this,e,"array-contains",r)}return Lt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return W_(t)&&F_(t.arrayValue,this.value)}}]),n}(hx),mx=function(e){Et(n,e);var t=At(n);function n(e,r){return Dt(this,n),t.call(this,e,"in",r)}return Lt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&F_(this.value.arrayValue,t)}}]),n}(hx),gx=function(e){Et(n,e);var t=At(n);function n(e,r){return Dt(this,n),t.call(this,e,"not-in",r)}return Lt(n,[{key:"matches",value:function(e){if(F_(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!F_(this.value.arrayValue,t)}}]),n}(hx),kx=function(e){Et(n,e);var t=At(n);function n(e,r){return Dt(this,n),t.call(this,e,"array-contains-any",r)}return Lt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!W_(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return F_(t.value.arrayValue,e)}))}}]),n}(hx),wx=Lt((function e(t,n){Dt(this,e),this.position=t,this.inclusive=n})),bx=Lt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";Dt(this,e),this.field=t,this.dir=n}));function _x(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function xx(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Fb.comparator(Fb.fromName(o.referenceValue),n.key):U_(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ix(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!M_(e.position[n],t.position[n]))return!1;return!0}var Ex=Lt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Dt(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.lt=null,this.ft=null,this.startAt,this.endAt}));function Sx(e,t,n,r,i,a,o,u){return new Ex(e,t,n,r,i,a,o,u)}function Tx(e){return new Ex(e)}function Cx(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ax(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Nx(e){var t,n=Rt(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Px(e){return null!==e.collectionGroup}function Rx(e){var t=pb(e);if(null===t.lt){t.lt=[];var n=Nx(t),r=Ax(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new bx(n)),t.lt.push(new bx(Mb.keyField(),"asc"));else{var i,a=!1,o=Rt(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.lt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new bx(Mb.keyField(),s))}}}return t.lt}function Dx(e){var t=pb(e);if(!t.ft)if("F"===t.limitType)t.ft=ix(t.path,t.collectionGroup,Rx(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=Rt(Rx(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new bx(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new wx(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new wx(t.startAt.position,t.startAt.inclusive):null;t.ft=ix(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.ft}function Ox(e,t,n){return new Ex(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Lx(e,t){return ox(Dx(e),Dx(t))&&e.limitType===t.limitType}function Mx(e){return"".concat(ax(Dx(e)),"|lt:").concat(e.limitType)}function Fx(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(j_(t.value));var t})).join(", "),"]")),N_(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return j_(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return j_(e)})).join(",")),"Target(".concat(t,")")}(Dx(e)),"; limitType=").concat(e.limitType,")")}function Ux(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Fb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=Rt(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=Rt(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=xx(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Rx(e),t))&&!(e.endAt&&!function(e,t,n){var r=xx(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Rx(e),t))}(e,t)}function Vx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function jx(e){return function(t,n){var r,i=!1,a=Rt(Rx(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Bx(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Bx(e,t,n){var r=e.field.isKeyField()?Fb.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?U_(r,i):fb()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fb()}}function qx(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:P_(t)?"-0":t}}function zx(e){return{integerValue:""+e}}function Wx(e,t){return R_(t)?zx(t):qx(e,t)}var Kx=Lt((function e(){Dt(this,e),this._=void 0}));function Hx(e,t,n){return e instanceof Yx?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof $x?Jx(e,t):e instanceof Xx?Zx(e,t):function(e,t){var n=Qx(e,t),r=tI(n)+tI(e._t);return z_(n)&&z_(e._t)?zx(r):qx(e.wt,r)}(e,t)}function Gx(e,t,n){return e instanceof $x?Jx(e,t):e instanceof Xx?Zx(e,t):n}function Qx(e,t){return e instanceof eI?z_(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Yx=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n)}(Kx),$x=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this)).elements=e,r}return Lt(n)}(Kx);function Jx(e,t){var n,r=nI(t),i=Rt(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return M_(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Xx=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this)).elements=e,r}return Lt(n)}(Kx);function Zx(e,t){var n,r=nI(t),i=Rt(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!M_(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var eI=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this)).wt=e,i._t=r,i}return Lt(n)}(Kx);function tI(e){return x_(e.integerValue||e.doubleValue)}function nI(e){return W_(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var rI=Lt((function e(t,n){Dt(this,e),this.field=t,this.transform=n}));var iI=Lt((function e(t,n){Dt(this,e),this.version=t,this.transformResults=n})),aI=function(){function e(t,n){Dt(this,e),this.updateTime=t,this.exists=n}return Lt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function oI(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var uI=Lt((function e(){Dt(this,e)}));function sI(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new wI(e.key,aI.none()):new dI(e.key,e.data,aI.none());var n,r=e.data,i=ex.empty(),a=new y_(Mb.comparator),o=Rt(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new pI(e.key,i,new k_(a.toArray()),aI.none())}function cI(e,t,n){e instanceof dI?function(e,t,n){var r=e.value.clone(),i=yI(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof pI?function(e,t,n){if(oI(e.precondition,t)){var r=yI(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(vI(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function lI(e,t,n,r){return e instanceof dI?function(e,t,n,r){if(!oI(e.precondition,t))return n;var i=e.value.clone(),a=mI(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof pI?function(e,t,n,r){if(!oI(e.precondition,t))return n;var i=mI(e.fieldTransforms,r,t),a=t.data;return a.setAll(vI(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return oI(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function hI(e,t){var n,r=null,i=Rt(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Qx(a.transform,o||null);null!=u&&(null===r&&(r=ex.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function fI(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ab(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof $x&&t instanceof $x||e instanceof Xx&&t instanceof Xx?Ab(e.elements,t.elements,M_):e instanceof eI&&t instanceof eI?M_(e._t,t._t):e instanceof Yx&&t instanceof Yx}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var dI=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return Dt(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return Lt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(uI),pI=function(e){Et(n,e);var t=At(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Dt(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return Lt(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(uI);function vI(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function yI(e,t,n){var r=new Map;db(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Gx(o,u,n[i]))}return r}function mI(e,t,n){var r,i=new Map,a=Rt(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Hx(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var gI,kI,wI=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return Lt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(uI),bI=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return Lt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(uI),_I=Lt((function e(t){Dt(this,e),this.count=t}));function xI(e){switch(e){default:return fb();case vb.CANCELLED:case vb.UNKNOWN:case vb.DEADLINE_EXCEEDED:case vb.RESOURCE_EXHAUSTED:case vb.INTERNAL:case vb.UNAVAILABLE:case vb.UNAUTHENTICATED:return!1;case vb.INVALID_ARGUMENT:case vb.NOT_FOUND:case vb.ALREADY_EXISTS:case vb.PERMISSION_DENIED:case vb.FAILED_PRECONDITION:case vb.ABORTED:case vb.OUT_OF_RANGE:case vb.UNIMPLEMENTED:case vb.DATA_LOSS:return!0}}function II(e){if(void 0===e)return cb("GRPC error has no .code"),vb.UNKNOWN;switch(e){case gI.OK:return vb.OK;case gI.CANCELLED:return vb.CANCELLED;case gI.UNKNOWN:return vb.UNKNOWN;case gI.DEADLINE_EXCEEDED:return vb.DEADLINE_EXCEEDED;case gI.RESOURCE_EXHAUSTED:return vb.RESOURCE_EXHAUSTED;case gI.INTERNAL:return vb.INTERNAL;case gI.UNAVAILABLE:return vb.UNAVAILABLE;case gI.UNAUTHENTICATED:return vb.UNAUTHENTICATED;case gI.INVALID_ARGUMENT:return vb.INVALID_ARGUMENT;case gI.NOT_FOUND:return vb.NOT_FOUND;case gI.ALREADY_EXISTS:return vb.ALREADY_EXISTS;case gI.PERMISSION_DENIED:return vb.PERMISSION_DENIED;case gI.FAILED_PRECONDITION:return vb.FAILED_PRECONDITION;case gI.ABORTED:return vb.ABORTED;case gI.OUT_OF_RANGE:return vb.OUT_OF_RANGE;case gI.UNIMPLEMENTED:return vb.UNIMPLEMENTED;case gI.DATA_LOSS:return vb.DATA_LOSS;default:return fb()}}(kI=gI||(gI={}))[kI.OK=0]="OK",kI[kI.CANCELLED=1]="CANCELLED",kI[kI.UNKNOWN=2]="UNKNOWN",kI[kI.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kI[kI.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kI[kI.NOT_FOUND=5]="NOT_FOUND",kI[kI.ALREADY_EXISTS=6]="ALREADY_EXISTS",kI[kI.PERMISSION_DENIED=7]="PERMISSION_DENIED",kI[kI.UNAUTHENTICATED=16]="UNAUTHENTICATED",kI[kI.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kI[kI.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kI[kI.ABORTED=10]="ABORTED",kI[kI.OUT_OF_RANGE=11]="OUT_OF_RANGE",kI[kI.UNIMPLEMENTED=12]="UNIMPLEMENTED",kI[kI.INTERNAL=13]="INTERNAL",kI[kI.UNAVAILABLE=14]="UNAVAILABLE",kI[kI.DATA_LOSS=15]="DATA_LOSS";var EI=function(){function e(t,n){Dt(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return Lt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=Rt(n);try{for(i.s();!(r=i.n()).done;){var a=gt(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){h_(this.inner,(function(t,n){var r,i=Rt(n);try{for(i.s();!(r=i.n()).done;){var a=gt(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return f_(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),SI=new d_(Fb.comparator);function TI(){return SI}var CI=new d_(Fb.comparator);function AI(){for(var e=CI,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function NI(e){var t=CI;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function PI(){return DI()}function RI(){return DI()}function DI(){return new EI((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var OI=new d_(Fb.comparator),LI=new y_(Fb.comparator);function MI(){for(var e=LI,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var FI=new y_(Cb);function UI(){return FI}var VI=function(){function e(t,n,r,i,a){Dt(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return Lt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,jI.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Rb.min(),r,UI(),TI(),MI())}}]),e}(),jI=function(){function e(t,n,r,i,a){Dt(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return Lt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(w_.EMPTY_BYTE_STRING,n,MI(),MI(),MI())}}]),e}(),BI=Lt((function e(t,n,r,i){Dt(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),qI=Lt((function e(t,n){Dt(this,e),this.targetId=t,this.It=n})),zI=Lt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w_.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Dt(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),WI=function(){function e(){Dt(this,e),this.Tt=0,this.Et=GI(),this.At=w_.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return Lt(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=MI(),t=MI(),n=MI();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fb()}})),new jI(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=GI()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),KI=function(){function e(t){Dt(this,e),this.Ot=t,this.Ft=new Map,this.$t=TI(),this.Bt=HI(),this.Lt=new y_(Cb)}return Lt(e,[{key:"Ut",value:function(e){var t,n=Rt(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(u){n.e(u)}finally{n.f()}var i,a=Rt(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Mt(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:fb()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(ux(i))if(0===n){var a=new Fb(i.path);this.Kt(t,a,nx.newNoDocument(a,Rb.min()))}else db(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&ux(a.target)){var o=new Fb(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,nx.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=MI();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new VI(e,n,this.Lt,this.$t,r);return this.$t=TI(),this.Bt=HI(),this.Lt=new y_(Cb),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Ot.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new WI,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new y_(Cb),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||sb("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Ot.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new WI),this.Ot.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Ot.getRemoteKeysForTarget(e).has(t)}}]),e}();function HI(){return new d_(Fb.comparator)}function GI(){return new d_(Fb.comparator)}var QI={asc:"ASCENDING",desc:"DESCENDING"},YI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$I=Lt((function e(t,n){Dt(this,e),this.databaseId=t,this.dt=n}));function JI(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function XI(e,t){return e.dt?t.toBase64():t.toUint8Array()}function ZI(e,t){return JI(e,t.toTimestamp())}function eE(e){return db(!!e),Rb.fromTimestamp(function(e){var t=__(e);return new Pb(t.seconds,t.nanos)}(e))}function tE(e,t){return function(e){return new Ob(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function nE(e){var t=Ob.fromString(e);return db(EE(t)),t}function rE(e,t){return tE(e.databaseId,t.path)}function iE(e,t){var n=nE(t);if(n.get(1)!==e.databaseId.projectId)throw new yb(vb.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yb(vb.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Fb(sE(n))}function aE(e,t){return tE(e.databaseId,t)}function oE(e){var t=nE(e);return 4===t.length?Ob.emptyPath():sE(t)}function uE(e){return new Ob(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sE(e){return db(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function cE(e,t,n){return{name:rE(e,t),fields:n.value.mapValue.fields}}function lE(e,t,n){var r=iE(e,t.name),i=eE(t.updateTime),a=new ex({mapValue:{fields:t.fields}}),o=nx.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function hE(e,t){return"found"in t?function(e,t){db(!!t.found),t.found.name,t.found.updateTime;var n=iE(e,t.found.name),r=eE(t.found.updateTime),i=new ex({mapValue:{fields:t.found.fields}});return nx.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){db(!!t.missing),db(!!t.readTime);var n=iE(e,t.missing),r=eE(t.readTime);return nx.newNoDocument(n,r)}(e,t):fb()}function fE(e,t){var n;if(t instanceof dI)n={update:cE(e,t.key,t.value)};else if(t instanceof wI)n={delete:rE(e,t.key)};else if(t instanceof pI)n={update:cE(e,t.key,t.data),updateMask:IE(t.fieldMask)};else{if(!(t instanceof bI))return fb();n={verify:rE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Yx)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $x)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xx)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof eI)return{fieldPath:t.field.canonicalString(),increment:n._t};throw fb()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ZI(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fb()}(e,t.precondition)),n}function dE(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?aI.updateTime(eE(e.updateTime)):void 0!==e.exists?aI.exists(e.exists):aI.none()}(t.currentDocument):aI.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)db("REQUEST_TIME"===t.setToServerValue),n=new Yx;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new $x(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Xx(i)}else"increment"in t?n=new eI(e,t.increment):fb();var a=Mb.fromServerFormat(t.fieldPath);return new rI(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=iE(e,t.update.name),a=new ex({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new k_(t.map((function(e){return Mb.fromServerFormat(e)})))}(t.updateMask);return new pI(i,a,o,n,r)}return new dI(i,a,n,r)}if(t.delete){var u=iE(e,t.delete);return new wI(u,n)}if(t.verify){var s=iE(e,t.verify);return new bI(s,n)}return fb()}function pE(e,t){return{documents:[aE(e,t.path)]}}function vE(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=aE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=aE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(H_(e.value))return{unaryFilter:{field:wE(e.field),op:"IS_NAN"}};if(K_(e.value))return{unaryFilter:{field:wE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(H_(e.value))return{unaryFilter:{field:wE(e.field),op:"IS_NOT_NAN"}};if(K_(e.value))return{unaryFilter:{field:wE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wE(e.field),op:kE(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:wE(e.field),direction:gE(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.dt||N_(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function yE(e){var t=oE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){db(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=mE(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new bx(bE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return N_(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new wx(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new wx(n,t)}(n.endAt)),Sx(t,i,u,o,s,"F",c,l)}function mE(e){return e?void 0!==e.unaryFilter?[xE(e)]:void 0!==e.fieldFilter?[_E(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return mE(e)})).reduce((function(e,t){return e.concat(t)})):fb():[]}function gE(e){return QI[e]}function kE(e){return YI[e]}function wE(e){return{fieldPath:e.canonicalString()}}function bE(e){return Mb.fromServerFormat(e.fieldPath)}function _E(e){return hx.create(bE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fb()}}(e.fieldFilter.op),e.fieldFilter.value)}function xE(e){switch(e.unaryFilter.op){case"IS_NAN":var t=bE(e.unaryFilter.field);return hx.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=bE(e.unaryFilter.field);return hx.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=bE(e.unaryFilter.field);return hx.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=bE(e.unaryFilter.field);return hx.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fb()}}function IE(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function EE(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function SE(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=CE(t)),t=TE(e.get(n),t);return CE(t)}function TE(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function CE(e){return e+"\x01\x01"}function AE(e){var t=e.length;if(db(t>=2),2===t)return db("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Ob.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&fb(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:fb()}a=o+2}return new Ob(r)}var NE=["userId","batchId"];function PE(e,t){return[e,SE(t)]}function RE(e,t,n){return[e,SE(t),n]}var DE={},OE=["prefixPath","collectionGroup","readTime","documentId"],LE=["prefixPath","collectionGroup","documentId"],ME=["collectionGroup","readTime","prefixPath","documentId"],FE=["canonicalId","targetId"],UE=["targetId","path"],VE=["path","targetId"],jE=["collectionId","parent"],BE=["indexId","uid"],qE=["uid","sequenceNumber"],zE=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WE=["indexId","uid","orderedDocumentKey"],KE=["userId","collectionPath","documentId"],HE=["userId","collectionPath","largestBatchId"],GE=["userId","collectionGroup","largestBatchId"],QE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),YE=[].concat(Pt(QE),["documentOverlays"]),$E=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],JE=$E,XE=[].concat(JE,["indexConfiguration","indexState","indexEntries"]),ZE=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return Lt(n)}(Qb);function eS(e,t){var n=pb(e);return Zb.N(n.ee,t)}var tS=function(){function e(t,n,r,i){Dt(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return Lt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&cI(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=Rt(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=lI(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=Rt(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=lI(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=RI();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=sI(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Rb.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),MI())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ab(this.mutations,e.mutations,(function(e,t){return fI(e,t)}))&&Ab(this.baseMutations,e.baseMutations,(function(e,t){return fI(e,t)}))}}]),e}(),nS=function(){function e(t,n,r,i){Dt(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return Lt(e,null,[{key:"from",value:function(t,n,r){db(t.mutations.length===r.length);for(var i=OI,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),rS=function(){function e(t,n){Dt(this,e),this.largestBatchId=t,this.mutation=n}return Lt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),iS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Rb.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Rb.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:w_.EMPTY_BYTE_STRING;Dt(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return Lt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),aS=Lt((function e(t){Dt(this,e),this.ne=t}));function oS(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:uS(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:rE(e,t.key),fields:t.data.value.mapValue.fields,updateTime:JI(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sS(t.version)};else{if(!t.isUnknownDocument())return fb();r.unknownDocument={path:n.path.toArray(),version:sS(t.version)}}return r}function uS(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function sS(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function cS(e){var t=new Pb(e.seconds,e.nanoseconds);return Rb.fromTimestamp(t)}function lS(e,t){for(var n=(t.baseMutations||[]).map((function(t){return dE(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return dE(e.ne,t)})),u=Pb.fromMillis(t.localWriteTimeMs);return new tS(t.batchId,u,n,o)}function hS(e){var t,n,r=cS(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?cS(e.lastLimboFreeSnapshotVersion):Rb.min();return void 0!==e.query.documents?(db(1===(n=e.query).documents.length),t=Dx(Tx(oE(n.documents[0])))):t=function(e){return Dx(yE(e))}(e.query),new iS(t,e.targetId,0,e.lastListenSequenceNumber,r,i,w_.fromBase64String(e.resumeToken))}function fS(e,t){var n,r=sS(t.snapshotVersion),i=sS(t.lastLimboFreeSnapshotVersion);n=ux(t.target)?pE(e.ne,t.target):vE(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ax(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function dS(e){var t=yE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ox(t,t.limit,"L"):t}function pS(e,t){return new rS(t.largestBatchId,dE(e.ne,t.overlayMutation))}function vS(e,t){var n=t.path.lastSegment();return[e,SE(t.path.popLast()),n]}function yS(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:sS(r.readTime),documentKey:SE(r.documentKey.path),largestBatchId:r.largestBatchId}}var mS=function(){function e(){Dt(this,e)}return Lt(e,[{key:"getBundleMetadata",value:function(e,t){return gS(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:cS(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return gS(e).put({bundleId:(n=t).id,createTime:sS(eE(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return kS(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:dS(t.bundledQuery),readTime:cS(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return kS(e).put(function(e){return{name:e.name,readTime:sS(eE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function gS(e){return eS(e,"bundles")}function kS(e){return eS(e,"namedQueries")}var wS=function(){function e(t,n){Dt(this,e),this.wt=t,this.userId=n}return Lt(e,[{key:"getOverlay",value:function(e,t){var n=this;return bS(e).get(vS(this.userId,t)).next((function(e){return e?pS(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=PI();return Jb.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new rS(t,a);i.push(r.ie(e,o))})),Jb.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(SE(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(bS(e).W("collectionPathOverlayIndex",i))})),Jb.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=PI(),a=SE(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return bS(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=Rt(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=pS(r.wt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=PI(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bS(e).J({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=pS(a.wt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return bS(e).put(function(e,t,n){var r=gt(vS(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:fE(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function bS(e){return eS(e,"documentOverlays")}var _S=function(){function e(){Dt(this,e)}return Lt(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(x_(e.integerValue));else if("doubleValue"in e){var n=x_(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),P_(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(I_(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?Y_(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):fb()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=Rt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),Fb.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function xS(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function IS(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=xS(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}_S.ye=new _S;var ES=function(){function e(){Dt(this,e),this.buffer=new Uint8Array(1024),this.position=0}return Lt(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=Rt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=Rt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=IS(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=IS(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Me",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),SS=function(){function e(t){Dt(this,e),this.Oe=t}return Lt(e,[{key:"de",value:function(e){this.Oe.pe(e)}},{key:"he",value:function(e){this.Oe.be(e)}},{key:"ae",value:function(e){this.Oe.ve(e)}},{key:"ue",value:function(){this.Oe.Ce()}}]),e}(),TS=function(){function e(t){Dt(this,e),this.Oe=t}return Lt(e,[{key:"de",value:function(e){this.Oe.Ee(e)}},{key:"he",value:function(e){this.Oe.Pe(e)}},{key:"ae",value:function(e){this.Oe.De(e)}},{key:"ue",value:function(){this.Oe.Ne()}}]),e}(),CS=function(){function e(){Dt(this,e),this.Oe=new ES,this.Fe=new SS(this.Oe),this.$e=new TS(this.Oe)}return Lt(e,[{key:"seed",value:function(e){this.Oe.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Me",value:function(){return this.Oe.Me()}},{key:"reset",value:function(){this.Oe.reset()}}]),e}(),AS=function(){function e(t,n,r,i){Dt(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return Lt(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function NS(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=PS(e.arrayValue,t.arrayValue))?n:0!==(n=PS(e.directionalValue,t.directionalValue))?n:Fb.comparator(e.documentKey,t.documentKey)}function PS(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var RS=function(){function e(t){Dt(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=Rt(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return Lt(e,[{key:"Ge",value:function(e){var t=Vb(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=jb(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=Rt(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),DS=function(){function e(){Dt(this,e),this.ze=new OS}return Lt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),Jb.resolve()}},{key:"getCollectionParents",value:function(e,t){return Jb.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Jb.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Jb.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Jb.resolve(null)}},{key:"getIndexType",value:function(e,t){return Jb.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Jb.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Jb.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Jb.resolve(Kb.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Jb.resolve(Kb.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Jb.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Jb.resolve()}}]),e}(),OS=function(){function e(){Dt(this,e),this.index={}}return Lt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new y_(Ob.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new y_(Ob.comparator)).toArray()}}]),e}(),LS=new Uint8Array(0),MS=function(){function e(t,n){Dt(this,e),this.user=t,this.databaseId=n,this.He=new OS,this.Je=new EI((function(e){return ax(e)}),(function(e,t){return ox(e,t)})),this.uid=t.uid||""}return Lt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:SE(i)};return FS(e).put(a)}return Jb.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Nb(t),""],!1,!0);return FS(e).K(r).next((function(e){var r,i=Rt(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(AE(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=VS(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=jS(e);return a.next((function(e){o.put(yS(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=VS(e),r=jS(e),i=US(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=US(e),i=!0,a=new Map;return Jb.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=MI(),o=[];return Jb.forEach(a,(function(i,a){var u;sb("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(ax(t)));var s=function(e,t){var n=Vb(t);if(void 0===n)return null;var r,i=Rt(sx(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=Rt(jb(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=Rt(sx(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=Rt(jb(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?cx(e,o.fieldPath,e.startAt):lx(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new wx(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=Rt(jb(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?lx(e,o.fieldPath,e.endAt):cx(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new wx(r,i)}(a,i),f=n.Ze(i,a,l),d=n.Ze(i,a,h),p=n.tn(i,a,c),v=n.en(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return Jb.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=Fb.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Jb.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],h=function(s){var h=t?u.nn(t[s/c]):LS,f=u.sn(e,h,n[s%c],r),d=u.rn(e,h,i[s%c],a),p=o.map((function(t){return u.sn(e,h,t,!0)}));l.push.apply(l,Pt(u.createRange(f,d,p)))},f=0;f<s;++f)h(f);return l}},{key:"sn",value:function(e,t,n,r){var i=new AS(e,Fb.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new AS(e,Fb.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new RS(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=Rt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Jb.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new y_(Mb.comparator),r=!1,i=Rt(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=Rt(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new CS,i=Rt(jb(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Be(a.kind);_S.ye.re(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Me()}},{key:"nn",value:function(e){var t=new CS;return _S.ye.re(e,t.Be(0)),t.Me()}},{key:"un",value:function(e,t){var n=new CS;return _S.ye.re(q_(this.databaseId,t),n.Be(function(e){var t=jb(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Me()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new CS);var i,a=0,o=Rt(jb(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=Rt(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.cn(t,s.fieldPath)&&W_(c))r=this.an(r,s,c);else{var f=h.Be(s.kind);_S.ye.re(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Me();return t}},{key:"an",value:function(e,t,n){var r,i=Pt(e),a=[],o=Rt(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=Rt(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=new CS;h.seed(l.Me()),_S.ye.re(s,h.Be(t.kind)),a.push(h)}}catch(f){c.e(f)}finally{c.f()}}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof hx&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=VS(e),i=jS(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return Jb.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new qb(t.sequenceNumber,new Kb(cS(t.readTime),new Fb(AE(t.documentKey)),t.largestBatchId)):qb.empty(),r=e.fields.map((function(e){var t=gt(e,2),n=t[0],r=t[1];return new Bb(Mb.fromServerFormat(n),r)}));return new Ub(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Cb(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=VS(e),a=jS(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Jb.forEach(t,(function(t){return a.put(yS(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Jb.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Jb.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Jb.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?Jb.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return US(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return US(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=US(e),i=new y_(NS);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new AS(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new y_(NS),r=this.on(t,e);if(null==r)return n;var i=Vb(t);if(null!=i){var a=e.data.field(i.fieldPath);if(W_(a)){var o,u=Rt(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new AS(t.indexId,e.key,this.nn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new AS(t.indexId,e.key,LS,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;sb("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=g_(a),s=g_(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=g_(o)):l?(i(u),u=g_(a)):(u=g_(a),s=g_(o))}}(r,i,NS,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),Jb.waitFor(o)}},{key:"ln",value:function(e){var t=1;return jS(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return NS(e,t)})).filter((function(e,t,n){return!t||0!==NS(e,n[t-1])}));var r=[];r.push(e);var i,a=Rt(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=NS(o,e),s=NS(o,t);if(0===u)r[0]=e.Le();else if(u>0&&s<0)r.push(o),r.push(o.Le());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,LS,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,LS,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(BS)}},{key:"getMinOffset",value:function(e,t){var n=this;return Jb.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||fb()}))})).next(BS)}}]),e}();function FS(e){return eS(e,"collectionParents")}function US(e){return eS(e,"indexEntries")}function VS(e){return eS(e,"indexConfiguration")}function jS(e){return eS(e,"indexState")}function BS(e){db(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Hb(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Kb(t.readTime,t.documentKey,n)}var qS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},zS=function(){function e(t,n,r){Dt(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return Lt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function WS(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.J({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){db(1===u)})));var c,l=[],h=Rt(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=RE(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return Jb.waitFor(a).next((function(){return l}))}function KS(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw fb();t=e.noDocument}return JSON.stringify(t).length}zS.DEFAULT_COLLECTION_PERCENTILE=10,zS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zS.DEFAULT=new zS(41943040,zS.DEFAULT_COLLECTION_PERCENTILE,zS.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zS.DISABLED=new zS(-1,0,0);var HS=function(){function e(t,n,r,i){Dt(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return Lt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return QS(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=YS(e),o=QS(e);return o.add({}).next((function(u){db("number"==typeof u);var s,c=new tS(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return fE(e.ne,t)})),i=n.mutations.map((function(t){return fE(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),h=[],f=new y_((function(e,t){return Cb(e.canonicalString(),t.canonicalString())})),d=Rt(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=RE(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,DE))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[u]=c.keys()})),Jb.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return QS(e).get(t).next((function(e){return e?(db(e.userId===n.userId),lS(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?Jb.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return QS(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(db(t.batchId>=r),a=lS(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return QS(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return QS(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return lS(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=PE(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return YS(e).J({range:i},(function(r,i,o){var u=gt(r,3),s=u[0],c=u[1],l=u[2],h=AE(c);if(s===n.userId&&t.path.isEqual(h))return QS(e).get(l).next((function(e){if(!e)throw fb();db(e.userId===n.userId),a.push(lS(n.wt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new y_(Cb),i=[];return t.forEach((function(t){var a=PE(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=YS(e).J({range:o},(function(e,i,a){var o=gt(e,3),u=o[0],s=o[1],c=o[2],l=AE(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Jb.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=PE(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new y_(Cb);return YS(e).J({range:o},(function(e,t,a){var o=gt(e,3),s=o[0],c=o[1],l=o[2],h=AE(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(QS(e).get(t).next((function(e){if(null===e)throw fb();db(e.userId===n.userId),r.push(lS(n.wt,e))})))})),Jb.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return WS(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),Jb.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Jb.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return YS(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=AE(e[1]);i.push(a)}else r.done()})).next((function(){db(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return GS(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return $S(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return db(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function GS(e,t,n){var r=PE(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return YS(e).J({range:a,H:!0},(function(e,n,r){var a=gt(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function QS(e){return eS(e,"mutations")}function YS(e){return eS(e,"documentMutations")}function $S(e){return eS(e,"mutationQueues")}var JS=function(){function e(t){Dt(this,e),this.En=t}return Lt(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),XS=function(){function e(t,n){Dt(this,e),this.referenceDelegate=t,this.wt=n}return Lt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new JS(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return Rb.fromTimestamp(new Pb(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ZS(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return db(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ZS(e).J((function(o,u){var s=hS(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Jb.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ZS(e).J((function(e,n){var r=hS(n);t(r)}))}},{key:"bn",value:function(e){return eT(e).get("targetGlobalKey").next((function(e){return db(null!==e),e}))}},{key:"Pn",value:function(e,t){return eT(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return ZS(e).put(fS(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=ax(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ZS(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=hS(n);ox(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=tT(e);return t.forEach((function(t){var o=SE(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Jb.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=tT(e);return Jb.forEach(t,(function(t){var a=SE(t.path);return Jb.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=tT(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=tT(e),i=MI();return r.J({range:n,H:!0},(function(e,t,n){var r=AE(e[1]),a=new Fb(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=SE(t.path),r=IDBKeyRange.bound([n],[Nb(n)],!1,!0),i=0;return tT(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=gt(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return ZS(e).get(t).next((function(e){return e?hS(e):null}))}}]),e}();function ZS(e){return eS(e,"targets")}function eT(e){return eS(e,"targetGlobal")}function tT(e){return eS(e,"targetDocuments")}function nT(e,t){var n=gt(e,2),r=n[0],i=n[1],a=gt(t,2),o=a[0],u=a[1],s=Cb(r,o);return 0===s?Cb(i,u):s}var rT=function(){function e(t){Dt(this,e),this.Sn=t,this.buffer=new y_(nT),this.Dn=0}return Lt(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();nT(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),iT=function(){function e(t,n,r){Dt(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return Lt(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;sb("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!n_(e.t0)){e.next=12;break}sb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Yb(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),aT=function(){function e(t,n){Dt(this,e),this.Mn=t,this.params=n}return Lt(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.On(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Jb.resolve(c_.ot);var r=new rT(t);return this.Mn.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.Mn.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(sb("LruGarbageCollector","Garbage collection skipped; disabled"),Jb.resolve(qS)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(sb("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),qS):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(sb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ub()<=Dn.DEBUG&&sb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Jb.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),oT=function(){function e(t,n){Dt(this,e),this.db=t,this.garbageCollector=function(e,t){return new aT(e,t)}(this,n)}return Lt(e,[{key:"On",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return uT(e,n)}},{key:"removeReference",value:function(e,t,n){return uT(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return uT(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return $S(e).Y((function(r){return GS(e,r,t).next((function(e){return e&&(n=!0),Jb.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,u){if(u<=t){var s=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Rb.min()),tT(e).delete([0,SE(o.path)])}))}));i.push(s)}})).next((function(){return Jb.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return uT(e,t)}},{key:"Ln",value:function(e,t){var n,r=tT(e),i=c_.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=gt(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==c_.ot&&t(new Fb(AE(n)),i),i=s,n=u):i=c_.ot})).next((function(){i!==c_.ot&&t(new Fb(AE(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function uT(e,t){return tT(e).put(function(e,t){return{targetId:0,path:SE(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var sT=function(){function e(){Dt(this,e),this.changes=new EI((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return Lt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,nx.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Jb.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),cT=function(){function e(t){Dt(this,e),this.wt=t}return Lt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return dT(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return dT(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],uS(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=nx.newInvalidDocument(t);return dT(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(pT(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:nx.newInvalidDocument(t)};return dT(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(pT(t))},(function(e,i){r={document:n.Kn(t,i),size:KS(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=TI();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=TI(),i=new d_(Fb.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,KS(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return Jb.resolve();var r=new y_(yT);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(pT(r.first()),pT(r.last())),a=r.getIterator(),o=a.getNext();return dT(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Fb.fromSegments([].concat(Pt(t.prefixPath),[t.collectionGroup,t.documentId]));o&&yT(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.q(pT(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),uS(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return dT(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=TI(),i=Rt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(Fb.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=TI(),o=vT(t,n),u=vT(t,Kb.max());return dT(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Kn(Fb.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new hT(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return fT(e).get("remoteDocumentGlobalKey").next((function(e){return db(!!e),e}))}},{key:"qn",value:function(e,t){return fT(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=lE(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Fb.fromSegments(t.noDocument.path),i=cS(t.noDocument.readTime);n=nx.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return fb();var a=Fb.fromSegments(t.unknownDocument.path),o=cS(t.unknownDocument.version);n=nx.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Pb(e[0],e[1]);return Rb.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(Rb.min()))return n}return nx.newInvalidDocument(e)}}]),e}();function lT(e){return new cT(e)}var hT=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new EI((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return Lt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new y_((function(e,t){return Cb(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=oS(t.zn.wt,o);i=i.add(a.path.popLast());var c=KS(s);r+=c-u.size,n.push(t.zn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=oS(t.zn.wt,o.convertToNoDocument(Rb.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),Jb.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(sT);function fT(e){return eS(e,"remoteDocumentGlobal")}function dT(e){return eS(e,"remoteDocumentsV14")}function pT(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function vT(e,t){var n=t.documentKey.path.toArray();return[e,uS(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function yT(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Cb(n[a],r[a]))return i;return(i=Cb(n.length,r.length))||((i=Cb(n[n.length-2],r[r.length-2]))||Cb(n[n.length-1],r[r.length-1]))}var mT=Lt((function e(t,n){Dt(this,e),this.overlayedDocument=t,this.mutatedFields=n})),gT=function(){function e(t,n,r,i){Dt(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return Lt(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&lI(r.mutation,e,k_.empty(),Pb.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,MI()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:MI(),i=PI();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=AI();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=PI();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,MI())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=TI(),a=DI(),o=DI();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof pI)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),lI(o.mutation,t,o.mutation.getFieldMask(),Pb.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new mT(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=DI(),i=new d_((function(e,t){return e-t})),a=MI();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=Rt(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||k_.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||MI()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=RI();c.forEach((function(e){if(!a.has(e)){var n=sI(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Jb.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Fb.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Px(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Jb.resolve(PI()),u=-1,s=a;return o.next((function(t){return Jb.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Jb.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,MI())})).next((function(e){return{batchId:u,changes:NI(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Fb(t)).next((function(e){var t=AI();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=AI();return this.indexManager.getCollectionParents(e,i).next((function(o){return Jb.forEach(o,(function(o){var u=function(e,t){return new Ex(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,nx.newInvalidDocument(n)))}));var n=AI();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&lI(a.mutation,i,k_.empty(),Pb.now()),Ux(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Jb.resolve(nx.newInvalidDocument(t))}}]),e}(),kT=function(){function e(t){Dt(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return Lt(e,[{key:"getBundleMetadata",value:function(e,t){return Jb.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:eE(n.createTime)}),Jb.resolve()}},{key:"getNamedQuery",value:function(e,t){return Jb.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:dS(e.bundledQuery),readTime:eE(e.readTime)}}(t)),Jb.resolve()}}]),e}(),wT=function(){function e(){Dt(this,e),this.overlays=new d_(Fb.comparator),this.Xn=new Map}return Lt(e,[{key:"getOverlay",value:function(e,t){return Jb.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=PI();return Jb.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),Jb.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),Jb.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=PI(),i=t.length+1,a=new Fb(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Jb.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new d_((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=PI(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=PI(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Jb.resolve(s)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new rS(t,n));var a=this.Xn.get(t);void 0===a&&(a=MI(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),bT=function(){function e(){Dt(this,e),this.Zn=new y_(_T.ts),this.es=new y_(_T.ns)}return Lt(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new _T(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new _T(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new Fb(new Ob([])),r=new _T(n,e),i=new _T(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new Fb(new Ob([])),n=new _T(t,e),r=new _T(t,e+1),i=MI();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new _T(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),_T=function(){function e(t,n){Dt(this,e),this.key=t,this.ls=n}return Lt(e,null,[{key:"ts",value:function(e,t){return Fb.comparator(e.key,t.key)||Cb(e.ls,t.ls)}},{key:"ns",value:function(e,t){return Cb(e.ls,t.ls)||Fb.comparator(e.key,t.key)}}]),e}(),xT=function(){function e(t,n){Dt(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new y_(_T.ts)}return Lt(e,[{key:"checkEmpty",value:function(e){return Jb.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new tS(i,t,n,r);this.mutationQueue.push(a);var o,u=Rt(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.ds=this.ds.add(new _T(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Jb.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Jb.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return Jb.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Jb.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return Jb.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new _T(t,0),i=new _T(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),Jb.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new y_(Cb);return t.forEach((function(e){var t=new _T(e,0),i=new _T(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),Jb.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Fb.isDocumentKey(i)||(i=i.child(""));var a=new _T(new Fb(i),0),o=new y_(Cb);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),Jb.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;db(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return Jb.forEach(t.mutations,(function(i){var a=new _T(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new _T(t,0),r=this.ds.firstAfterOrEqual(n);return Jb.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Jb.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),IT=function(){function e(t){Dt(this,e),this.ps=t,this.docs=new d_(Fb.comparator),this.size=0}return Lt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Jb.resolve(n?n.document.mutableCopy():nx.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=TI();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():nx.newInvalidDocument(e))})),Jb.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=TI(),i=new Fb(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Hb(Wb(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Jb.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){fb()}},{key:"Is",value:function(e,t){return Jb.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ET(this)}},{key:"getSize",value:function(e){return Jb.resolve(this.size)}}]),e}(),ET=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this)).zn=e,r}return Lt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),Jb.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(sT),ST=function(){function e(t){Dt(this,e),this.persistence=t,this.Ts=new EI((function(e){return ax(e)}),ox),this.lastRemoteSnapshotVersion=Rb.min(),this.highestTargetId=0,this.Es=0,this.As=new bT,this.targetCount=0,this.Rs=JS.An()}return Lt(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),Jb.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Jb.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Jb.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),Jb.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),Jb.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new JS(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,Jb.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),Jb.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Jb.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Jb.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Jb.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return Jb.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),Jb.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Jb.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),Jb.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return Jb.resolve(n)}},{key:"containsKey",value:function(e,t){return Jb.resolve(this.As.containsKey(t))}}]),e}(),TT=function(){function e(t,n){var r=this;Dt(this,e),this.bs={},this.overlays={},this.Ps=new c_(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new ST(this),this.indexManager=new DS,this.remoteDocumentCache=new IT((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new aS(n),this.Ds=new kT(this.wt)}return Lt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new wT,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new xT(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;sb("MemoryPersistence","Starting transaction:",e);var i=new CT(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return Jb.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),CT=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return Lt(n)}(Qb),AT=function(){function e(t){Dt(this,e),this.persistence=t,this.ks=new bT,this.Ms=null}return Lt(e,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw fb()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),Jb.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),Jb.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),Jb.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Jb.forEach(this.Fs,(function(r){var i=Fb.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,Rb.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return Jb.or([function(){return Jb.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Os",value:function(t){return new e(t)}}]),e}(),NT=function(){function e(t){Dt(this,e),this.wt=t}return Lt(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Xb("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NE,{unique:!0}),e.createObjectStore("documentMutations")}(e),PT(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Jb.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),PT(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Rb.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",NE,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Jb.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:KE});t.createIndex("collectionPathOverlayIndex",HE,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",GE,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:OE});t.createIndex("documentKeyIndex",LE),t.createIndex("collectionGroupIndex",ME)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:BE}).createIndex("sequenceNumberIndex",qE,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:zE}).createIndex("documentKeyIndex",WE,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=KS(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return Jb.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return Jb.forEach(r,(function(r){db(r.userId===n.userId);var i=lS(t.wt,r);return WS(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new Ob(n),o=function(e){return[0,SE(e)]}(a);r.push(t.get(o).next((function(n){return n?Jb.resolve():function(n){return t.put({targetId:0,path:SE(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Jb.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:jE});var n=t.store("collectionParents"),r=new OS,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:SE(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new Ob(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=gt(e,3),r=(n[0],n[1]),a=(n[2],AE(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=hS(r),a=fS(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Fb(Ob.fromString(i.document.name).popFirst(5)):i.noDocument?Fb.fromSegments(i.noDocument.path):i.unknownDocument?Fb.fromSegments(i.unknownDocument.path):fb()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Jb.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=lT(this.wt),a=new TT(AT.Os,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:MI();lS(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Jb.forEach(r,(function(e,r){var o=new ib(r),u=wS.se(n.wt,o),s=a.getIndexManager(o),c=HS.se(o,n.wt,s,a.referenceDelegate);return new gT(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new ZE(t,c_.ot),e).next()}))}))}}]),e}();function PT(e){e.createObjectStore("targetDocuments",{keyPath:UE}).createIndex("documentTargetsIndex",VE,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",FE,{unique:!0}),e.createObjectStore("targetGlobal")}var RT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",DT=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(Dt(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=u,this.Ws=c,this.zs=l,this.Hs=h,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new yb(vb.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new oT(this,i),this.ei=n+"main",this.wt=new aS(s),this.ni=new Zb(this.ei,this.Hs,new NT(this.wt)),this.Vs=new XS(this.referenceDelegate,this.wt),this.remoteDocumentCache=lT(this.wt),this.Ds=new mS,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&cb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return Lt(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new yb(vb.FAILED_PRECONDITION,RT);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new c_(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=_t(wt().mark((function n(r){return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=_t(wt().mark((function t(n){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return LT(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if(n_(t))return sb("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return sb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return OT(e).get("owner").next((function(e){return Jb.resolve(t.di(e))}))}},{key:"_i",value:function(e){return LT(e).delete(this.clientId)}},{key:"wi",value:function(){var e=_t(wt().mark((function e(){var t,n,r,i,a=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=eS(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Jb.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=Rt(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?Jb.resolve(!0):OT(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new yb(vb.FAILED_PRECONDITION,RT);return!1}}return!(!t.networkEnabled||!t.inForeground)||LT(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&sb("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=_t(wt().mark((function e(){var t=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ZE(e,c_.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return LT(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return HS.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new MS(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return wS.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;sb("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Hs)?XE:14===i?JE:13===i?$E:12===i?YE:11===i?QE:void fb();return this.ni.runTransaction(e,o,u,(function(i){return a=new ZE(i,r.Ps?r.Ps.next():c_.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw cb("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new yb(vb.FAILED_PRECONDITION,Gb);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return OT(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new yb(vb.FAILED_PRECONDITION,RT)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return OT(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=OT(e);return n.get("owner").next((function(e){return t.di(e)?(sb("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Jb.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(cb("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Zt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return sb("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return cb("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(im){cb("Failed to set zombie client id.",im)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(im){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return Zb.V()}}]),e}();function OT(e){return eS(e,"owner")}function LT(e){return eS(e,"clientMetadata")}function MT(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var FT=function(){function e(t,n,r,i){Dt(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return Lt(e,null,[{key:"Vi",value:function(t,n){var r,i=MI(),a=MI(),o=Rt(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),UT=function(){function e(){Dt(this,e),this.Si=!1}return Lt(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){var n=this;if(Cx(t))return Jb.resolve(null);var r=Dx(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ox(t,null,"F"),r=Dx(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=MI.apply(void 0,Pt(i));return n.Di.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ki(t,i);return n.Mi(t,o,a,r.readTime)?n.Ci(e,Ox(t,null,"F")):n.Oi(e,o,t,r)}))}))})))}))}},{key:"xi",value:function(e,t,n,r){var i=this;return Cx(t)||r.isEqual(Rb.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Mi(t,o,n,r)?i.Ni(e,t):(ub()<=Dn.DEBUG&&sb("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Fx(t)),i.Oi(e,o,t,zb(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new y_(jx(e));return t.forEach((function(t,r){Ux(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return ub()<=Dn.DEBUG&&sb("QueryEngine","Using full collection scan to execute query:",Fx(t)),this.Di.getDocumentsMatchingQuery(e,t,Kb.min())}},{key:"Oi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),VT=function(){function e(t,n,r,i){Dt(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new d_(Cb),this.Bi=new EI((function(e){return ax(e)}),ox),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return Lt(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gT(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function jT(e,t,n,r){return new VT(e,t,n,r)}function BT(e,t){return qT.apply(this,arguments)}function qT(){return qT=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pb(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=MI(),s=Rt(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=Rt(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=Rt(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=Rt(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),qT.apply(this,arguments)}function zT(e,t){var n=pb(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Jb.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);db(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=MI(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function WT(e){var t=pb(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function KT(e,t){var n=pb(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(w_.EMPTY_BYTE_STRING,Rb.min()).withLastLimboFreeSnapshotVersion(Rb.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var u=TI(),s=MI();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(HT(e,a,t.documentUpdates).next((function(e){u=e.Gi,s=e.Qi}))),!r.isEqual(Rb.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Jb.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.$i=i,e}))}function HT(e,t,n){var r=MI(),i=MI();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=TI();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Rb.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):sb("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function GT(e,t){var n=pb(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function QT(e,t){var n=pb(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,Jb.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new iS(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function YT(e,t,n){return $T.apply(this,arguments)}function $T(){return $T=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=pb(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),n_(e.t1)){e.next=12;break}throw e.t1;case 12:sb("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),$T.apply(this,arguments)}function JT(e,t,n){var r=pb(e),i=Rb.min(),a=MI();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=pb(e),i=r.Bi.get(n);return void 0!==i?Jb.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,Dx(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:Rb.min(),n?a:MI())})).next((function(e){return eC(r,Vx(t),e),{documents:e,ji:a}}))}))}function XT(e,t){var n=pb(e),r=pb(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function ZT(e,t){var n=pb(e),r=n.Li.get(t)||Rb.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,zb(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return eC(n,t,e),e}))}function eC(e,t,n){var r=Rb.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function tC(e,t,n,r){return nC.apply(this,arguments)}function nC(){return nC=_t(wt().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,d,p;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=pb(t),o=MI(),u=TI(),s=Rt(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.Wi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),u=u.insert(h,f)}catch(v){s.e(v)}finally{s.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,QT(a,function(e){return Dx(Tx(Ob.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return HT(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),nC.apply(this,arguments)}function rC(e,t){return iC.apply(this,arguments)}function iC(){return iC=_t(wt().mark((function e(t,n){var r,i,a,o=arguments;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:MI(),e.next=3,QT(t,Dx(dS(n.bundledQuery)));case 3:return i=e.sent,a=pb(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=eE(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(w_.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),iC.apply(this,arguments)}function aC(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function oC(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function uC(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var sC=function(){function e(t,n,r,i){Dt(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return Lt(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new yb(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(cb("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),cC=function(){function e(t,n,r){Dt(this,e),this.targetId=t,this.state=n,this.error=r}return Lt(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new yb(i.error.code,i.error.message))),a?new e(t,i.state,r):(cb("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),lC=function(){function e(t,n){Dt(this,e),this.clientId=t,this.activeTargetIds=n}return Lt(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=UI(),o=0;i&&o<r.activeTargetIds.length;++o)i=R_(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(cb("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),hC=function(){function e(t,n){Dt(this,e),this.clientId=t,this.onlineState=n}return Lt(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(cb("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),fC=function(){function e(){Dt(this,e),this.activeTargetIds=UI()}return Lt(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),dC=function(){function e(t,n,r,i,a){Dt(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new d_(Cb),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=aC(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new fC),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return Lt(e,[{key:"start",value:function(){var e=_t(wt().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=Rt(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(aC(this.persistenceKey,i)))&&(o=lC.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(u=this.storage.getItem(this.lr))&&(s=this.wr(u))&&this.mr(s),c=Rt(this.ir);try{for(c.s();!(l=c.n()).done;)h=l.value,this.nr(h)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(uC(this.persistenceKey,e));if(n){var r=cC.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(uC(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return sb("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){sb("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){sb("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(sb("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void cb("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(_t(wt().mark((function e(){var r,i,a,o,u,s,c;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}s=function(e){var t=c_.ot;if(null!=e)try{var n=JSON.parse(e);db("number"==typeof n),t=n}catch(e){cb("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==c_.ot&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new sC(this.currentUser,e,t,n),i=oC(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=oC(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=uC(this.persistenceKey,e),i=new cC(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return lC.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return sC.Ji(new ib(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return cC.Ji(r,t)}},{key:"wr",value:function(e){return hC.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:sb("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Or(o,u).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=UI();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),pC=function(){function e(){Dt(this,e),this.Fr=new fC,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return Lt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new fC,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),vC=function(){function e(){Dt(this,e)}return Lt(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),yC=function(){function e(){var t=this;Dt(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return Lt(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){sb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=Rt(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){sb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=Rt(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),mC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},gC=function(){function e(t){Dt(this,e),this.jr=t.jr,this.Wr=t.Wr}return Lt(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),kC=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return Lt(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new nb;o.listenOnce(Jw.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case $w.NO_ERROR:var t=o.getResponseJson();sb("Connection","XHR received:",JSON.stringify(t)),i(t);break;case $w.TIMEOUT:sb("Connection",'RPC "'+e+'" timed out'),a(new yb(vb.DEADLINE_EXCEEDED,"Request time out"));break;case $w.HTTP_ERROR:var n=o.getStatus();if(sb("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(vb).indexOf(t)>=0?t:vb.UNKNOWN}(r.status);a(new yb(u,r.message))}else a(new yb(vb.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new yb(vb.UNAVAILABLE,"Connection failed."));break;default:fb()}}finally{sb("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Qw(),a=Yw(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new eb({})),this.uo(o.initMessageHeaders,t,n),Xt()||tn()||Jt().indexOf("Electron/")>=0||nn()||Jt().indexOf("MSAppHost/")>=0||en()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");sb("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new gC({jr:function(e){l?sb("Connection","Not sending because WebChannel is closed:",e):(c||(sb("Connection","Opening WebChannel transport."),s.open(),c=!0),sb("Connection","WebChannel sending:",e),s.send(e))},Wr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,tb.EventType.OPEN,(function(){l||sb("Connection","WebChannel transport opened.")})),f(s,tb.EventType.CLOSE,(function(){l||(l=!0,sb("Connection","WebChannel transport closed"),h.eo())})),f(s,tb.EventType.ERROR,(function(e){l||(l=!0,lb("Connection","WebChannel transport errored:",e),h.eo(new yb(vb.UNAVAILABLE,"The operation could not be completed")))})),f(s,tb.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];db(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){sb("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=gI[e];if(void 0!==t)return II(t)}(a),u=i.message;void 0===o&&(o=vb.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.eo(new yb(o,u)),s.close()}else sb("Connection","WebChannel received:",n),h.no(n)}})),f(a,Xw.STAT_EVENT,(function(e){e.stat===Zw.PROXY?sb("Connection","Detected buffering proxy"):e.stat===Zw.NOPROXY&&sb("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){Dt(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return Lt(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);sb("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return sb("RestConnection","Received: ",e),e}),(function(t){throw lb("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ab,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=mC[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function wC(){return"undefined"!=typeof window?window:null}function bC(){return"undefined"!=typeof document?document:null}function _C(e){return new $I(e,!0)}var xC=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;Dt(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return Lt(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&sb("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),IC=function(){function e(t,n,r,i,a,o,u,s){Dt(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new xC(t,n)}return Lt(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Mo()})))}},{key:"Oo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===vb.RESOURCE_EXHAUSTED?(cb(n.toString()),cb("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===vb.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=gt(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new yb(vb.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(_t(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return sb("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(sb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),EC=function(e){Et(n,e);var t=At(n);function n(e,r,i,a,o,u){var s;return Dt(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s}return Lt(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fb()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(db(void 0===t||"string"==typeof t),w_.fromBase64String(t||"")):(db(void 0===t||t instanceof Uint8Array),w_.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?vb.UNKNOWN:II(e.code);return new yb(t,e.message||"")}(o);n=new zI(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=iE(e,s.document.name),l=eE(s.document.updateTime),h=new ex({mapValue:{fields:s.document.fields}}),f=nx.newFoundDocument(c,l,h),d=s.targetIds||[],p=s.removedTargetIds||[];n=new BI(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=iE(e,v.document),m=v.readTime?eE(v.readTime):Rb.min(),g=nx.newNoDocument(y,m),k=v.removedTargetIds||[];n=new BI([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var b=iE(e,w.document),_=w.removedTargetIds||[];n=new BI([],_,b,null)}else{if(!("filter"in t))return fb();t.filter;var x=t.filter;x.targetId;var I=x.count||0,E=new _I(I),S=x.targetId;n=new qI(S,E)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return Rb.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Rb.min():t.readTime?eE(t.readTime):Rb.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=uE(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=ux(r)?{documents:pE(e,r)}:{query:vE(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=XI(e,t.resumeToken):t.snapshotVersion.compareTo(Rb.min())>0&&(n.readTime=JI(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fb()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Oo(t)}},{key:"jo",value:function(e){var t={};t.database=uE(this.wt),t.removeTarget=e,this.Oo(t)}}]),n}(IC),SC=function(e){Et(n,e);var t=At(n);function n(e,r,i,a,o,u){var s;return Dt(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).wt=o,s.Wo=!1,s}return Lt(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Nc(St(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(db(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(db(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?eE(e.updateTime):eE(t);return n.isEqual(Rb.min())&&(n=eE(t)),new iI(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=eE(e.commitTime);return this.listener.Jo(n,t)}return db(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=uE(this.wt),this.Oo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return fE(t.wt,e)}))};this.Oo(n)}}]),n}(IC),TC=function(e){Et(n,e);var t=At(n);function n(e,r,i,a){var o;return Dt(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return Lt(n,[{key:"tu",value:function(){if(this.Zo)throw new yb(vb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=gt(i,2),o=a[0],u=a[1];return r.bo.ro(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vb.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new yb(vb.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=gt(a,2),u=o[0],s=o[1];return i.bo.ao(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vb.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new yb(vb.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return Lt((function e(){Dt(this,e)}))}()),CC=function(){function e(t,n){Dt(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return Lt(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(cb(t),this.su=!1):sb("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),AC=Lt((function e(t,n,r,i,a){var o=this;Dt(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=jC(o),!e.t0){e.next=5;break}return sb("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=pb(t)).lu.add(4),e.next=4,RC(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,NC(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new CC(r,i)}));function NC(e){return PC.apply(this,arguments)}function PC(){return PC=_t(wt().mark((function e(t){var n,r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!jC(t)){e.next=18;break}n=Rt(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),PC.apply(this,arguments)}function RC(e){return DC.apply(this,arguments)}function DC(){return DC=_t(wt().mark((function e(t){var n,r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Rt(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),DC.apply(this,arguments)}function OC(e,t){var n=pb(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),VC(n)?UC(n):vA(n).Co()&&MC(n,t))}function LC(e,t){var n=pb(e),r=vA(n);n.hu.delete(t),r.Co()&&FC(n,t),0===n.hu.size&&(r.Co()?r.ko():jC(n)&&n._u.set("Unknown"))}function MC(e,t){e.wu.Nt(t.targetId),vA(e).Qo(t)}function FC(e,t){e.wu.Nt(t),vA(e).jo(t)}function UC(e){e.wu=new KI({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),vA(e).start(),e._u.iu()}function VC(e){return jC(e)&&!vA(e).Do()&&e.hu.size>0}function jC(e){return 0===pb(e).lu.size}function BC(e){e.wu=void 0}function qC(e){return zC.apply(this,arguments)}function zC(){return zC=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){MC(t,e)}));case 1:case"end":return e.stop()}}),e)}))),zC.apply(this,arguments)}function WC(e,t){return KC.apply(this,arguments)}function KC(){return KC=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:BC(t),VC(t)?(t._u.uu(n),UC(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),KC.apply(this,arguments)}function HC(e,t,n){return GC.apply(this,arguments)}function GC(){return GC=_t(wt().mark((function e(t,n,r){var i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof zI&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=_t(wt().mark((function e(t,n){var r,i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=Rt(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),sb("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,QC(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof BI?t.wu.Ut(n):n instanceof qI?t.wu.zt(n):t.wu.Gt(n),r.isEqual(Rb.min())){e.next=29;break}return e.prev=14,e.next=17,WT(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(w_.EMPTY_BYTE_STRING,n.snapshotVersion)),FC(e,t);var r=new iS(n.target,t,1,n.sequenceNumber);MC(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),sb("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,QC(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),GC.apply(this,arguments)}function QC(e,t,n){return YC.apply(this,arguments)}function YC(){return YC=_t(wt().mark((function e(t,n,r){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n_(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,RC(t);case 5:t._u.set("Offline"),r||(r=function(){return WT(t.localStore)}),t.asyncQueue.enqueueRetryable(_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sb("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,NC(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),YC.apply(this,arguments)}function $C(e,t){return t().catch((function(n){return QC(e,n,t)}))}function JC(e){return XC.apply(this,arguments)}function XC(){return XC=_t(wt().mark((function e(t){var n,r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pb(t),r=yA(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!ZC(n)){e.next=19;break}return e.prev=3,e.next=6,GT(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,eA(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,QC(n,e.t0);case 17:e.next=2;break;case 19:tA(n)&&nA(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),XC.apply(this,arguments)}function ZC(e){return jC(e)&&e.au.length<10}function eA(e,t){e.au.push(t);var n=yA(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function tA(e){return jC(e)&&!yA(e).Do()&&e.au.length>0}function nA(e){yA(e).start()}function rA(e){return iA.apply(this,arguments)}function iA(){return iA=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:yA(t).Xo();case 1:case"end":return e.stop()}}),e)}))),iA.apply(this,arguments)}function aA(e){return oA.apply(this,arguments)}function oA(){return oA=_t(wt().mark((function e(t){var n,r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=yA(t),r=Rt(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),oA.apply(this,arguments)}function uA(e,t,n){return sA.apply(this,arguments)}function sA(){return sA=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=nS.from(i,n,r),e.next=3,$C(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,JC(t);case 5:case"end":return e.stop()}}),e)}))),sA.apply(this,arguments)}function cA(e,t){return lA.apply(this,arguments)}function lA(){return lA=_t(wt().mark((function e(t,n){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&yA(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=_t(wt().mark((function e(t,n){var r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xI(i=n.code)||i===vb.ABORTED){e.next=7;break}return r=t.au.shift(),yA(t).No(),e.next=5,$C(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,JC(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:tA(t)&&nA(t);case 5:case"end":return e.stop()}}),e)}))),lA.apply(this,arguments)}function hA(e,t){return fA.apply(this,arguments)}function fA(){return fA=_t(wt().mark((function e(t,n){var r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=pb(t)).asyncQueue.verifyOperationInProgress(),sb("RemoteStore","RemoteStore received new credentials"),i=jC(r),r.lu.add(3),e.next=6,RC(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,NC(r);case 12:case"end":return e.stop()}}),e)}))),fA.apply(this,arguments)}function dA(e,t){return pA.apply(this,arguments)}function pA(){return pA=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pb(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,NC(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,RC(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),pA.apply(this,arguments)}function vA(e){return e.mu||(e.mu=function(e,t,n){var r=pb(e);return r.tu(),new EC(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:qC.bind(null,e),Jr:WC.bind(null,e),Go:HC.bind(null,e)}),e.fu.push(function(){var t=_t(wt().mark((function t(n){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),VC(e)?UC(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:BC(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function yA(e){return e.gu||(e.gu=function(e,t,n){var r=pb(e);return r.tu(),new SC(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:rA.bind(null,e),Jr:cA.bind(null,e),Yo:aA.bind(null,e),Jo:uA.bind(null,e)}),e.fu.push(function(){var t=_t(wt().mark((function t(n){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,JC(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(sb("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var mA=function(){function e(t,n,r,i,a){Dt(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new mb,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return Lt(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yb(vb.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function gA(e,t){if(cb("AsyncQueue","".concat(t,": ").concat(e)),n_(e))return new yb(vb.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var kA=function(){function e(t){Dt(this,e),this.comparator=t?function(e,n){return t(e,n)||Fb.comparator(e.key,n.key)}:function(e,t){return Fb.comparator(e.key,t.key)},this.keyedMap=AI(),this.sortedSet=new d_(this.comparator)}return Lt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),wA=function(){function e(){Dt(this,e),this.yu=new d_(Fb.comparator)}return Lt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):fb():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),bA=function(){function e(t,n,r,i,a,o,u,s){Dt(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return Lt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,kA.emptySet(n),a,r,i,!0,!1)}}]),e}(),_A=Lt((function e(){Dt(this,e),this.Iu=void 0,this.listeners=[]})),xA=Lt((function e(){Dt(this,e),this.queries=new EI((function(e){return Mx(e)}),Lx),this.onlineState="Unknown",this.Tu=new Set}));function IA(e,t){return EA.apply(this,arguments)}function EA(){return EA=_t(wt().mark((function e(t,n){var r,i,a,o,u;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pb(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new _A),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=gA(e.t0,"Initialization of query '".concat(Fx(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&NA(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),EA.apply(this,arguments)}function SA(e,t){return TA.apply(this,arguments)}function TA(){return TA=_t(wt().mark((function e(t,n){var r,i,a,o,u;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pb(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),TA.apply(this,arguments)}function CA(e,t){var n,r=pb(e),i=!1,a=Rt(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=Rt(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&NA(r)}function AA(e,t,n){var r=pb(e),i=r.queries.get(t);if(i){var a,o=Rt(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function NA(e){e.Tu.forEach((function(e){e.next()}))}var PA=function(){function e(t,n,r){Dt(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return Lt(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=Rt(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new bA(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=bA.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),RA=function(){function e(t,n){Dt(this,e),this.payload=t,this.byteLength=n}return Lt(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),DA=function(){function e(t){Dt(this,e),this.wt=t}return Lt(e,[{key:"Wi",value:function(e){return iE(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?lE(this.wt,e.document,!1):nx.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return eE(e)}}]),e}(),OA=function(){function e(t,n,r){Dt(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=LA(t)}return Lt(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=Ob.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new DA(this.wt),i=Rt(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Wi(a.metadata.name),s=Rt(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||MI()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=_t(wt().mark((function e(){var t,n,r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tC(this.localStore,new DA(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=Rt(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,rC(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Mu:this.collectionGroups,Ou:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function LA(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var MA=Lt((function e(t){Dt(this,e),this.key=t})),FA=Lt((function e(t){Dt(this,e),this.key=t})),UA=function(){function e(t,n){Dt(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=MI(),this.mutatedKeys=MI(),this.Lu=jx(t),this.Uu=new kA(this.Lu)}return Lt(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new wA,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Ux(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Lu(h,s)>0||c&&n.Lu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Mi:u,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fb()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],u=0===this.Bu.size&&this.current?1:0,s=u!==this.$u;return this.$u=u,0!==a.length||s?{snapshot:new bA(this.query,e.Uu,i,a,e.mutatedKeys,0===u,s,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new wA,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=MI(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new FA(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new MA(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=MI();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return bA.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),VA=Lt((function e(t,n,r){Dt(this,e),this.query=t,this.targetId=n,this.view=r})),jA=Lt((function e(t){Dt(this,e),this.key=t,this.Xu=!1})),BA=function(){function e(t,n,r,i,a,o){Dt(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new EI((function(e){return Mx(e)}),Lx),this.ec=new Map,this.nc=new Set,this.sc=new d_(Fb.comparator),this.ic=new Map,this.rc=new bT,this.oc={},this.uc=new Map,this.cc=JS.Rn(),this.onlineState="Unknown",this.ac=void 0}return Lt(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function qA(e,t){return zA.apply(this,arguments)}function zA(){return zA=_t(wt().mark((function e(t,n){var r,i,a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=LN(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,QT(r.localStore,Dx(n));case 8:return u=e.sent,r.isPrimaryClient&&OC(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,WA(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),zA.apply(this,arguments)}function WA(e,t,n,r){return KA.apply(this,arguments)}function KA(){return KA=_t(wt().mark((function e(t,n,r,i){var a,o,u,s,c,l;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=_t(wt().mark((function e(t,n,r,i){var a,o,u;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,JT(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(hN(t,n.targetId,u.zu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,JT(t.localStore,n,!0);case 3:return a=e.sent,o=new UA(n,a.ji),u=o.Ku(a.documents),s=jI.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),hN(t,r,c.zu),l=new VA(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),KA.apply(this,arguments)}function HA(e,t){return GA.apply(this,arguments)}function GA(){return GA=_t(wt().mark((function e(t,n){var r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pb(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!Lx(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,YT(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),LC(r.remoteStore,i.targetId),cN(r,i.targetId)})).catch(Yb);case 9:e.next=14;break;case 11:return cN(r,i.targetId),e.next=14,YT(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),GA.apply(this,arguments)}function QA(e,t,n){return YA.apply(this,arguments)}function YA(){return YA=_t(wt().mark((function e(t,n,r){var i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=MN(t),e.prev=1,e.next=4,function(e,t){var n,r,i=pb(e),a=Pb.now(),o=t.reduce((function(e,t){return e.add(t.key)}),MI());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=TI(),s=MI();return i.Ui.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=Rt(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=hI(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new pI(c.key,l,tx(l.value.mapValue),aI.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:NI(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new d_(Cb)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,pN(i,a.changes);case 9:return e.next=11,JC(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=gA(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),YA.apply(this,arguments)}function $A(e,t){return JA.apply(this,arguments)}function JA(){return JA=_t(wt().mark((function e(t,n){var r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pb(t),e.prev=1,e.next=4,KT(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(db(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?db(n.Xu):e.removedDocuments.size>0&&(db(n.Xu),n.Xu=!1))})),e.next=8,pN(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Yb(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),JA.apply(this,arguments)}function XA(e,t,n){var r=pb(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=pb(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=Rt(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&NA(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ZA(e,t,n){return eN.apply(this,arguments)}function eN(){return eN=_t(wt().mark((function e(t,n,r){var i,a,o,u,s,c;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=pb(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new d_(Fb.comparator)).insert(o,nx.newNoDocument(o,Rb.min())),s=MI().add(o),c=new VI(Rb.min(),new Map,new y_(Cb),u,s),e.next=9,$A(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),dN(i),e.next=16;break;case 14:return e.next=16,YT(i.localStore,n,!1).then((function(){return cN(i,n,r)})).catch(Yb);case 16:case"end":return e.stop()}}),e)}))),eN.apply(this,arguments)}function tN(e,t){return nN.apply(this,arguments)}function nN(){return nN=_t(wt().mark((function e(t,n){var r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pb(t),i=n.batch.batchId,e.prev=1,e.next=4,zT(r.localStore,n);case 4:return a=e.sent,sN(r,i,null),uN(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,pN(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yb(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),nN.apply(this,arguments)}function rN(e,t,n){return iN.apply(this,arguments)}function iN(){return iN=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pb(t),e.prev=1,e.next=4,function(e,t){var n=pb(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return db(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,sN(i,n,r),uN(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,pN(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Yb(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),iN.apply(this,arguments)}function aN(e,t){return oN.apply(this,arguments)}function oN(){return oN=_t(wt().mark((function e(t,n){var r,i,a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jC((r=pb(t)).remoteStore)||sb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=pb(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=gA(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),oN.apply(this,arguments)}function uN(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function sN(e,t,n){var r=pb(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function cN(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=Rt(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||lN(e,t)}))}function lN(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(LC(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),dN(e))}function hN(e,t,n){var r,i=Rt(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof MA?(e.rc.addReference(a.key,t),fN(e,a)):a instanceof FA?(sb("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||lN(e,a.key)):fb()}}catch(o){i.e(o)}finally{i.f()}}function fN(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(sb("SyncEngine","New document in limbo: "+n),e.nc.add(r),dN(e))}function dN(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new Fb(Ob.fromString(t)),r=e.cc.next();e.ic.set(r,new jA(n)),e.sc=e.sc.insert(n,r),OC(e.remoteStore,new iS(Dx(Tx(n.path)),r,2,c_.ot))}}function pN(e,t,n){return vN.apply(this,arguments)}function vN(){return vN=_t(wt().mark((function e(t,n,r){var i,a,o,u;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=pb(t),a=[],o=[],u=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){u.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=FT.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.Zu.Go(a),e.next=9,function(){var e=_t(wt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pb(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Jb.forEach(n,(function(t){return Jb.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Jb.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),n_(e.t0)){e.next=10;break}throw e.t0;case 10:sb("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=Rt(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.$i.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),vN.apply(this,arguments)}function yN(e,t){return mN.apply(this,arguments)}function mN(){return mN=_t(wt().mark((function e(t,n){var r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=pb(t)).currentUser.isEqual(n)){e.next=11;break}return sb("SyncEngine","User change. New user:",n.toKey()),e.next=5,BT(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new yb(vb.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,pN(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),mN.apply(this,arguments)}function gN(e,t){var n=pb(e),r=n.ic.get(t);if(r&&r.Xu)return MI().add(r.key);var i=MI(),a=n.ec.get(t);if(!a)return i;var o,u=Rt(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.tc.get(s);i=i.unionWith(c.view.qu)}}catch(l){u.e(l)}finally{u.f()}return i}function kN(e,t){return wN.apply(this,arguments)}function wN(){return wN=_t(wt().mark((function e(t,n){var r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pb(t),e.next=3,JT(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&hN(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),wN.apply(this,arguments)}function bN(e,t){return _N.apply(this,arguments)}function _N(){return _N=_t(wt().mark((function e(t,n){var r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pb(t),e.abrupt("return",ZT(r.localStore,n).then((function(e){return pN(r,e)})));case 2:case"end":return e.stop()}}),e)}))),_N.apply(this,arguments)}function xN(e,t,n,r){return IN.apply(this,arguments)}function IN(){return IN=_t(wt().mark((function e(t,n,r,i){var a,o;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pb(t),e.next=3,function(e,t){var n=pb(e),r=pb(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Jb.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,JC(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(sN(a,n,i||null),uN(a,n),function(e,t){pb(pb(e).mutationQueue).In(t)}(a.localStore,n)):fb();case 11:return e.next=13,pN(a,o);case 13:e.next=16;break;case 15:sb("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),IN.apply(this,arguments)}function EN(e,t){return SN.apply(this,arguments)}function SN(){return SN=_t(wt().mark((function e(t,n){var r,i,a,o,u,s,c,l;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(LN(r=pb(t)),MN(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,TN(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,dA(r.remoteStore,!0);case 9:o=Rt(a);try{for(o.s();!(u=o.n()).done;)s=u.value,OC(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return cN(r,t),YT(r.localStore,t,!0)})),LC(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,TN(r,c);case 21:return function(e){var t=pb(e);t.ic.forEach((function(e,n){LC(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new d_(Fb.comparator)}(r),r.ac=!1,e.next=25,dA(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),SN.apply(this,arguments)}function TN(e,t,n){return CN.apply(this,arguments)}function CN(){return CN=_t(wt().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d,p,v,y,m;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=pb(t),a=[],o=[],u=Rt(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.ec.get(c))||0===h.length){e.next=34;break}return e.next=11,QT(i.localStore,Dx(h[0]));case 11:l=e.sent,f=Rt(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,kN(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,XT(i.localStore,c);case 36:return m=e.sent,e.next=39,QT(i.localStore,m);case 39:return l=e.sent,e.next=42,WA(i,AN(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),CN.apply(this,arguments)}function AN(e){return Sx(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function NN(e){var t=pb(e);return pb(pb(t.localStore).persistence).Ri()}function PN(e,t,n,r){return RN.apply(this,arguments)}function RN(){return RN=_t(wt().mark((function e(t,n,r,i){var a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=pb(t)).ac){e.next=3;break}return e.abrupt("return",void sb("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,ZT(a.localStore,Vx(o[0]));case 10:return u=e.sent,s=VI.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,pN(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,YT(a.localStore,n,!0);case 17:return cN(a,n,i),e.abrupt("break",20);case 19:fb();case 20:case"end":return e.stop()}}),e)}))),RN.apply(this,arguments)}function DN(e,t,n){return ON.apply(this,arguments)}function ON(){return ON=_t(wt().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=LN(t)).ac){e.next=45;break}a=Rt(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ec.has(u)){e.next=10;break}return sb("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,XT(i.localStore,u);case 12:return s=e.sent,e.next=15,QT(i.localStore,s);case 15:return c=e.sent,e.next=18,WA(i,AN(s),c.targetId,!1);case 18:OC(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=Rt(r),e.prev=30,f=wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,YT(i.localStore,t,!1).then((function(){LC(i.remoteStore,t),cN(i,t)})).catch(Yb);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),ON.apply(this,arguments)}function LN(e){var t=pb(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=$A.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gN.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ZA.bind(null,t),t.Zu.Go=CA.bind(null,t.eventManager),t.Zu.lc=AA.bind(null,t.eventManager),t}function MN(e){var t=pb(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=tN.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=rN.bind(null,t),t}function FN(e,t,n){var r=pb(e);(function(){var e=_t(wt().mark((function e(t,n,r){var i,a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=pb(e),r=eE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(LA(i)),a=new OA(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,pN(t,s.Ou,void 0);case 31:return e.next=33,function(e,t){var n=pb(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Mu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(lb("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var UN=function(){function e(){Dt(this,e),this.synchronizeTabs=!1}return Lt(e,[{key:"initialize",value:function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=_C(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return jT(this.persistence,new UT,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new TT(AT.Os,this.wt)}},{key:"dc",value:function(e){return new pC}},{key:"terminate",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),VN=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return Lt(n,[{key:"initialize",value:function(){var e=_t(wt().mark((function e(t){var r=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nc(St(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,MN(this.yc.syncEngine);case 6:return e.next=8,JC(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return jT(this.persistence,new UT,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new iT(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new s_(t,this.persistence);return new u_(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=MT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?zS.withCacheSize(this.cacheSizeBytes):zS.DEFAULT;return new DT(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,wC(),bC(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new pC}}]),n}(UN),jN=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Lt(n,[{key:"initialize",value:function(){var e=_t(wt().mark((function e(t){var r,i=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nc(St(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof dC,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:xN.bind(null,r),Mr:PN.bind(null,r),Or:DN.bind(null,r),Ri:NN.bind(null,r),Nr:bN.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EN(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=wC();if(!dC.V(t))throw new yb(vb.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=MT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dC(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(VN),BN=function(){function e(){Dt(this,e)}return Lt(e,[{key:"initialize",value:function(){var e=_t(wt().mark((function e(t,n){var r=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return XA(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=yN.bind(null,this.syncEngine),e.next=12,dA(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new xA}},{key:"createDatastore",value:function(e){var t,n=_C(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new kC(t));return function(e,t,n,r){return new TC(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return XA(o.syncEngine,e,0)},a=yC.V()?new yC:new vC,new AC(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new BA(e,t,n,r,i,a);return o&&(u.ac=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pb(t),sb("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,RC(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function qN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return _t(wt().mark((function r(){var i;return wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return _t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var zN=function(){function e(t){Dt(this,e),this.observer=t,this.muted=!1}return Lt(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):cb("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),WN=function(){function e(t,n){var r=this;Dt(this,e),this.Ec=t,this.wt=n,this.metadata=new mb,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return Lt(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=_t(wt().mark((function e(){var t,n,r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new RA(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=_t(wt().mark((function e(){var t,n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=_t(wt().mark((function e(){var t,n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),KN=function(){function e(t){Dt(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return Lt(e,[{key:"lookup",value:function(){var e=_t(wt().mark((function e(t){var n,r=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new yb(vb.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=_t(wt().mark((function e(t,n){var r,i,a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pb(t),i=uE(r.wt)+"/documents",a={documents:n.map((function(e){return rE(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=hE(r.wt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());db(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new wI(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=_t(wt().mark((function e(){var t,n=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Fb.fromPath(t);n.mutations.push(new bI(r,n.precondition(r)))})),e.next=7,function(){var e=_t(wt().mark((function e(t,n){var r,i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pb(t),i=uE(r.wt)+"/documents",a={writes:n.map((function(e){return fE(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fb();t=Rb.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new yb(vb.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?aI.updateTime(t):aI.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Rb.min()))throw new yb(vb.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return aI.updateTime(t)}return aI.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),HN=function(){function e(t,n,r,i,a){Dt(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new xC(this.asyncQueue,"transaction_retry")}return Lt(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(_t(wt().mark((function t(){var n,r;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new KN(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!N_(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!xI(t)}return!1}}]),e}(),GN=function(){function e(t,n,r,i){var a=this;Dt(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ib.UNAUTHENTICATED,this.clientId=Tb.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sb("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return sb("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return Lt(e,[{key:"getConfiguration",value:function(){var e=_t(wt().mark((function e(){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new yb(vb.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new mb;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(_t(wt().mark((function n(){var r;return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=gA(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function QN(e,t){return YN.apply(this,arguments)}function YN(){return YN=_t(wt().mark((function e(t,n){var r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),sb("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,BT(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),YN.apply(this,arguments)}function $N(e,t){return JN.apply(this,arguments)}function JN(){return JN=_t(wt().mark((function e(t,n){var r,i;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,XN(t);case 3:return r=e.sent,sb("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return hA(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return hA(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),JN.apply(this,arguments)}function XN(e){return ZN.apply(this,arguments)}function ZN(){return ZN=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return sb("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,QN(t,new UN);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ZN.apply(this,arguments)}function eP(e){return tP.apply(this,arguments)}function tP(){return tP=_t(wt().mark((function e(t){return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return sb("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,$N(t,new BN);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),tP.apply(this,arguments)}function nP(e){return XN(e).then((function(e){return e.persistence}))}function rP(e){return XN(e).then((function(e){return e.localStore}))}function iP(e){return eP(e).then((function(e){return e.remoteStore}))}function aP(e){return eP(e).then((function(e){return e.syncEngine}))}function oP(e){return uP.apply(this,arguments)}function uP(){return uP=_t(wt().mark((function e(t){var n,r;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eP(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=qA.bind(null,n.syncEngine),r.onUnlisten=HA.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),uP.apply(this,arguments)}function sP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new mb;return e.asyncQueue.enqueueAndForget(_t(wt().mark((function i(){return wt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new zN({next:function(a){t.enqueueAndForget((function(){return SA(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new yb(vb.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new yb(vb.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new PA(Tx(n.path),a,{includeMetadataChanges:!0,Du:!0});return IA(e,o)},i.next=3,oP(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function cP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new mb;return e.asyncQueue.enqueueAndForget(_t(wt().mark((function i(){return wt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new zN({next:function(n){t.enqueueAndForget((function(){return SA(e,o)})),n.fromCache&&"server"===r.source?i.reject(new yb(vb.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new PA(n,a,{includeMetadataChanges:!0,Du:!0});return IA(e,o)},i.next=3,oP(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var lP=new Map;function hP(e,t,n){if(!n)throw new yb(vb.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fP(e,t,n,r){if(!0===t&&!0===r)throw new yb(vb.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function dP(e){if(!Fb.isDocumentKey(e))throw new yb(vb.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function pP(e){if(Fb.isDocumentKey(e))throw new yb(vb.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function vP(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":fb()}function yP(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yb(vb.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vP(e);throw new yb(vb.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function mP(e,t){if(t<=0)throw new yb(vb.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var gP=function(){function e(t){var n;if(Dt(this,e),void 0===t.host){if(void 0!==t.ssl)throw new yb(vb.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new yb(vb.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,fP("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return Lt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),kP=function(){function e(t,n,r){Dt(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gP({}),this._settingsFrozen=!1,t instanceof A_?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yb(vb.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new A_(e.options.projectId)}(t))}return Lt(e,[{key:"app",get:function(){if(!this._app)throw new yb(vb.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new yb(vb.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gP(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new kb;switch(e.type){case"gapi":var t=e.client;return db(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new xb(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new yb(vb.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=lP.get(e);t&&(sb("ComponentProvider","Removing Datastore"),lP.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function wP(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=yP(e,kP))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&lb("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=ib.MOCK_USER;else{o=$t(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new yb(vb.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ib(s)}e._authCredentials=new wb(new gb(o,u))}}var bP=function(){function e(t,n,r){Dt(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return Lt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new xP(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),_P=function(){function e(t,n,r){Dt(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return Lt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),xP=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this,e,r,Tx(i)))._path=i,a.type="collection",a}return Lt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bP(this.firestore,null,new Fb(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(_P);function IP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Cn(e),hP("collection","path",t),e instanceof kP){var a=Ob.fromString.apply(Ob,[t].concat(r));return pP(a),new xP(e,null,a)}if(!(e instanceof bP||e instanceof xP))throw new yb(vb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ob.fromString.apply(Ob,[t].concat(r)));return pP(o),new xP(e.firestore,null,o)}function EP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Cn(e),1===arguments.length&&(t=Tb.I()),hP("doc","path",t),e instanceof kP){var a=Ob.fromString.apply(Ob,[t].concat(r));return dP(a),new bP(e,null,new Fb(a))}if(!(e instanceof bP||e instanceof xP))throw new yb(vb.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Ob.fromString.apply(Ob,[t].concat(r)));return dP(o),new bP(e.firestore,e instanceof xP?e.converter:null,new Fb(o))}function SP(e,t){return e=Cn(e),t=Cn(t),(e instanceof bP||e instanceof xP)&&(t instanceof bP||t instanceof xP)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function TP(e,t){return e=Cn(e),t=Cn(t),e instanceof _P&&t instanceof _P&&e.firestore===t.firestore&&Lx(e._query,t._query)&&e.converter===t.converter}var CP=function(){function e(){var t=this;Dt(this,e),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new xC(this,"async_queue_retry"),this.Kc=function(){var e=bC();e&&sb("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=bC();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return Lt(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=bC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new mb;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Oc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=_t(wt().mark((function e(){var t=this;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Oc.length){e.next=14;break}return e.prev=1,e.next=4,this.Oc[0]();case 4:this.Oc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),n_(e.t0)){e.next=12;break}throw e.t0;case 12:sb("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Oc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Mc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw cb("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=mA.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&fb()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=_t(wt().mark((function e(){var t;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Mc,e.next=3,t;case 3:if(t!==this.Mc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=Rt(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=Rt(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function AP(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=Rt(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var NP=function(){function e(){Dt(this,e),this._progressObserver={},this._taskCompletionResolver=new mb,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return Lt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),PP=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new CP,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return Lt(n,[{key:"_terminate",value:function(){return this._firestoreClient||DP(this),this._firestoreClient.terminate()}}]),n}(kP);function RP(e){return e._firestoreClient||DP(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function DP(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new C_(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new GN(e._authCredentials,e._appCheckCredentials,e._queue,r)}function OP(e,t,n){var r=new mb;return e.asyncQueue.enqueue(_t(wt().mark((function i(){var a;return wt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,QN(e,n);case 3:return i.next=5,$N(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===vb.FAILED_PRECONDITION||e.code===vb.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:lb("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function LP(e){return function(e){return e.asyncQueue.enqueue(_t(wt().mark((function t(){var n,r;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nP(e);case 2:return n=t.sent,t.next=5,iP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=pb(e);return t.lu.delete(0),NC(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(RP(e=yP(e,PP)))}function MP(e){return function(e){return e.asyncQueue.enqueue(_t(wt().mark((function t(){var n,r;return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nP(e);case 2:return n=t.sent,t.next=5,iP(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=pb(t)).lu.add(0),e.next=4,RC(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(RP(e=yP(e,PP)))}function FP(e,t){var n=RP(e=yP(e,PP)),r=new NP;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new WN(e,t)}(function(e,t){if(e instanceof Uint8Array)return qN(e,t);if(e instanceof ArrayBuffer)return qN(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,_C(t));e.asyncQueue.enqueueAndForget(_t(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=FN,t.next=3,aP(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function UP(e,t){return function(e,t){return e.asyncQueue.enqueue(_t(wt().mark((function n(){return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=pb(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,rP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(RP(e=yP(e,PP)),t).then((function(t){return t?new _P(e,null,t.query):null}))}function VP(e){if(e._initialized||e._terminated)throw new yb(vb.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var jP=function(){function e(){Dt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new yb(vb.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mb(n)}return Lt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var BP=function(){function e(t){Dt(this,e),this._byteString=t}return Lt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(w_.fromBase64String(t))}catch(t){throw new yb(vb.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(w_.fromUint8Array(t))}}]),e}(),qP=Lt((function e(t){Dt(this,e),this._methodName=t})),zP=function(){function e(t,n){if(Dt(this,e),!isFinite(t)||t<-90||t>90)throw new yb(vb.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new yb(vb.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return Lt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Cb(this._lat,e._lat)||Cb(this._long,e._long)}}]),e}(),WP=/^__.*__$/,KP=function(){function e(t,n,r){Dt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Lt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new pI(e,this.data,this.fieldMask,t,this.fieldTransforms):new dI(e,this.data,t,this.fieldTransforms)}}]),e}(),HP=function(){function e(t,n,r){Dt(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return Lt(e,[{key:"toMutation",value:function(e,t){return new pI(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function GP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fb()}}var QP=function(){function e(t,n,r,i,a,o){Dt(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return Lt(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return pR(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(GP(this.Zc)&&WP.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),YP=function(){function e(t,n,r){Dt(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||_C(t)}return Lt(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new QP({Zc:e,methodName:t,ca:n,path:Mb.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function $P(e){var t=e._freezeSettings(),n=_C(e._databaseId);return new YP(e._databaseId,!!t.ignoreUndefinedProperties,n)}function JP(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);lR("Data must be an object, but it was:",o,r);var u,s,c=sR(r,o);if(a.merge)u=new k_(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=Rt(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=hR(t,d,n);if(!o.contains(p))throw new yb(vb.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));vR(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}u=new k_(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new KP(new ex(c),u,s)}var XP=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(qP);function ZP(e,t,n){return new QP({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var eR=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"_toFieldTransform",value:function(e){return new rI(e.path,new Yx)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(qP),tR=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e)).ha=r,i}return Lt(n,[{key:"_toFieldTransform",value:function(e){var t=ZP(this,e,!0),n=this.ha.map((function(e){return uR(e,t)})),r=new $x(n);return new rI(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(qP),nR=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e)).ha=r,i}return Lt(n,[{key:"_toFieldTransform",value:function(e){var t=ZP(this,e,!0),n=this.ha.map((function(e){return uR(e,t)})),r=new Xx(n);return new rI(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(qP),rR=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e)).la=r,i}return Lt(n,[{key:"_toFieldTransform",value:function(e){var t=new eI(e.wt,Wx(e.wt,this.la));return new rI(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(qP);function iR(e,t,n,r){var i=e.aa(1,t,n);lR("Data must be an object, but it was:",i,r);var a=[],o=ex.empty();h_(r,(function(e,r){var u=dR(t,e,n);r=Cn(r);var s=i.ia(u);if(r instanceof XP)a.push(u);else{var c=uR(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new k_(a);return new HP(o,u,i.fieldTransforms)}function aR(e,t,n,r,i,a){var o=e.aa(1,t,n),u=[hR(t,r,n)],s=[i];if(a.length%2!=0)throw new yb(vb.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(hR(t,a[c])),s.push(a[c+1]);for(var l=[],h=ex.empty(),f=u.length-1;f>=0;--f)if(!vR(l,u[f])){var d=u[f],p=s[f];p=Cn(p);var v=o.ia(d);if(p instanceof XP)l.push(d);else{var y=uR(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new k_(l);return new HP(h,m,o.fieldTransforms)}function oR(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return uR(n,e.aa(r?4:3,t))}function uR(e,t){if(cR(e=Cn(e)))return lR("Unsupported field value:",t,e),sR(e,t);if(e instanceof qP)return function(e,t){if(!GP(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=Rt(e);try{for(a.s();!(n=a.n()).done;){var o=uR(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Cn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wx(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Pb.fromDate(e);return{timestampValue:JI(t.wt,n)}}if(e instanceof Pb){var r=new Pb(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:JI(t.wt,r)}}if(e instanceof zP)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof BP)return{bytesValue:XI(t.wt,e._byteString)};if(e instanceof bP){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:tE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(vP(e)))}(e,t)}function sR(e,t){var n={};return f_(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):h_(e,(function(e,r){var i=uR(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function cR(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Pb||e instanceof zP||e instanceof BP||e instanceof bP||e instanceof qP)}function lR(e,t,n){if(!cR(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=vP(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function hR(e,t,n){if((t=Cn(t))instanceof jP)return t._internalPath;if("string"==typeof t)return dR(e,t);throw pR("Field path arguments must be of type string or ",e,!1,void 0,n)}var fR=new RegExp("[~\\*/\\[\\]]");function dR(e,t,n){if(t.search(fR)>=0)throw pR("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return Mt(jP,Pt(t.split(".")))._internalPath}catch(r){throw pR("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function pR(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new yb(vb.INVALID_ARGUMENT,u+e+s)}function vR(e,t){return e.some((function(e){return e.isEqual(t)}))}var yR=function(){function e(t,n,r,i,a){Dt(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return Lt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bP(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new mR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(gR("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),mR=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"data",value:function(){return Nc(St(n.prototype),"data",this).call(this)}}]),n}(yR);function gR(e,t){return"string"==typeof t?dR(e,t):t instanceof jP?t._internalPath:t._delegate._internalPath}var kR=function(){function e(t,n){Dt(this,e),this.hasPendingWrites=t,this.fromCache=n}return Lt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),wR=function(e){Et(n,e);var t=At(n);function n(e,r,i,a,o,u){var s;return Dt(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Lt(n,[{key:"exists",value:function(){return Nc(St(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new bR(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(gR("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(yR),bR=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Nc(St(n.prototype),"data",this).call(this,e)}}]),n}(wR),_R=function(){function e(t,n,r,i){Dt(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new kR(i.hasPendingWrites,i.fromCache),this.query=r}return Lt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new bR(n._firestore,n._userDataWriter,r.key,r,new kR(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yb(vb.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new bR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new kR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new bR(e._firestore,e._userDataWriter,t.doc.key,t.doc,new kR(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:xR(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function xR(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fb()}}function IR(e,t){return e instanceof wR&&t instanceof wR?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof _R&&t instanceof _R&&e._firestore===t._firestore&&TP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function ER(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new yb(vb.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var SR=Lt((function e(){Dt(this,e)}));function TR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var CR=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return Lt(n,[{key:"_apply",value:function(e){var t=$P(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new yb(vb.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){VR(o,a);var s,c=[],l=Rt(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(UR(r,e,h))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=UR(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||VR(o,a),u=oR(n,"where",o,"in"===a||"not-in"===a);var f=hx.create(i,a,u);return function(e,t){if(t.ht()){var n=Nx(e);if(null!==n&&!n.isEqual(t.field))throw new yb(vb.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ax(e);null!==r&&jR(e,t.field,r)}var i=function(e,t){var n,r=Rt(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new yb(vb.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new yb(vb.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new _P(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ex(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(SR);var AR=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return Lt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new yb(vb.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new yb(vb.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new bx(t,n);return function(e,t){if(null===Ax(e)){var n=Nx(e);null!==n&&jR(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new _P(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ex(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(SR);var NR=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return Lt(n,[{key:"_apply",value:function(e){return new _P(e.firestore,e.converter,Ox(e._query,this.ma,this.ga))}}]),n}(SR);var PR=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Lt(n,[{key:"_apply",value:function(e){var t=FR(e,this.type,this.ya,this.pa);return new _P(e.firestore,e.converter,function(e,t){return new Ex(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(SR);function RR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PR("startAt",t,!0)}function DR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new PR("startAfter",t,!1)}var OR=function(e){Et(n,e);var t=At(n);function n(e,r,i){var a;return Dt(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return Lt(n,[{key:"_apply",value:function(e){var t=FR(e,this.type,this.ya,this.pa);return new _P(e.firestore,e.converter,function(e,t){return new Ex(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(SR);function LR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OR("endBefore",t,!1)}function MR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new OR("endAt",t,!0)}function FR(e,t,n,r){if(n[0]=Cn(n[0]),n[0]instanceof yR)return function(e,t,n,r,i){if(!r)throw new yb(vb.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=Rt(Rx(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(q_(t,r.key));else{var c=r.data.field(s.field);if(E_(c))throw new yb(vb.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new yb(vb.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new wx(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=$P(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new yb(vb.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new yb(vb.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Px(e)&&-1!==c.indexOf("/"))throw new yb(vb.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Ob.fromString(c));if(!Fb.isDocumentKey(l))throw new yb(vb.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Fb(l);u.push(q_(t,h))}else{var f=oR(n,r,c);u.push(f)}}return new wx(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function UR(e,t,n){if("string"==typeof(n=Cn(n))){if(""===n)throw new yb(vb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Px(t)&&-1!==n.indexOf("/"))throw new yb(vb.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Ob.fromString(n));if(!Fb.isDocumentKey(r))throw new yb(vb.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return q_(e,new Fb(r))}if(n instanceof bP)return q_(e,n._key);throw new yb(vb.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(vP(n),"."))}function VR(e,t){if(!Array.isArray(e)||0===e.length)throw new yb(vb.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new yb(vb.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function jR(e,t,n){if(!n.isEqual(t))throw new yb(vb.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var BR={maxAttempts:5},qR=function(){function e(){Dt(this,e)}return Lt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(L_(e)){case 0:return null;case 1:return e.booleanValue;case 2:return x_(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(I_(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fb()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return h_(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new zP(x_(e.latitude),x_(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=S_(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(T_(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=__(e);return new Pb(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Ob.fromString(e);db(EE(n));var r=new A_(n.get(1),n.get(3)),i=new Fb(n.popFirst(5));return r.isEqual(t)||cb("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function zR(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var WR=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this)).firestore=e,r}return Lt(n,[{key:"convertBytes",value:function(e){return new BP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bP(this.firestore,null,t)}}]),n}(qR),KR=function(){function e(t,n){Dt(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$P(t)}return Lt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=HR(e,this._firestore),i=zR(r.converter,t,n),a=JP(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,aI.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=HR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Cn(t))||t instanceof jP?aR(this._dataReader,"WriteBatch.update",i._key,t,n,o):iR(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,aI.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=HR(e,this._firestore);return this._mutations=this._mutations.concat(new wI(t._key,aI.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new yb(vb.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function HR(e,t){if((e=Cn(e)).firestore!==t)throw new yb(vb.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var GR=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this)).firestore=e,r}return Lt(n,[{key:"convertBytes",value:function(e){return new BP(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bP(this.firestore,null,t)}}]),n}(qR);function QR(e){e=yP(e,bP);var t=yP(e.firestore,PP),n=RP(t),r=new GR(t);return function(e,t){var n=new mb;return e.asyncQueue.enqueueAndForget(_t(wt().mark((function r(){return wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_t(wt().mark((function e(t,n,r){var i,a;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=pb(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new yb(vb.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=gA(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,rP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new wR(t,r,e._key,n,new kR(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function YR(e){e=yP(e,_P);var t=yP(e.firestore,PP),n=RP(t),r=new GR(t);return function(e,t){var n=new mb;return e.asyncQueue.enqueueAndForget(_t(wt().mark((function r(){return wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=_t(wt().mark((function e(t,n,r){var i,a,o,u,s;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,JT(t,n,!0);case 3:i=e.sent,a=new UA(n,i.ji),o=a.Ku(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=gA(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,rP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new _R(t,r,e,n)}))}function $R(e,t,n){e=yP(e,bP);var r=yP(e.firestore,PP),i=zR(e.converter,t,n);return eD(r,[JP($P(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,aI.none())])}function JR(e,t,n){e=yP(e,bP);for(var r=yP(e.firestore,PP),i=$P(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return eD(r,[("string"==typeof(t=Cn(t))||t instanceof jP?aR(i,"updateDoc",e._key,t,n,o):iR(i,"updateDoc",e._key,t)).toMutation(e._key,aI.exists(!0))])}function XR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Cn(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||AP(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(AP(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof bP)l=yP(e.firestore,PP),h=Tx(e._key.path),c={next:function(t){n[s]&&n[s](tD(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=yP(e,_P);l=yP(p.firestore,PP),h=p._query;var v=new GR(l);c={next:function(e){n[s]&&n[s](new _R(l,v,p,e))},error:n[s+1],complete:n[s+2]},ER(e._query)}return function(e,t,n,r){var i=new zN(r),a=new PA(t,i,n);return e.asyncQueue.enqueueAndForget(_t(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=IA,t.next=3,oP(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(_t(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=SA,t.next=3,oP(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(RP(l),h,f,c)}function ZR(e,t){return function(e,t){var n=new zN(t);return e.asyncQueue.enqueueAndForget(_t(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){pb(e).Tu.add(t),t.next()},t.next=3,oP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(_t(wt().mark((function t(){return wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){pb(e).Tu.delete(t)},t.next=3,oP(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(RP(e=yP(e,PP)),AP(t)?t:{next:t})}function eD(e,t){return function(e,t){var n=new mb;return e.asyncQueue.enqueueAndForget(_t(wt().mark((function r(){return wt().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=QA,r.next=3,aP(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(RP(e),t)}function tD(e,t,n){var r=n.docs.get(t._key),i=new GR(e);return new wR(e,i,t._key,r,new kR(n.hasPendingWrites,n.fromCache),t.converter)}var nD=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e,r))._firestore=e,i}return Lt(n,[{key:"get",value:function(e){var t=this,r=HR(e,this._firestore),i=new GR(this._firestore);return Nc(St(n.prototype),"get",this).call(this,e).then((function(e){return new wR(t._firestore,i,r._key,e._document,new kR(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){Dt(this,e),this._firestore=t,this._transaction=n,this._dataReader=$P(t)}return Lt(e,[{key:"get",value:function(e){var t=this,n=HR(e,this._firestore),r=new WR(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return fb();var i=e[0];if(i.isFoundDocument())return new yR(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new yR(t._firestore,r,n._key,null,n.converter);throw fb()}))}},{key:"set",value:function(e,t,n){var r=HR(e,this._firestore),i=zR(r.converter,t,n),a=JP(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=HR(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Cn(t))||t instanceof jP?aR(this._dataReader,"Transaction.update",i._key,t,n,o):iR(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=HR(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function rD(e,t,n){e=yP(e,PP);var r=Object.assign(Object.assign({},BR),n);return function(e){if(e.maxAttempts<1)throw new yb(vb.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new mb;return e.asyncQueue.enqueueAndForget(_t(wt().mark((function i(){var a;return wt().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return eP(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new HN(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(RP(e),(function(n){return t(new nD(e,n))}),r)}function iD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tR("arrayUnion",t)}function aD(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nR("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ab=e}(_r),vr(new An("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new PP(i,new bb(e.getProvider("auth-internal")),new Eb(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),Cr(rb,"3.4.14",e),Cr(rb,"3.4.14","esm2017")}();function oD(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new yb("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function uD(){if("undefined"===typeof Uint8Array)throw new yb("unimplemented","Uint8Arrays are not available in this environment.")}function sD(){if("undefined"==typeof atob)throw new yb("unimplemented","Blobs are unavailable in Firestore in this environment.")}var cD=function(){function e(t){Dt(this,e),this._delegate=t}return Lt(e,[{key:"toBase64",value:function(){return sD(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return uD(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return sD(),new e(BP.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return uD(),new e(BP.fromUint8Array(t))}}]),e}();function lD(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=Rt(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var hD=function(){function e(){Dt(this,e)}return Lt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){VP(e=yP(e,PP));var n=RP(e),r=e._freezeSettings(),i=new BN;return OP(n,i,new VN(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){VP(e=yP(e,PP));var t=RP(e),n=e._freezeSettings(),r=new BN;return OP(t,r,new jN(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new yb(vb.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new mb;return e._queue.enqueueAndForgetEvenWhileRestricted(_t(wt().mark((function n(){return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=_t(wt().mark((function e(t){var n;return wt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Zb.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Zb.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(MT(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),fD=function(){function e(t,n,r){var i=this;Dt(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof A_||(this._appCompat=t)}return Lt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||lb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};wP(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return LP(this._delegate)}},{key:"disableNetwork",value:function(){return MP(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&fP("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new mb;return e.asyncQueue.enqueueAndForget(_t(wt().mark((function n(){return wt().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=aN,n.next=3,aP(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(RP(e=yP(e,PP)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return ZR(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new yb("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new SD(this,IP(this._delegate,e))}catch(t){throw gD(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new mD(this,EP(this._delegate,e))}catch(t){throw gD(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new xD(this,function(e,t){if(e=yP(e,kP),hP("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new yb(vb.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new _P(e,null,function(e){return new Ex(Ob.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw gD(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return rD(this._delegate,(function(n){return e(new pD(t,n))}))}},{key:"batch",value:function(){var e=this;return RP(this._delegate),new vD(new KR(this._delegate,(function(t){return eD(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return FP(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return UP(this._delegate,e).then((function(e){return e?new xD(t,e):null}))}}]),e}(),dD=function(e){Et(n,e);var t=At(n);function n(e){var r;return Dt(this,n),(r=t.call(this)).firestore=e,r}return Lt(n,[{key:"convertBytes",value:function(e){return new cD(new BP(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return mD.forKey(t,this.firestore,null)}}]),n}(qR);var pD=function(){function e(t,n){Dt(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new dD(t)}return Lt(e,[{key:"get",value:function(e){var t=this,n=TD(e);return this._delegate.get(n).then((function(e){return new bD(t._firestore,new wR(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=TD(e);return n?(oD("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=TD(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=TD(e);return this._delegate.delete(t),this}}]),e}(),vD=function(){function e(t){Dt(this,e),this._delegate=t}return Lt(e,[{key:"set",value:function(e,t,n){var r=TD(e);return n?(oD("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=TD(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=TD(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),yD=function(){function e(t,n,r){Dt(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return Lt(e,[{key:"fromFirestore",value:function(e,t){var n=new bR(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _D(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new dD(t),n),i.set(n,a)),a}}]),e}();yD.INSTANCES=new WeakMap;var mD=function(){function e(t,n){Dt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new dD(t)}return Lt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new SD(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new SD(this.firestore,IP(this._delegate,e))}catch(t){throw gD(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Cn(e))instanceof bP&&SP(this._delegate,e)}},{key:"set",value:function(e,t){t=oD("DocumentReference.set",t);try{return t?$R(this._delegate,e,t):$R(this._delegate,e)}catch(n){throw gD(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?JR(this._delegate,e):JR.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw gD(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return eD(yP(e.firestore,PP),[new wI(e._key,aI.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=kD(n),a=wD(n,(function(t){return new bD(e.firestore,new wR(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return XR(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?QR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=yP(e,bP);var t=yP(e.firestore,PP);return sP(RP(t),e._key,{source:"server"}).then((function(n){return tD(t,e,n)}))}(this._delegate):function(e){e=yP(e,bP);var t=yP(e.firestore,PP);return sP(RP(t),e._key).then((function(n){return tD(t,e,n)}))}(this._delegate),t.then((function(e){return new bD(n.firestore,new wR(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(yD.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new yb("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new bP(n._delegate,r,new Fb(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new bP(n._delegate,r,t))}}]),e}();function gD(e,t,n){return e.message=e.message.replace(t,n),e}function kD(e){var t,n=Rt(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!lD(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function wD(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=lD(e[0])?e[0]:lD(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var bD=function(){function e(t,n){Dt(this,e),this._firestore=t,this._delegate=n}return Lt(e,[{key:"ref",get:function(){return new mD(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return IR(this._delegate,e._delegate)}}]),e}(),_D=function(e){Et(n,e);var t=At(n);function n(){return Dt(this,n),t.apply(this,arguments)}return Lt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||fb()}(void 0!==t),t}}]),n}(bD),xD=function(){function e(t,n){Dt(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new dD(t)}return Lt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,TR(this._delegate,function(e,t,n){var r=t,i=gR("where",e);return new CR(i,r,n)}(t,n,r)))}catch(i){throw gD(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,TR(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=gR("orderBy",e);return new AR(n,t)}(t,n)))}catch(r){throw gD(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,TR(this._delegate,function(e){return mP("limit",e),new NR("limit",e,"F")}(t)))}catch(n){throw gD(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,TR(this._delegate,function(e){return mP("limitToLast",e),new NR("limitToLast",e,"L")}(t)))}catch(n){throw gD(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,TR(this._delegate,RR.apply(void 0,arguments)))}catch(t){throw gD(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,TR(this._delegate,DR.apply(void 0,arguments)))}catch(t){throw gD(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,TR(this._delegate,LR.apply(void 0,arguments)))}catch(t){throw gD(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,TR(this._delegate,MR.apply(void 0,arguments)))}catch(t){throw gD(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return TP(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?YR(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=yP(e,_P);var t=yP(e.firestore,PP),n=RP(t),r=new GR(t);return cP(n,e._query,{source:"server"}).then((function(n){return new _R(t,r,e,n)}))}(this._delegate):function(e){e=yP(e,_P);var t=yP(e.firestore,PP),n=RP(t),r=new GR(t);return ER(e._query),cP(n,e._query).then((function(n){return new _R(t,r,e,n)}))}(this._delegate),t.then((function(e){return new ED(n.firestore,new _R(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=kD(n),a=wD(n,(function(t){return new ED(e.firestore,new _R(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return XR(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(yD.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),ID=function(){function e(t,n){Dt(this,e),this._firestore=t,this._delegate=n}return Lt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new _D(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),ED=function(){function e(t,n){Dt(this,e),this._firestore=t,this._delegate=n}return Lt(e,[{key:"query",get:function(){return new xD(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new _D(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new ID(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new _D(n._firestore,r))}))}},{key:"isEqual",value:function(e){return IR(this._delegate,e._delegate)}}]),e}(),SD=function(e){Et(n,e);var t=At(n);function n(e,r){var i;return Dt(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return Lt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new mD(this.firestore,e):null}},{key:"doc",value:function(e){try{return new mD(this.firestore,void 0===e?EP(this._delegate):EP(this._delegate,e))}catch(t){throw gD(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=yP(e.firestore,PP),r=EP(e),i=zR(e.converter,t);return eD(n,[JP($P(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,aI.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new mD(t.firestore,e)}))}},{key:"isEqual",value:function(e){return SP(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(yD.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(xD);function TD(e){return yP(e,bP)}var CD=function(){function e(){Dt(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=Mt(jP,n)}return Lt(e,[{key:"isEqual",value:function(e){return(e=Cn(e))instanceof jP&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Mb.keyField().canonicalString())}}]),e}(),AD=function(){function e(t){Dt(this,e),this._delegate=t}return Lt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new eR("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new XP("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=iD.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=aD.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new rR("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),ND={Firestore:fD,GeoPoint:zP,Timestamp:Pb,Blob:cD,Transaction:pD,WriteBatch:vD,DocumentReference:mD,DocumentSnapshot:bD,Query:xD,QueryDocumentSnapshot:_D,QuerySnapshot:ED,CollectionReference:SD,FieldPath:CD,FieldValue:AD,setLogLevel:function(e){!function(e){ob.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new An("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},ND)))}(e,(function(e,t){return new fD(e,t,new hD)})),e.registerVersion("@firebase/firestore-compat","0.1.23")}(Cc);var PD,RD,DD,OD,LD,MD,FD,UD,VD,jD,BD,qD,zD,WD=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ir(),t=arguments.length>1?arguments[1]:void 0;return yr(e,"database").getImmediate({identifier:t})}(Cc.initializeApp({apiKey:"AIzaSyDv8hqtTkJPOyGH4Y8U3P0yM3GF0WENuRw",authDomain:"socialdog-p.firebaseapp.com",databaseURL:"https://socialdog-p-default-rtdb.firebaseio.com/",projectId:"socialdog-p",storageBucket:"socialdog-p.appspot.com",messagingSenderId:"886655917895",appId:"1:886655917895:web:6a5abafb3b8814d6747662",measurementId:"G-RX909TZ1BS"})),KD=ut.div(PD||(PD=u(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin: 0;\n  padding: 0.5em;\n  font-size: 1.5em;\n  color: black;\n  border-bottom: solid 1px #f2f2f2;\n"]))),HD=ut.div(RD||(RD=u(["\n  font-family: sans-serif;\n  font-size: 0.7em;\n"]))),GD=ut.div(DD||(DD=u(["\n  position: absolute;\n  padding-left: 22%;\n  font-size: 0.7em;\n"]))),QD=ut.div(OD||(OD=u(["\n  font-size: 0.5em;\n  /* padding-right: 2em; */\n"]))),YD=function(e){var t=e.username,n=e.content,r=e.time,i=new Intl.DateTimeFormat("en-US",{month:Date.now()-r>=864e5?"2-digit":void 0,day:Date.now()-r>=864e5?"2-digit":void 0,hour:"2-digit",minute:"2-digit"}).format(r);return console.log(r),console.log("now"),console.log(Date.now()),(0,st.jsx)("div",{children:(0,st.jsxs)(KD,{children:[(0,st.jsx)(HD,{children:t}),(0,st.jsx)(GD,{children:n}),(0,st.jsx)(QD,{children:i})]})})},$D=ut.div(LD||(LD=u(["\n  display: flex;\n  flex-direction: column-reverse;\n"]))),JD=function(){var e=gt((0,t.useState)([]),2),n=e[0],r=e[1];return(0,t.useEffect)((function(){yc(lc(WD,"messages/"),(function(e){var t=e.val(),n=[];Object.values(t).forEach((function(e){n.push({id:e.uid,content:e.content,user:e.user,time:e.time})})),r((function(){return n}))}))}),[]),(0,st.jsx)($D,{children:n.map((function(e){return(0,st.jsx)(YD,{username:e.user,content:e.content,time:e.time},e.id)}))})},XD=ut.div(MD||(MD=u(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  background: rgb(101, 96, 182);\n  background: linear-gradient(\n    90deg,\n    rgba(101, 96, 182, 1) 0%,\n    rgba(85, 223, 251, 1) 100%\n  );\n  font-size: 8px;\n  color: white;\n"]))),ZD=ut.h3(FD||(FD=u(["\n  margin: 0.3em;\n"]))),eO=function(){return(0,st.jsxs)(XD,{children:[(0,st.jsx)(ZD,{children:"React / React Rdeux/ Firebase Realtime Database/ Styled-Component"}),(0,st.jsx)(ZD,{children:"Made by \u30ab\u30f3"})]})},tO=function(){var e=1,t=new WeakMap;return function n(r,i){return"number"===typeof r||"string"===typeof r?i?"idx-"+i:"val-"+r:t.has(r)?"uid"+t.get(r):(t.set(r,e++),n(r))}}(),nO=function(e,t){var n=WD,r=Date.now();fc(lc(n,"messages/"+tO(r)),{uid:tO(r),content:t,user:e,time:r})},rO=ut.div(UD||(UD=u(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start center;\n  padding: 2%;\n  font-size: 1.3em;\n  border-bottom: solid 1px #f2f2f2;\n  background-color: aliceblue;\n"]))),iO=ut.input(VD||(VD=u(["\n  width: 77%;\n  font-size: 1em;\n  border: solid 1px;\n  border-radius: 1em;\n"]))),aO=ut.button(jD||(jD=u(["\n  width: 20%;\n  font-size: 1em;\n  border: none;\n  border-radius: 1em;\n  background-color: #9fa8f2;\n"]))),oO=function(){var e=k((function(e){return e.user})),n=gt((0,t.useState)(""),2),r=n[0],i=n[1];return(0,st.jsxs)(rO,{children:[(0,st.jsx)(iO,{type:"text",id:"message",name:"message",onChange:function(e){i(e.target.value)},value:r,maxLength:"25"}),(0,st.jsx)(aO,{onClick:function(){""!==r&&nO(e,r),i("")},children:"Send"})]})},uO=ut.div(BD||(BD=u(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start center;\n  padding: 2%;\n  font-size: 1.3em;\n  border-bottom: solid 1px #f2f2f2;\n  background-color: aliceblue;\n"]))),sO=ut.input(qD||(qD=u(["\n  width: 77%;\n  font-size: 1.2em;\n  border: solid 1px;\n  border-radius: 1em;\n"]))),cO=ut.button(zD||(zD=u(["\n  width: 20%;\n  font-size: 1em;\n  border: none;\n  border-radius: 1em;\n  background-color: #9fa8f2;\n"]))),lO=function(){var e=N(),n=k((function(e){return e.user})),r=(0,t.useRef)(null);return(0,st.jsxs)(uO,{children:[(0,st.jsx)(sO,{ref:r,type:"text",value:n}),(0,st.jsx)(cO,{onClick:function(){e({type:"CHANGE_INPUT_VALUE",payload:r.current.value})},children:"Login"})]})},hO=function(){var e=k((function(e){return e.user}));return(0,st.jsxs)("section",{children:[(0,st.jsx)(dt,{}),(0,st.jsxs)("section",{children:[void 0===e?(0,st.jsx)(lO,{}):(0,st.jsx)(oO,{}),(0,st.jsx)(JD,{})]}),(0,st.jsx)(eO,{})]})};function fO(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var dO="function"===typeof Symbol&&Symbol.observable||"@@observable",pO=function(){return Math.random().toString(36).substring(7).split("").join(".")},vO={INIT:"@@redux/INIT"+pO(),REPLACE:"@@redux/REPLACE"+pO(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+pO()}};function yO(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}var mO=function e(t,n,r){var i;if("function"===typeof n&&"function"===typeof r||"function"===typeof r&&"function"===typeof arguments[3])throw new Error(fO(0));if("function"===typeof n&&"undefined"===typeof r&&(r=n,n=void 0),"undefined"!==typeof r){if("function"!==typeof r)throw new Error(fO(1));return r(e)(t,n)}if("function"!==typeof t)throw new Error(fO(2));var a=t,o=n,u=[],s=u,c=!1;function l(){s===u&&(s=u.slice())}function h(){if(c)throw new Error(fO(3));return o}function f(e){if("function"!==typeof e)throw new Error(fO(4));if(c)throw new Error(fO(5));var t=!0;return l(),s.push(e),function(){if(t){if(c)throw new Error(fO(6));t=!1,l();var n=s.indexOf(e);s.splice(n,1),u=null}}}function d(e){if(!yO(e))throw new Error(fO(7));if("undefined"===typeof e.type)throw new Error(fO(8));if(c)throw new Error(fO(9));try{c=!0,o=a(o,e)}finally{c=!1}for(var t=u=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!==typeof e)throw new Error(fO(10));a=e,d({type:vO.REPLACE})}function v(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(fO(11));function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[dO]=function(){return this},e}return d({type:vO.INIT}),(i={dispatch:d,subscribe:f,getState:h,replaceReducer:p})[dO]=v,i};var gO=mO((function(e,t){if(void 0===e)return{user:void 0};var n=o({},e);return"CHANGE_INPUT_VALUE"===t.type?o(o({},n),{},{user:t.payload}):n}));var kO=function(){return(0,st.jsx)("div",{className:"App",children:(0,st.jsx)(E,{store:gO,children:(0,st.jsx)(hO,{})})})},wO=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,st.jsx)(t.StrictMode,{children:(0,st.jsx)(kO,{})})),wO()}()}();
//# sourceMappingURL=main.24fbfdaa.js.map